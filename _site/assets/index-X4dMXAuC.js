(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const C of document.querySelectorAll('link[rel="modulepreload"]'))f(C);new MutationObserver(C=>{for(const b of C)if(b.type==="childList")for(const $ of b.addedNodes)$.tagName==="LINK"&&$.rel==="modulepreload"&&f($)}).observe(document,{childList:!0,subtree:!0});function s(C){const b={};return C.integrity&&(b.integrity=C.integrity),C.referrerPolicy&&(b.referrerPolicy=C.referrerPolicy),C.crossOrigin==="use-credentials"?b.credentials="include":C.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function f(C){if(C.ep)return;C.ep=!0;const b=s(C);fetch(C.href,b)}})();const cacheNode=e=>{window.spwashi.setItem("nodes",window.spwashi.nodes)},readNodePosition=e=>{const s=(window.spwashi.getItem("nodes",window.spwashi.nodes)||[]).find(f=>f.id===e.id);return s||{}};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var md5$1={exports:{}},crypt={exports:{}};(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u={rotl:function(s,f){return s<<f|s>>>32-f},rotr:function(s,f){return s<<32-f|s>>>f},endian:function(s){if(s.constructor==Number)return u.rotl(s,8)&16711935|u.rotl(s,24)&4278255360;for(var f=0;f<s.length;f++)s[f]=u.endian(s[f]);return s},randomBytes:function(s){for(var f=[];s>0;s--)f.push(Math.floor(Math.random()*256));return f},bytesToWords:function(s){for(var f=[],C=0,b=0;C<s.length;C++,b+=8)f[b>>>5]|=s[C]<<24-b%32;return f},wordsToBytes:function(s){for(var f=[],C=0;C<s.length*32;C+=8)f.push(s[C>>>5]>>>24-C%32&255);return f},bytesToHex:function(s){for(var f=[],C=0;C<s.length;C++)f.push((s[C]>>>4).toString(16)),f.push((s[C]&15).toString(16));return f.join("")},hexToBytes:function(s){for(var f=[],C=0;C<s.length;C+=2)f.push(parseInt(s.substr(C,2),16));return f},bytesToBase64:function(s){for(var f=[],C=0;C<s.length;C+=3)for(var b=s[C]<<16|s[C+1]<<8|s[C+2],$=0;$<4;$++)C*8+$*6<=s.length*8?f.push(e.charAt(b>>>6*(3-$)&63)):f.push("=");return f.join("")},base64ToBytes:function(s){s=s.replace(/[^A-Z0-9+\/]/ig,"");for(var f=[],C=0,b=0;C<s.length;b=++C%4)b!=0&&f.push((e.indexOf(s.charAt(C-1))&Math.pow(2,-2*b+8)-1)<<b*2|e.indexOf(s.charAt(C))>>>6-b*2);return f}};crypt.exports=u})();var cryptExports=crypt.exports,charenc={utf8:{stringToBytes:function(e){return charenc.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(charenc.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var u=[],s=0;s<e.length;s++)u.push(e.charCodeAt(s)&255);return u},bytesToString:function(e){for(var u=[],s=0;s<e.length;s++)u.push(String.fromCharCode(e[s]));return u.join("")}}},charenc_1=charenc;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var isBuffer_1=function(e){return e!=null&&(isBuffer(e)||isSlowBuffer(e)||!!e._isBuffer)};function isBuffer(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&isBuffer(e.slice(0,0))}(function(){var e=cryptExports,u=charenc_1.utf8,s=isBuffer_1,f=charenc_1.bin,C=function(b,$){b.constructor==String?$&&$.encoding==="binary"?b=f.stringToBytes(b):b=u.stringToBytes(b):s(b)?b=Array.prototype.slice.call(b,0):!Array.isArray(b)&&b.constructor!==Uint8Array&&(b=b.toString());for(var w=e.bytesToWords(b),h=b.length*8,d=1732584193,i=-271733879,r=-1732584194,n=271733878,t=0;t<w.length;t++)w[t]=(w[t]<<8|w[t]>>>24)&16711935|(w[t]<<24|w[t]>>>8)&4278255360;w[h>>>5]|=128<<h%32,w[(h+64>>>9<<4)+14]=h;for(var o=C._ff,l=C._gg,p=C._hh,v=C._ii,t=0;t<w.length;t+=16){var k=d,D=i,_=r,M=n;d=o(d,i,r,n,w[t+0],7,-680876936),n=o(n,d,i,r,w[t+1],12,-389564586),r=o(r,n,d,i,w[t+2],17,606105819),i=o(i,r,n,d,w[t+3],22,-1044525330),d=o(d,i,r,n,w[t+4],7,-176418897),n=o(n,d,i,r,w[t+5],12,1200080426),r=o(r,n,d,i,w[t+6],17,-1473231341),i=o(i,r,n,d,w[t+7],22,-45705983),d=o(d,i,r,n,w[t+8],7,1770035416),n=o(n,d,i,r,w[t+9],12,-1958414417),r=o(r,n,d,i,w[t+10],17,-42063),i=o(i,r,n,d,w[t+11],22,-1990404162),d=o(d,i,r,n,w[t+12],7,1804603682),n=o(n,d,i,r,w[t+13],12,-40341101),r=o(r,n,d,i,w[t+14],17,-1502002290),i=o(i,r,n,d,w[t+15],22,1236535329),d=l(d,i,r,n,w[t+1],5,-165796510),n=l(n,d,i,r,w[t+6],9,-1069501632),r=l(r,n,d,i,w[t+11],14,643717713),i=l(i,r,n,d,w[t+0],20,-373897302),d=l(d,i,r,n,w[t+5],5,-701558691),n=l(n,d,i,r,w[t+10],9,38016083),r=l(r,n,d,i,w[t+15],14,-660478335),i=l(i,r,n,d,w[t+4],20,-405537848),d=l(d,i,r,n,w[t+9],5,568446438),n=l(n,d,i,r,w[t+14],9,-1019803690),r=l(r,n,d,i,w[t+3],14,-187363961),i=l(i,r,n,d,w[t+8],20,1163531501),d=l(d,i,r,n,w[t+13],5,-1444681467),n=l(n,d,i,r,w[t+2],9,-51403784),r=l(r,n,d,i,w[t+7],14,1735328473),i=l(i,r,n,d,w[t+12],20,-1926607734),d=p(d,i,r,n,w[t+5],4,-378558),n=p(n,d,i,r,w[t+8],11,-2022574463),r=p(r,n,d,i,w[t+11],16,1839030562),i=p(i,r,n,d,w[t+14],23,-35309556),d=p(d,i,r,n,w[t+1],4,-1530992060),n=p(n,d,i,r,w[t+4],11,1272893353),r=p(r,n,d,i,w[t+7],16,-155497632),i=p(i,r,n,d,w[t+10],23,-1094730640),d=p(d,i,r,n,w[t+13],4,681279174),n=p(n,d,i,r,w[t+0],11,-358537222),r=p(r,n,d,i,w[t+3],16,-722521979),i=p(i,r,n,d,w[t+6],23,76029189),d=p(d,i,r,n,w[t+9],4,-640364487),n=p(n,d,i,r,w[t+12],11,-421815835),r=p(r,n,d,i,w[t+15],16,530742520),i=p(i,r,n,d,w[t+2],23,-995338651),d=v(d,i,r,n,w[t+0],6,-198630844),n=v(n,d,i,r,w[t+7],10,1126891415),r=v(r,n,d,i,w[t+14],15,-1416354905),i=v(i,r,n,d,w[t+5],21,-57434055),d=v(d,i,r,n,w[t+12],6,1700485571),n=v(n,d,i,r,w[t+3],10,-1894986606),r=v(r,n,d,i,w[t+10],15,-1051523),i=v(i,r,n,d,w[t+1],21,-2054922799),d=v(d,i,r,n,w[t+8],6,1873313359),n=v(n,d,i,r,w[t+15],10,-30611744),r=v(r,n,d,i,w[t+6],15,-1560198380),i=v(i,r,n,d,w[t+13],21,1309151649),d=v(d,i,r,n,w[t+4],6,-145523070),n=v(n,d,i,r,w[t+11],10,-1120210379),r=v(r,n,d,i,w[t+2],15,718787259),i=v(i,r,n,d,w[t+9],21,-343485551),d=d+k>>>0,i=i+D>>>0,r=r+_>>>0,n=n+M>>>0}return e.endian([d,i,r,n])};C._ff=function(b,$,w,h,d,i,r){var n=b+($&w|~$&h)+(d>>>0)+r;return(n<<i|n>>>32-i)+$},C._gg=function(b,$,w,h,d,i,r){var n=b+($&h|w&~h)+(d>>>0)+r;return(n<<i|n>>>32-i)+$},C._hh=function(b,$,w,h,d,i,r){var n=b+($^w^h)+(d>>>0)+r;return(n<<i|n>>>32-i)+$},C._ii=function(b,$,w,h,d,i,r){var n=b+(w^($|~h))+(d>>>0)+r;return(n<<i|n>>>32-i)+$},C._blocksize=16,C._digestsize=16,md5$1.exports=function(b,$){if(b==null)throw new Error("Illegal argument "+b);var w=e.wordsToBytes(C(b,$));return $&&$.asBytes?w:$&&$.asString?f.bytesToString(w):e.bytesToHex(w)}})();var md5Exports=md5$1.exports;const md5=getDefaultExportFromCjs(md5Exports),getDocumentMode=()=>window.spwashi.parameters.mode,setDocumentMode=(e,u=!0,s=!1)=>{u&&getDocumentMode()===e&&(e=null),window.spwashi.parameters.mode=e,document.body.dataset.mode=e,window.spwashi.onModeChange(e,s)};function initializeModeSelection(e){const u=document.querySelector("#mainmenu-shortcuts ol");u.innerHTML="",window.spwashi.modeOrder.forEach(s=>{const f=document.createElement("li");f.dataset.modeAction=s,f.dataset.interfaceElement="main-menu";const C=document.createElement("button");C.id=`mode-selector--${s}`,C.innerText=s,f.appendChild(C),u.appendChild(f)}),window.spwashi.modeOrder.forEach(s=>{const f=document.querySelector(`#mode-selector--${s}`);f.onclick=()=>{setDocumentMode(getDocumentMode()===s?null:s)}}),setDocumentMode(e)}function initializeDirectMode(){window.spwashi.refreshNodeInputs=e=>{const u=window.spwashi.getItem("parameters.nodes-input-map-fn-string")||"data => data",s=document.querySelector("#nodes-input"),f=window.spwashi.getItem("parameters.nodes-input")||[];s.value=JSON.stringify(f,null,2),document.querySelector("#nodes-selector-fn").value=u},window.spwashi.readNodeInputs=()=>{var e;const input=(e=document.querySelector("#nodes-input"))==null?void 0:e.value;if(!input)return window.spwashi.setItem("parameters.nodes-input",null),reject();const mapFnInput=document.querySelector("#nodes-selector-fn"),mapFnString=(mapFnInput==null?void 0:mapFnInput.value)||"data => data",mapFn=eval(mapFnString),parsed=JSON.parse(input),nodes=mapFn(parsed);return Array.isArray(nodes)?nodes||[]:nodes.nodes&&Array.isArray(nodes.nodes)?nodes.nodes:(console.error("not nodes"),[])},window.spwashi.refreshNodeInputs(),window.spwashi.nodes.push(...window.spwashi.readNodeInputs().filter(NODE_MANAGER.filterNode)),window.spwashi.nodes.forEach(NODE_MANAGER.processNode),reinitializeSimulation();const _readNodeInputs=(e=!0)=>{const u=window.spwashi.readNodeInputs();e||(window.spwashi.nodes.length=0,reinitializeSimulation()),window.spwashi.nodes.push(...u),reinitializeSimulation(),setDocumentMode("")};document.querySelector("#controls button.read-nodes").onclick=()=>_readNodeInputs(!0),document.querySelector("#node-input-container button.add").onclick=()=>_readNodeInputs(!0),document.querySelector("#node-input-container button.replace").onclick=()=>_readNodeInputs(!1),document.querySelector("#controls button.save-nodes").onclick=()=>{const e=window.spwashi.nodes;e.map(NODE_MANAGER.cacheNode),window.spwashi.setItem("parameters.nodes-input",e),window.spwashi.setItem("parameters.nodes-input-map-fn-string","data => data"),window.spwashi.refreshNodeInputs()},document.querySelector("#controls button.clear-saved-nodes").onclick=()=>{const e=window.spwashi.nodes;e.map(u=>{const s=u.id;for(let f in u)delete u[f];u.id=s,NODE_MANAGER.cacheNode(u)}),e.length=0,reinitializeSimulation()}}function initializeQuerystringMode(){const e=document.querySelector("#query-parameters .value"),u=[...new URLSearchParams(window.location.search)].map(f=>f.join("=")).join(`
`);e.innerHTML=u,e.rows=u.split(`
`).length+1;const s=document.querySelector("#query-parameters button.go");s.onclick=f=>{const C=new URLSearchParams(e.value.split(`
`).map(b=>b.split("=")));window.spwashi.readParameters(C),f.shiftKey&&(window.location="?"+C)}}var ace$2={exports:{}};(function(e,u){(function(){var s="ace",f=function(){return this}();!f&&typeof window<"u"&&(f=window);var C=function(i,r,n){if(typeof i!="string"){C.original?C.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(n=r),C.modules[i]||(C.payloads[i]=n,C.modules[i]=null)};C.modules={},C.payloads={};var b=function(i,r,n){if(typeof r=="string"){var t=h(i,r);if(t!=null)return n&&n(),t}else if(Object.prototype.toString.call(r)==="[object Array]"){for(var o=[],l=0,p=r.length;l<p;++l){var v=h(i,r[l]);if(v==null&&$.original)return;o.push(v)}return n&&n.apply(null,o)||!0}},$=function(i,r){var n=b("",i,r);return n==null&&$.original?$.original.apply(this,arguments):n},w=function(i,r){if(r.indexOf("!")!==-1){var n=r.split("!");return w(i,n[0])+"!"+w(i,n[1])}if(r.charAt(0)=="."){var t=i.split("/").slice(0,-1).join("/");for(r=t+"/"+r;r.indexOf(".")!==-1&&o!=r;){var o=r;r=r.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return r},h=function(i,r){r=w(i,r);var n=C.modules[r];if(!n){if(n=C.payloads[r],typeof n=="function"){var t={},o={id:r,uri:"",exports:t,packaged:!0},l=function(v,k){return b(r,v,k)},p=n(l,t,o);t=p||o.exports,C.modules[r]=t,delete C.payloads[r]}n=C.modules[r]=t||n}return n};function d(i){var r=f;i&&(f[i]||(f[i]={}),r=f[i]),(!r.define||!r.define.packaged)&&(C.original=r.define,r.define=C,r.define.packaged=!0),(!r.require||!r.require.packaged)&&($.original=r.require,r.require=$,r.require.packaged=!0)}d(s)})(),ace.define("ace/lib/es6-shim",["require","exports","module"],function(s,f,C){function b($,w,h){Object.defineProperty($,w,{value:h,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||b(String.prototype,"startsWith",function($,w){return w=w||0,this.lastIndexOf($,w)===w}),String.prototype.endsWith||b(String.prototype,"endsWith",function($,w){var h=this;(w===void 0||w>h.length)&&(w=h.length),w-=$.length;var d=h.indexOf($,w);return d!==-1&&d===w}),String.prototype.repeat||b(String.prototype,"repeat",function($){for(var w="",h=this;$>0;)$&1&&(w+=h),($>>=1)&&(h+=h);return w}),String.prototype.includes||b(String.prototype,"includes",function($,w){return this.indexOf($,w)!=-1}),Object.assign||(Object.assign=function($){if($==null)throw new TypeError("Cannot convert undefined or null to object");for(var w=Object($),h=1;h<arguments.length;h++){var d=arguments[h];d!=null&&Object.keys(d).forEach(function(i){w[i]=d[i]})}return w}),Object.values||(Object.values=function($){return Object.keys($).map(function(w){return $[w]})}),Array.prototype.find||b(Array.prototype,"find",function($){for(var w=this.length,h=arguments[1],d=0;d<w;d++){var i=this[d];if($.call(h,i,d,this))return i}}),Array.prototype.findIndex||b(Array.prototype,"findIndex",function($){for(var w=this.length,h=arguments[1],d=0;d<w;d++){var i=this[d];if($.call(h,i,d,this))return d}}),Array.prototype.includes||b(Array.prototype,"includes",function($,w){return this.indexOf($,w)!=-1}),Array.prototype.fill||b(Array.prototype,"fill",function($){for(var w=this,h=w.length>>>0,d=arguments[1],i=d>>0,r=i<0?Math.max(h+i,0):Math.min(i,h),n=arguments[2],t=n===void 0?h:n>>0,o=t<0?Math.max(h+t,0):Math.min(t,h);r<o;)w[r]=$,r++;return w}),Array.of||b(Array,"of",function(){return Array.prototype.slice.call(arguments)})}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(s,f,C){s("./es6-shim")}),ace.define("ace/lib/deep_copy",["require","exports","module"],function(s,f,C){f.deepCopy=function b($){if(typeof $!="object"||!$)return $;var w;if(Array.isArray($)){w=[];for(var h=0;h<$.length;h++)w[h]=b($[h]);return w}if(Object.prototype.toString.call($)!=="[object Object]")return $;w={};for(var h in $)w[h]=b($[h]);return w}}),ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(s,f,C){f.last=function(w){return w[w.length-1]},f.stringReverse=function(w){return w.split("").reverse().join("")},f.stringRepeat=function(w,h){for(var d="";h>0;)h&1&&(d+=w),(h>>=1)&&(w+=w);return d};var b=/^\s\s*/,$=/\s\s*$/;f.stringTrimLeft=function(w){return w.replace(b,"")},f.stringTrimRight=function(w){return w.replace($,"")},f.copyObject=function(w){var h={};for(var d in w)h[d]=w[d];return h},f.copyArray=function(w){for(var h=[],d=0,i=w.length;d<i;d++)w[d]&&typeof w[d]=="object"?h[d]=this.copyObject(w[d]):h[d]=w[d];return h},f.deepCopy=s("./deep_copy").deepCopy,f.arrayToMap=function(w){for(var h={},d=0;d<w.length;d++)h[w[d]]=1;return h},f.createMap=function(w){var h=Object.create(null);for(var d in w)h[d]=w[d];return h},f.arrayRemove=function(w,h){for(var d=0;d<=w.length;d++)h===w[d]&&w.splice(d,1)},f.escapeRegExp=function(w){return w.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},f.escapeHTML=function(w){return(""+w).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},f.getMatchOffsets=function(w,h){var d=[];return w.replace(h,function(i){d.push({offset:arguments[arguments.length-2],length:i.length})}),d},f.deferredCall=function(w){var h=null,d=function(){h=null,w()},i=function(r){return i.cancel(),h=setTimeout(d,r||0),i};return i.schedule=i,i.call=function(){return this.cancel(),w(),i},i.cancel=function(){return clearTimeout(h),h=null,i},i.isPending=function(){return h},i},f.delayedCall=function(w,h){var d=null,i=function(){d=null,w()},r=function(n){d==null&&(d=setTimeout(i,n||h))};return r.delay=function(n){d&&clearTimeout(d),d=setTimeout(i,n||h)},r.schedule=r,r.call=function(){this.cancel(),w()},r.cancel=function(){d&&clearTimeout(d),d=null},r.isPending=function(){return d},r},f.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},f.supportsUnicodeFlag=function(){try{new RegExp("^.$","u")}catch{return!1}return!0}}),ace.define("ace/lib/useragent",["require","exports","module"],function(s,f,C){f.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},f.getOS=function(){return f.isMac?f.OS.MAC:f.isLinux?f.OS.LINUX:f.OS.WINDOWS};var b=typeof navigator=="object"?navigator:{},$=(/mac|win|linux/i.exec(b.platform)||["other"])[0].toLowerCase(),w=b.userAgent||"",h=b.appName||"";f.isWin=$=="win",f.isMac=$=="mac",f.isLinux=$=="linux",f.isIE=h=="Microsoft Internet Explorer"||h.indexOf("MSAppHost")>=0?parseFloat((w.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((w.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),f.isOldIE=f.isIE&&f.isIE<9,f.isGecko=f.isMozilla=w.match(/ Gecko\/\d+/),f.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",f.isWebKit=parseFloat(w.split("WebKit/")[1])||void 0,f.isChrome=parseFloat(w.split(" Chrome/")[1])||void 0,f.isEdge=parseFloat(w.split(" Edge/")[1])||void 0,f.isAIR=w.indexOf("AdobeAIR")>=0,f.isAndroid=w.indexOf("Android")>=0,f.isChromeOS=w.indexOf(" CrOS ")>=0,f.isIOS=/iPad|iPhone|iPod/.test(w)&&!window.MSStream,f.isIOS&&(f.isMac=!0),f.isMobile=f.isIOS||f.isAndroid}),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(s,f,C){var b=s("./useragent"),$="http://www.w3.org/1999/xhtml";f.buildDom=function n(t,o,l){if(typeof t=="string"&&t){var p=document.createTextNode(t);return o&&o.appendChild(p),p}if(!Array.isArray(t))return t&&t.appendChild&&o&&o.appendChild(t),t;if(typeof t[0]!="string"||!t[0]){for(var v=[],k=0;k<t.length;k++){var D=n(t[k],o,l);D&&v.push(D)}return v}var _=document.createElement(t[0]),M=t[1],A=1;M&&typeof M=="object"&&!Array.isArray(M)&&(A=2);for(var k=A;k<t.length;k++)n(t[k],_,l);return A==2&&Object.keys(M).forEach(function(F){var N=M[F];F==="class"?_.className=Array.isArray(N)?N.join(" "):N:typeof N=="function"||F=="value"||F[0]=="$"?_[F]=N:F==="ref"?l&&(l[N]=_):F==="style"?typeof N=="string"&&(_.style.cssText=N):N!=null&&_.setAttribute(F,N)}),o&&o.appendChild(_),_},f.getDocumentHead=function(n){return n||(n=document),n.head||n.getElementsByTagName("head")[0]||n.documentElement},f.createElement=function(n,t){return document.createElementNS?document.createElementNS(t||$,n):document.createElement(n)},f.removeChildren=function(n){n.innerHTML=""},f.createTextNode=function(n,t){var o=t?t.ownerDocument:document;return o.createTextNode(n)},f.createFragment=function(n){var t=n?n.ownerDocument:document;return t.createDocumentFragment()},f.hasCssClass=function(n,t){var o=(n.className+"").split(/\s+/g);return o.indexOf(t)!==-1},f.addCssClass=function(n,t){f.hasCssClass(n,t)||(n.className+=" "+t)},f.removeCssClass=function(n,t){for(var o=n.className.split(/\s+/g);;){var l=o.indexOf(t);if(l==-1)break;o.splice(l,1)}n.className=o.join(" ")},f.toggleCssClass=function(n,t){for(var o=n.className.split(/\s+/g),l=!0;;){var p=o.indexOf(t);if(p==-1)break;l=!1,o.splice(p,1)}return l&&o.push(t),n.className=o.join(" "),l},f.setCssClass=function(n,t,o){o?f.addCssClass(n,t):f.removeCssClass(n,t)},f.hasCssString=function(n,t){var o=0,l;if(t=t||document,l=t.querySelectorAll("style")){for(;o<l.length;)if(l[o++].id===n)return!0}},f.removeElementById=function(n,t){t=t||document,t.getElementById(n)&&t.getElementById(n).remove()};var w,h=[];f.useStrictCSP=function(n){w=n,n==!1?d():h||(h=[])};function d(){var n=h;h=null,n&&n.forEach(function(t){i(t[0],t[1])})}function i(n,t,o){if(!(typeof document>"u")){if(h){if(o)d();else if(o===!1)return h.push([n,t])}if(!w){var l=o;!o||!o.getRootNode?l=document:(l=o.getRootNode(),(!l||l==o)&&(l=document));var p=l.ownerDocument||l;if(t&&f.hasCssString(t,l))return null;t&&(n+=`
/*# sourceURL=ace/css/`+t+" */");var v=f.createElement("style");v.appendChild(p.createTextNode(n)),t&&(v.id=t),l==p&&(l=f.getDocumentHead(p)),l.insertBefore(v,l.firstChild)}}}if(f.importCssString=i,f.importCssStylsheet=function(n,t){f.buildDom(["link",{rel:"stylesheet",href:n}],f.getDocumentHead(t))},f.scrollbarWidth=function(n){var t=f.createElement("ace_inner");t.style.width="100%",t.style.minWidth="0px",t.style.height="200px",t.style.display="block";var o=f.createElement("ace_outer"),l=o.style;l.position="absolute",l.left="-10000px",l.overflow="hidden",l.width="200px",l.minWidth="0px",l.height="150px",l.display="block",o.appendChild(t);var p=n&&n.documentElement||document&&document.documentElement;if(!p)return 0;p.appendChild(o);var v=t.offsetWidth;l.overflow="scroll";var k=t.offsetWidth;return v===k&&(k=o.clientWidth),p.removeChild(o),v-k},f.computedStyle=function(n,t){return window.getComputedStyle(n,"")||{}},f.setStyle=function(n,t,o){n[t]!==o&&(n[t]=o)},f.HAS_CSS_ANIMATION=!1,f.HAS_CSS_TRANSFORMS=!1,f.HI_DPI=b.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,b.isChromeOS&&(f.HI_DPI=!1),typeof document<"u"){var r=document.createElement("div");f.HI_DPI&&r.style.transform!==void 0&&(f.HAS_CSS_TRANSFORMS=!0),!b.isEdge&&typeof r.style.animationName<"u"&&(f.HAS_CSS_ANIMATION=!0),r=null}f.HAS_CSS_TRANSFORMS?f.translate=function(n,t,o){n.style.transform="translate("+Math.round(t)+"px, "+Math.round(o)+"px)"}:f.translate=function(n,t,o){n.style.top=Math.round(o)+"px",n.style.left=Math.round(t)+"px"}}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(s,f,C){/*
* based on code from:
*
* @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
* Available via the MIT or new BSD license.
* see: http://github.com/jrburke/requirejs for details
*/var b=s("./dom");f.get=function($,w){var h=new XMLHttpRequest;h.open("GET",$,!0),h.onreadystatechange=function(){h.readyState===4&&w(h.responseText)},h.send(null)},f.loadScript=function($,w){var h=b.getDocumentHead(),d=document.createElement("script");d.src=$,h.appendChild(d),d.onload=d.onreadystatechange=function(i,r){(r||!d.readyState||d.readyState=="loaded"||d.readyState=="complete")&&(d=d.onload=d.onreadystatechange=null,r||w())}},f.qualifyURL=function($){var w=document.createElement("a");return w.href=$,w.href}}),ace.define("ace/lib/oop",["require","exports","module"],function(s,f,C){f.inherits=function(b,$){b.super_=$,b.prototype=Object.create($.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}})},f.mixin=function(b,$){for(var w in $)b[w]=$[w];return b},f.implement=function(b,$){f.mixin(b,$)}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(s,f,C){var b={},$=function(){this.propagationStopped=!0},w=function(){this.defaultPrevented=!0};b._emit=b._dispatchEvent=function(h,d){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var i=this._eventRegistry[h]||[],r=this._defaultHandlers[h];if(!(!i.length&&!r)){(typeof d!="object"||!d)&&(d={}),d.type||(d.type=h),d.stopPropagation||(d.stopPropagation=$),d.preventDefault||(d.preventDefault=w),i=i.slice();for(var n=0;n<i.length&&(i[n](d,this),!d.propagationStopped);n++);if(r&&!d.defaultPrevented)return r(d,this)}},b._signal=function(h,d){var i=(this._eventRegistry||{})[h];if(i){i=i.slice();for(var r=0;r<i.length;r++)i[r](d,this)}},b.once=function(h,d){var i=this;if(this.on(h,function r(){i.off(h,r),d.apply(null,arguments)}),!d)return new Promise(function(r){d=r})},b.setDefaultHandler=function(h,d){var i=this._defaultHandlers;if(i||(i=this._defaultHandlers={_disabled_:{}}),i[h]){var r=i[h],n=i._disabled_[h];n||(i._disabled_[h]=n=[]),n.push(r);var t=n.indexOf(d);t!=-1&&n.splice(t,1)}i[h]=d},b.removeDefaultHandler=function(h,d){var i=this._defaultHandlers;if(i){var r=i._disabled_[h];if(i[h]==d)r&&this.setDefaultHandler(h,r.pop());else if(r){var n=r.indexOf(d);n!=-1&&r.splice(n,1)}}},b.on=b.addEventListener=function(h,d,i){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[h];return r||(r=this._eventRegistry[h]=[]),r.indexOf(d)==-1&&r[i?"unshift":"push"](d),d},b.off=b.removeListener=b.removeEventListener=function(h,d){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[h];if(i){var r=i.indexOf(d);r!==-1&&i.splice(r,1)}},b.removeAllListeners=function(h){h||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[h]=void 0),this._defaultHandlers&&(this._defaultHandlers[h]=void 0)},f.EventEmitter=b}),ace.define("ace/lib/report_error",["require","exports","module"],function(s,f,C){f.reportError=function($,w){var h=new Error($);h.data=w,typeof console=="object"&&console.error&&console.error(h),setTimeout(function(){throw h})}}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error"],function(s,f,C){"no use strict";var b=s("./oop"),$=s("./event_emitter").EventEmitter,w=s("./report_error").reportError,h={setOptions:function(n){Object.keys(n).forEach(function(t){this.setOption(t,n[t])},this)},getOptions:function(n){var t={};if(n)Array.isArray(n)||(t=n,n=Object.keys(t));else{var o=this.$options;n=Object.keys(o).filter(function(l){return!o[l].hidden})}return n.forEach(function(l){t[l]=this.getOption(l)},this),t},setOption:function(n,t){if(this["$"+n]!==t){var o=this.$options[n];if(!o)return d('misspelled option "'+n+'"');if(o.forwardTo)return this[o.forwardTo]&&this[o.forwardTo].setOption(n,t);o.handlesSet||(this["$"+n]=t),o&&o.set&&o.set.call(this,t)}},getOption:function(n){var t=this.$options[n];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(n):t&&t.get?t.get.call(this):this["$"+n]:d('misspelled option "'+n+'"')}};function d(n){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var i,r=function(){function n(){this.$defaultOptions={}}return n.prototype.defineOptions=function(t,o,l){return t.$options||(this.$defaultOptions[o]=t.$options={}),Object.keys(l).forEach(function(p){var v=l[p];typeof v=="string"&&(v={forwardTo:v}),v.name||(v.name=p),t.$options[v.name]=v,"initialValue"in v&&(t["$"+v.name]=v.initialValue)}),b.implement(t,h),this},n.prototype.resetOptions=function(t){Object.keys(t.$options).forEach(function(o){var l=t.$options[o];"value"in l&&t.setOption(o,l.value)})},n.prototype.setDefaultValue=function(t,o,l){if(!t){for(t in this.$defaultOptions)if(this.$defaultOptions[t][o])break;if(!this.$defaultOptions[t][o])return!1}var p=this.$defaultOptions[t]||(this.$defaultOptions[t]={});p[o]&&(p.forwardTo?this.setDefaultValue(p.forwardTo,o,l):p[o].value=l)},n.prototype.setDefaultValues=function(t,o){Object.keys(o).forEach(function(l){this.setDefaultValue(t,l,o[l])},this)},n.prototype.setMessages=function(t){i=t},n.prototype.nls=function(t,o){i&&!i[t]&&d("No message found for '"+t+"' in the provided messages, falling back to default English message.");var l=i&&i[t]||t;return o&&(l=l.replace(/\$(\$|[\d]+)/g,function(p,v){return v=="$"?"$":o[v]})),l},n}();r.prototype.warn=d,r.prototype.reportError=w,b.implement(r.prototype,$),f.AppConfig=r}),ace.define("ace/theme/textmate-css",["require","exports","module"],function(s,f,C){C.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`}),ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(s,f,C){f.isDark=!1,f.cssClass="ace-tm",f.cssText=s("./textmate-css"),f.$id="ace/theme/textmate";var b=s("../lib/dom");b.importCssString(f.cssText,f.cssClass,!1)}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(s,f,C){"no use strict";var b=s("./lib/lang"),$=s("./lib/net"),w=s("./lib/dom"),h=s("./lib/app_config").AppConfig;C.exports=f=new h;var d={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};f.get=function(t){if(!d.hasOwnProperty(t))throw new Error("Unknown config key: "+t);return d[t]},f.set=function(t,o){if(d.hasOwnProperty(t))d[t]=o;else if(this.setDefaultValue("",t,o)==!1)throw new Error("Unknown config key: "+t);t=="useStrictCSP"&&w.useStrictCSP(o)},f.all=function(){return b.copyObject(d)},f.$modes={},f.moduleUrl=function(t,o){if(d.$moduleUrls[t])return d.$moduleUrls[t];var l=t.split("/");o=o||l[l.length-2]||"";var p=o=="snippets"?"/":"-",v=l[l.length-1];if(o=="worker"&&p=="-"){var k=new RegExp("^"+o+"[\\-_]|[\\-_]"+o+"$","g");v=v.replace(k,"")}(!v||v==o)&&l.length>1&&(v=l[l.length-2]);var D=d[o+"Path"];return D==null?D=d.basePath:p=="/"&&(o=p=""),D&&D.slice(-1)!="/"&&(D+="/"),D+o+p+v+this.get("suffix")},f.setModuleUrl=function(t,o){return d.$moduleUrls[t]=o};var i=function(t,o){if(t==="ace/theme/textmate"||t==="./theme/textmate")return o(null,s("./theme/textmate"));if(r)return r(t,o);console.error("loader is not configured")},r;f.setLoader=function(t){r=t},f.dynamicModules=Object.create(null),f.$loading={},f.$loaded={},f.loadModule=function(t,o){var l,p;Array.isArray(t)&&(p=t[0],t=t[1]);var v=function(k){if(k&&!f.$loading[t])return o&&o(k);if(f.$loading[t]||(f.$loading[t]=[]),f.$loading[t].push(o),!(f.$loading[t].length>1)){var D=function(){i(t,function(_,M){M&&(f.$loaded[t]=M),f._emit("load.module",{name:t,module:M});var A=f.$loading[t];f.$loading[t]=null,A.forEach(function(F){F&&F(M)})})};if(!f.get("packaged"))return D();$.loadScript(f.moduleUrl(t,p),D),n()}};if(f.dynamicModules[t])f.dynamicModules[t]().then(function(k){k.default?v(k.default):v(k)});else{try{l=this.$require(t)}catch{}v(l||f.$loaded[t])}},f.$require=function(t){if(typeof C.require=="function"){var o="require";return C[o](t)}},f.setModuleLoader=function(t,o){f.dynamicModules[t]=o};var n=function(){!d.basePath&&!d.workerPath&&!d.modePath&&!d.themePath&&!Object.keys(d.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),n=function(){})};f.version="1.31.2"}),ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(s,f,C){s("./lib/fixoldbrowsers");var b=s("./config");b.setLoader(function(d,i){s([d],function(r){i(null,r)})});var $=function(){return this||typeof window<"u"&&window}();C.exports=function(d){b.init=w,b.$require=s,d.require=s},w(!0);function w(d){if(!(!$||!$.document)){b.set("packaged",d||s.packaged||C.packaged||$.define&&(void 0).packaged);var i={},r="",n=document.currentScript||document._currentScript,t=n&&n.ownerDocument||document;n&&n.src&&(r=n.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var o=t.getElementsByTagName("script"),l=0;l<o.length;l++){var p=o[l],v=p.src||p.getAttribute("src");if(v){for(var k=p.attributes,D=0,_=k.length;D<_;D++){var M=k[D];M.name.indexOf("data-ace-")===0&&(i[h(M.name.replace(/^data-ace-/,""))]=M.value)}var A=v.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);A&&(r=A[1])}}r&&(i.base=i.base||r,i.packaged=!0),i.basePath=i.base,i.workerPath=i.workerPath||i.base,i.modePath=i.modePath||i.base,i.themePath=i.themePath||i.base,delete i.base;for(var F in i)typeof i[F]<"u"&&b.set(F,i[F])}}function h(d){return d.replace(/-(.)/g,function(i,r){return r.toUpperCase()})}}),ace.define("ace/range",["require","exports","module"],function(s,f,C){var b=function(w,h){return w.row-h.row||w.column-h.column},$=function(){function w(h,d,i,r){this.start={row:h,column:d},this.end={row:i,column:r}}return w.prototype.isEqual=function(h){return this.start.row===h.start.row&&this.end.row===h.end.row&&this.start.column===h.start.column&&this.end.column===h.end.column},w.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},w.prototype.contains=function(h,d){return this.compare(h,d)==0},w.prototype.compareRange=function(h){var d,i=h.end,r=h.start;return d=this.compare(i.row,i.column),d==1?(d=this.compare(r.row,r.column),d==1?2:d==0?1:0):d==-1?-2:(d=this.compare(r.row,r.column),d==-1?-1:d==1?42:0)},w.prototype.comparePoint=function(h){return this.compare(h.row,h.column)},w.prototype.containsRange=function(h){return this.comparePoint(h.start)==0&&this.comparePoint(h.end)==0},w.prototype.intersects=function(h){var d=this.compareRange(h);return d==-1||d==0||d==1},w.prototype.isEnd=function(h,d){return this.end.row==h&&this.end.column==d},w.prototype.isStart=function(h,d){return this.start.row==h&&this.start.column==d},w.prototype.setStart=function(h,d){typeof h=="object"?(this.start.column=h.column,this.start.row=h.row):(this.start.row=h,this.start.column=d)},w.prototype.setEnd=function(h,d){typeof h=="object"?(this.end.column=h.column,this.end.row=h.row):(this.end.row=h,this.end.column=d)},w.prototype.inside=function(h,d){return this.compare(h,d)==0?!(this.isEnd(h,d)||this.isStart(h,d)):!1},w.prototype.insideStart=function(h,d){return this.compare(h,d)==0?!this.isEnd(h,d):!1},w.prototype.insideEnd=function(h,d){return this.compare(h,d)==0?!this.isStart(h,d):!1},w.prototype.compare=function(h,d){return!this.isMultiLine()&&h===this.start.row?d<this.start.column?-1:d>this.end.column?1:0:h<this.start.row?-1:h>this.end.row?1:this.start.row===h?d>=this.start.column?0:-1:this.end.row===h?d<=this.end.column?0:1:0},w.prototype.compareStart=function(h,d){return this.start.row==h&&this.start.column==d?-1:this.compare(h,d)},w.prototype.compareEnd=function(h,d){return this.end.row==h&&this.end.column==d?1:this.compare(h,d)},w.prototype.compareInside=function(h,d){return this.end.row==h&&this.end.column==d?1:this.start.row==h&&this.start.column==d?-1:this.compare(h,d)},w.prototype.clipRows=function(h,d){if(this.end.row>d)var i={row:d+1,column:0};else if(this.end.row<h)var i={row:h,column:0};if(this.start.row>d)var r={row:d+1,column:0};else if(this.start.row<h)var r={row:h,column:0};return w.fromPoints(r||this.start,i||this.end)},w.prototype.extend=function(h,d){var i=this.compare(h,d);if(i==0)return this;if(i==-1)var r={row:h,column:d};else var n={row:h,column:d};return w.fromPoints(r||this.start,n||this.end)},w.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},w.prototype.isMultiLine=function(){return this.start.row!==this.end.row},w.prototype.clone=function(){return w.fromPoints(this.start,this.end)},w.prototype.collapseRows=function(){return this.end.column==0?new w(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new w(this.start.row,0,this.end.row,0)},w.prototype.toScreenRange=function(h){var d=h.documentToScreenPosition(this.start),i=h.documentToScreenPosition(this.end);return new w(d.row,d.column,i.row,i.column)},w.prototype.moveBy=function(h,d){this.start.row+=h,this.start.column+=d,this.end.row+=h,this.end.column+=d},w}();$.fromPoints=function(w,h){return new $(w.row,w.column,h.row,h.column)},$.comparePoints=b,$.comparePoints=function(w,h){return w.row-h.row||w.column-h.column},f.Range=$}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(s,f,C){/*! @license
	==========================================================================
	SproutCore -- JavaScript Application Framework
	copyright 2006-2009, Sprout Systems Inc., Apple Inc. and contributors.

	Permission is hereby granted, free of charge, to any person obtaining a
	copy of this software and associated documentation files (the "Software"),
	to deal in the Software without restriction, including without limitation
	the rights to use, copy, modify, merge, publish, distribute, sublicense,
	and/or sell copies of the Software, and to permit persons to whom the
	Software is furnished to do so, subject to the following conditions:

	The above copyright notice and this permission notice shall be included in
	all copies or substantial portions of the Software.

	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
	FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
	DEALINGS IN THE SOFTWARE.

	SproutCore and the SproutCore logo are trademarks of Sprout Systems, Inc.

	For more information about SproutCore, visit http://www.sproutcore.com


	==========================================================================
	@license */var b=s("./oop"),$=function(){var w={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};w.PRINTABLE_KEYS[173]="-";var h,d;for(d in w.FUNCTION_KEYS)h=w.FUNCTION_KEYS[d].toLowerCase(),w[h]=parseInt(d,10);for(d in w.PRINTABLE_KEYS)h=w.PRINTABLE_KEYS[d].toLowerCase(),w[h]=parseInt(d,10);return b.mixin(w,w.MODIFIER_KEYS),b.mixin(w,w.PRINTABLE_KEYS),b.mixin(w,w.FUNCTION_KEYS),w.enter=w.return,w.escape=w.esc,w.del=w.delete,function(){for(var i=["cmd","ctrl","alt","shift"],r=Math.pow(2,i.length);r--;)w.KEY_MODS[r]=i.filter(function(n){return r&w.KEY_MODS[n]}).join("-")+"-"}(),w.KEY_MODS[0]="",w.KEY_MODS[-1]="input-",w}();b.mixin(f,$),f.default=f,f.keyCodeToString=function(w){var h=$[w];return typeof h!="string"&&(h=String.fromCharCode(w)),h.toLowerCase()}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(s,f,C){var b=s("./keys"),$=s("./useragent"),w=null,h=0,d;function i(){d=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){d={passive:!1}}})}catch{}}function r(){return d==null&&i(),d}function n(D,_,M){this.elem=D,this.type=_,this.callback=M}n.prototype.destroy=function(){o(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var t=f.addListener=function(D,_,M,A){D.addEventListener(_,M,r()),A&&A.$toDestroy.push(new n(D,_,M))},o=f.removeListener=function(D,_,M){D.removeEventListener(_,M,r())};f.stopEvent=function(D){return f.stopPropagation(D),f.preventDefault(D),!1},f.stopPropagation=function(D){D.stopPropagation&&D.stopPropagation()},f.preventDefault=function(D){D.preventDefault&&D.preventDefault()},f.getButton=function(D){return D.type=="dblclick"?0:D.type=="contextmenu"||$.isMac&&D.ctrlKey&&!D.altKey&&!D.shiftKey?2:D.button},f.capture=function(D,_,M){var A=D&&D.ownerDocument||document;function F(N){_&&_(N),M&&M(N),o(A,"mousemove",_),o(A,"mouseup",F),o(A,"dragstart",F)}return t(A,"mousemove",_),t(A,"mouseup",F),t(A,"dragstart",F),F},f.addMouseWheelListener=function(D,_,M){t(D,"wheel",function(A){var F=.15,N=A.deltaX||0,O=A.deltaY||0;switch(A.deltaMode){case A.DOM_DELTA_PIXEL:A.wheelX=N*F,A.wheelY=O*F;break;case A.DOM_DELTA_LINE:var H=15;A.wheelX=N*H,A.wheelY=O*H;break;case A.DOM_DELTA_PAGE:var R=150;A.wheelX=N*R,A.wheelY=O*R;break}_(A)},M)},f.addMultiMouseDownListener=function(D,_,M,A,F){var N=0,O,H,R,I={2:"dblclick",3:"tripleclick",4:"quadclick"};function L(S){if(f.getButton(S)!==0?N=0:S.detail>1?(N++,N>4&&(N=1)):N=1,$.isIE){var E=Math.abs(S.clientX-O)>5||Math.abs(S.clientY-H)>5;(!R||E)&&(N=1),R&&clearTimeout(R),R=setTimeout(function(){R=null},_[N-1]||600),N==1&&(O=S.clientX,H=S.clientY)}if(S._clicks=N,M[A]("mousedown",S),N>4)N=0;else if(N>1)return M[A](I[N],S)}Array.isArray(D)||(D=[D]),D.forEach(function(S){t(S,"mousedown",L,F)})};var l=function(D){return 0|(D.ctrlKey?1:0)|(D.altKey?2:0)|(D.shiftKey?4:0)|(D.metaKey?8:0)};f.getModifierString=function(D){return b.KEY_MODS[l(D)]};function p(D,_,M){var A=l(_);if(!$.isMac&&w){if(_.getModifierState&&(_.getModifierState("OS")||_.getModifierState("Win"))&&(A|=8),w.altGr)if((3&A)!=3)w.altGr=0;else return;if(M===18||M===17){var F="location"in _?_.location:_.keyLocation;if(M===17&&F===1)w[M]==1&&(h=_.timeStamp);else if(M===18&&A===3&&F===2){var N=_.timeStamp-h;N<50&&(w.altGr=!0)}}}if(M in b.MODIFIER_KEYS&&(M=-1),!A&&M===13){var F="location"in _?_.location:_.keyLocation;if(F===3&&(D(_,A,-M),_.defaultPrevented))return}if($.isChromeOS&&A&8){if(D(_,A,M),_.defaultPrevented)return;A&=-9}return!A&&!(M in b.FUNCTION_KEYS)&&!(M in b.PRINTABLE_KEYS)?!1:D(_,A,M)}f.addCommandKeyListener=function(D,_,M){if($.isOldGecko||$.isOpera&&!("KeyboardEvent"in window)){var A=null;t(D,"keydown",function(N){A=N.keyCode},M),t(D,"keypress",function(N){return p(_,N,A)},M)}else{var F=null;t(D,"keydown",function(N){w[N.keyCode]=(w[N.keyCode]||0)+1;var O=p(_,N,N.keyCode);return F=N.defaultPrevented,O},M),t(D,"keypress",function(N){F&&(N.ctrlKey||N.altKey||N.shiftKey||N.metaKey)&&(f.stopEvent(N),F=null)},M),t(D,"keyup",function(N){w[N.keyCode]=null},M),w||(v(),t(window,"focus",v))}};function v(){w=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!$.isOldIE){var k=1;f.nextTick=function(D,_){_=_||window;var M="zero-timeout-message-"+k++,A=function(F){F.data==M&&(f.stopPropagation(F),o(_,"message",A),D())};t(_,"message",A),_.postMessage(M,"*")}}f.$idleBlocked=!1,f.onIdle=function(D,_){return setTimeout(function M(){f.$idleBlocked?setTimeout(M,100):D()},_)},f.$idleBlockId=null,f.blockIdle=function(D){f.$idleBlockId&&clearTimeout(f.$idleBlockId),f.$idleBlocked=!0,f.$idleBlockId=setTimeout(function(){f.$idleBlocked=!1},D||100)},f.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),f.nextFrame?f.nextFrame=f.nextFrame.bind(window):f.nextFrame=function(D){setTimeout(D,17)}}),ace.define("ace/clipboard",["require","exports","module"],function(s,f,C){var b;C.exports={lineMode:!1,pasteCancelled:function(){return b&&b>Date.now()-50?!0:b=!1},cancel:function(){b=Date.now()}}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(s,f,C){var b=s("../lib/event"),$=s("../config").nls,w=s("../lib/useragent"),h=s("../lib/dom"),d=s("../lib/lang"),i=s("../clipboard"),r=w.isChrome<18,n=w.isIE,t=w.isChrome>63,o=400,l=s("../lib/keys"),p=l.KEY_MODS,v=w.isIOS,k=v?/\s/:/\n/,D=w.isMobile,_=function(M,A){var F=h.createElement("textarea");F.className="ace_text-input",F.setAttribute("wrap","off"),F.setAttribute("autocorrect","off"),F.setAttribute("autocapitalize","off"),F.setAttribute("spellcheck",!1),F.style.opacity="0",M.insertBefore(F,M.firstChild);var N=!1,O=!1,H=!1,R=!1,I="";D||(F.style.fontSize="1px");var L=!1,S=!1,E="",T=0,B=0,P=0,W=Number.MAX_SAFE_INTEGER,z=Number.MIN_SAFE_INTEGER,U=0;try{var j=document.activeElement===F}catch{}this.setNumberOfExtraLines=function(X){if(W=Number.MAX_SAFE_INTEGER,z=Number.MIN_SAFE_INTEGER,X<0){U=0;return}U=X},this.setAriaOptions=function(X){if(X.activeDescendant?(F.setAttribute("aria-haspopup","true"),F.setAttribute("aria-autocomplete",X.inline?"both":"list"),F.setAttribute("aria-activedescendant",X.activeDescendant)):(F.setAttribute("aria-haspopup","false"),F.setAttribute("aria-autocomplete","both"),F.removeAttribute("aria-activedescendant")),X.role&&F.setAttribute("role",X.role),X.setLabel&&(F.setAttribute("aria-roledescription",$("editor")),A.session)){var ee=A.session.selection.cursor.row;F.setAttribute("aria-label",$("Cursor at row $0",[ee+1]))}},this.setAriaOptions({role:"textbox"}),b.addListener(F,"blur",function(X){S||(A.onBlur(X),j=!1)},A),b.addListener(F,"focus",function(X){if(!S){if(j=!0,w.isEdge)try{if(!document.hasFocus())return}catch{}A.onFocus(X),w.isEdge?setTimeout(G):G()}},A),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:A.renderer.enableKeyboardAccessibility}),I||t||this.$focusScroll=="browser")return F.focus({preventScroll:!0});var X=F.style.top;F.style.position="fixed",F.style.top="0px";try{var ee=F.getBoundingClientRect().top!=0}catch{return}var te=[];if(ee)for(var ie=F.parentElement;ie&&ie.nodeType==1;)te.push(ie),ie.setAttribute("ace_nocontext",!0),!ie.parentElement&&ie.getRootNode?ie=ie.getRootNode().host:ie=ie.parentElement;F.focus({preventScroll:!0}),ee&&te.forEach(function(re){re.removeAttribute("ace_nocontext")}),setTimeout(function(){F.style.position="",F.style.top=="0px"&&(F.style.top=X)},0)},this.blur=function(){F.blur()},this.isFocused=function(){return j},A.on("beforeEndOperation",function(){var X=A.curOp,ee=X&&X.command&&X.command.name;if(ee!="insertstring"){var te=ee&&(X.docChanged||X.selectionChanged);H&&te&&(E=F.value="",ve()),G()}});var V=function(X,ee){for(var te=ee,ie=1;ie<=X-W&&ie<2*U+1;ie++)te+=A.session.getLine(X-ie).length+1;return te},G=v?function(X){if(!(!j||N&&!X||R)){X||(X="");var ee=`
 ab`+X+`cde fg
`;ee!=F.value&&(F.value=E=ee);var te=4,ie=4+(X.length||(A.selection.isEmpty()?0:1));(T!=te||B!=ie)&&F.setSelectionRange(te,ie),T=te,B=ie}}:function(){if(!(H||R)&&!(!j&&!Z)){H=!0;var X=0,ee=0,te="";if(A.session){var ie=A.selection,re=ie.getRange(),ce=ie.cursor.row;ce===z+1?(W=z+1,z=W+2*U):ce===W-1?(z=W-1,W=z-2*U):(ce<W-1||ce>z+1)&&(W=ce>U?ce-U:0,z=ce>U?ce+U:2*U);for(var he=[],ue=W;ue<=z;ue++)he.push(A.session.getLine(ue));if(te=he.join(`
`),X=V(re.start.row,re.start.column),ee=V(re.end.row,re.end.column),re.start.row<W){var le=A.session.getLine(W-1);X=re.start.row<W-1?0:X,ee+=le.length+1,te=le+`
`+te}else if(re.end.row>z){var oe=A.session.getLine(z+1);ee=re.end.row>z+1?oe.length:re.end.column,ee+=te.length+1,te=te+`
`+oe}else D&&ce>0&&(te=`
`+te,ee+=1,X+=1);te.length>o&&(X<o&&ee<o?te=te.slice(0,o):(te=`
`,X==ee?X=ee=0:(X=0,ee=1)));var pe=te+`

`;pe!=E&&(F.value=E=pe,T=B=pe.length)}if(Z&&(T=F.selectionStart,B=F.selectionEnd),B!=ee||T!=X||F.selectionEnd!=B)try{F.setSelectionRange(X,ee),T=X,B=ee}catch{}H=!1}};this.resetSelection=G,j&&A.onFocus();var K=function(X){return X.selectionStart===0&&X.selectionEnd>=E.length&&X.value===E&&E&&X.selectionEnd!==B},Y=function(X){H||(N?N=!1:K(F)?(A.selectAll(),G()):D&&F.selectionStart!=T&&G())},Q=null;this.setInputHandler=function(X){Q=X},this.getInputHandler=function(){return Q};var Z=!1,J=function(X,ee){if(Z&&(Z=!1),O)return G(),X&&A.onPaste(X),O=!1,"";for(var te=F.selectionStart,ie=F.selectionEnd,re=T,ce=E.length-B,he=X,ue=X.length-te,le=X.length-ie,oe=0;re>0&&E[oe]==X[oe];)oe++,re--;for(he=he.slice(oe),oe=1;ce>0&&E.length-oe>T-1&&E[E.length-oe]==X[X.length-oe];)oe++,ce--;ue-=oe-1,le-=oe-1;var pe=he.length-oe+1;if(pe<0&&(re=-pe,pe=0),he=he.slice(0,pe),!ee&&!he&&!ue&&!re&&!ce&&!le)return"";R=!0;var we=!1;return w.isAndroid&&he==". "&&(he="  ",we=!0),he&&!re&&!ce&&!ue&&!le||L?A.onTextInput(he):A.onTextInput(he,{extendLeft:re,extendRight:ce,restoreStart:ue,restoreEnd:le}),R=!1,E=X,T=te,B=ie,P=le,we?`
`:he},q=function(X){if(H)return me();if(X&&X.inputType){if(X.inputType=="historyUndo")return A.execCommand("undo");if(X.inputType=="historyRedo")return A.execCommand("redo")}var ee=F.value,te=J(ee,!0);(ee.length>o+100||k.test(te)||D&&T<1&&T==B)&&G()},ne=function(X,ee,te){var ie=X.clipboardData||window.clipboardData;if(!(!ie||r)){var re=n||te?"Text":"text/plain";try{return ee?ie.setData(re,ee)!==!1:ie.getData(re)}catch(ce){if(!te)return ne(ce,ee,!0)}}},se=function(X,ee){var te=A.getCopyText();if(!te)return b.preventDefault(X);ne(X,te)?(v&&(G(te),N=te,setTimeout(function(){N=!1},10)),ee?A.onCut():A.onCopy(),b.preventDefault(X)):(N=!0,F.value=te,F.select(),setTimeout(function(){N=!1,G(),ee?A.onCut():A.onCopy()}))},fe=function(X){se(X,!0)},de=function(X){se(X,!1)},ae=function(X){var ee=ne(X);i.pasteCancelled()||(typeof ee=="string"?(ee&&A.onPaste(ee,X),w.isIE&&setTimeout(G),b.preventDefault(X)):(F.value="",O=!0))};b.addCommandKeyListener(F,A.onCommandKey.bind(A),A),b.addListener(F,"select",Y,A),b.addListener(F,"input",q,A),b.addListener(F,"cut",fe,A),b.addListener(F,"copy",de,A),b.addListener(F,"paste",ae,A),(!("oncut"in F)||!("oncopy"in F)||!("onpaste"in F))&&b.addListener(M,"keydown",function(X){if(!(w.isMac&&!X.metaKey||!X.ctrlKey))switch(X.keyCode){case 67:de(X);break;case 86:ae(X);break;case 88:fe(X);break}},A);var ge=function(X){if(!(H||!A.onCompositionStart||A.$readOnly)&&(H={},!L)){X.data&&(H.useTextareaForIME=!1),setTimeout(me,0),A._signal("compositionStart"),A.on("mousedown",be);var ee=A.getSelectionRange();ee.end.row=ee.start.row,ee.end.column=ee.start.column,H.markerRange=ee,H.selectionStart=T,A.onCompositionStart(H),H.useTextareaForIME?(E=F.value="",T=0,B=0):(F.msGetInputContext&&(H.context=F.msGetInputContext()),F.getInputContext&&(H.context=F.getInputContext()))}},me=function(){if(!(!H||!A.onCompositionUpdate||A.$readOnly)){if(L)return be();if(H.useTextareaForIME)A.onCompositionUpdate(F.value);else{var X=F.value;J(X),H.markerRange&&(H.context&&(H.markerRange.start.column=H.selectionStart=H.context.compositionStartOffset),H.markerRange.end.column=H.markerRange.start.column+B-H.selectionStart+P)}}},ve=function(X){!A.onCompositionEnd||A.$readOnly||(H=!1,A.onCompositionEnd(),A.off("mousedown",be),X&&q())};function be(){S=!0,F.blur(),F.focus(),S=!1}var Se=d.delayedCall(me,50).schedule.bind(null,null);function Ce(X){X.keyCode==27&&F.value.length<F.selectionStart&&(H||(E=F.value),T=B=-1,G()),Se()}b.addListener(F,"compositionstart",ge,A),b.addListener(F,"compositionupdate",me,A),b.addListener(F,"keyup",Ce,A),b.addListener(F,"keydown",Se,A),b.addListener(F,"compositionend",ve,A),this.getElement=function(){return F},this.setCommandMode=function(X){L=X,F.readOnly=!1},this.setReadOnly=function(X){L||(F.readOnly=X)},this.setCopyWithEmptySelection=function(X){},this.onContextMenu=function(X){Z=!0,G(),A._emit("nativecontextmenu",{target:A,domEvent:X}),this.moveToMouse(X,!0)},this.moveToMouse=function(X,ee){I||(I=F.style.cssText),F.style.cssText=(ee?"z-index:100000;":"")+(w.isIE?"opacity:0.1;":"")+"text-indent: -"+(T+B)*A.renderer.characterWidth*.5+"px;";var te=A.container.getBoundingClientRect(),ie=h.computedStyle(A.container),re=te.top+(parseInt(ie.borderTopWidth)||0),ce=te.left+(parseInt(te.borderLeftWidth)||0),he=te.bottom-re-F.clientHeight-2,ue=function(le){h.translate(F,le.clientX-ce-2,Math.min(le.clientY-re-2,he))};ue(X),X.type=="mousedown"&&(A.renderer.$isMousePressed=!0,clearTimeout(xe),w.isWin&&b.capture(A.container,ue,ye))},this.onContextMenuClose=ye;var xe;function ye(){clearTimeout(xe),xe=setTimeout(function(){I&&(F.style.cssText=I,I=""),A.renderer.$isMousePressed=!1,A.renderer.$keepTextAreaAtCursor&&A.renderer.$moveTextAreaToCursor()},0)}var $e=function(X){A.textInput.onContextMenu(X),ye()};b.addListener(F,"mouseup",$e,A),b.addListener(F,"mousedown",function(X){X.preventDefault(),ye()},A),b.addListener(A.renderer.scroller,"contextmenu",$e,A),b.addListener(F,"contextmenu",$e,A),v&&_e(M,A,F);function _e(X,ee,te){var ie=null,re=!1;te.addEventListener("keydown",function(he){ie&&clearTimeout(ie),re=!0},!0),te.addEventListener("keyup",function(he){ie=setTimeout(function(){re=!1},100)},!0);var ce=function(he){if(document.activeElement===te&&!(re||H||ee.$mouseHandler.isMousePressed)&&!N){var ue=te.selectionStart,le=te.selectionEnd,oe=null,pe=0;if(ue==0?oe=l.up:ue==1?oe=l.home:le>B&&E[le]==`
`?oe=l.end:ue<T&&E[ue-1]==" "?(oe=l.left,pe=p.option):ue<T||ue==T&&B!=T&&ue==le?oe=l.left:le>B&&E.slice(0,le).split(`
`).length>2?oe=l.down:le>B&&E[le-1]==" "?(oe=l.right,pe=p.option):(le>B||le==B&&B!=T&&ue==le)&&(oe=l.right),ue!==le&&(pe|=p.shift),oe){var we=ee.onCommandKey({},pe,oe);if(!we&&ee.commands){oe=l.keyCodeToString(oe);var ke=ee.commands.findKeyCommand(pe,oe);ke&&ee.execCommand(ke)}T=ue,B=le,G("")}}};document.addEventListener("selectionchange",ce),ee.on("destroy",function(){document.removeEventListener("selectionchange",ce)})}this.destroy=function(){F.parentElement&&F.parentElement.removeChild(F)}};f.TextInput=_,f.$setUserAgentForTests=function(M,A){D=M,v=A}}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(s,f,C){var b=s("../lib/useragent"),$=0,w=550,h=function(){function r(n){n.$clickSelection=null;var t=n.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(n)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(n)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(n)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(n)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(n));var o=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];o.forEach(function(l){n[l]=this[l]},this),n.selectByLines=this.extendSelectionBy.bind(n,"getLineRange"),n.selectByWords=this.extendSelectionBy.bind(n,"getWordRange")}return r.prototype.onMouseDown=function(n){var t=n.inSelection(),o=n.getDocumentPosition();this.mousedownEvent=n;var l=this.editor,p=n.getButton();if(p!==0){var v=l.getSelectionRange(),k=v.isEmpty();(k||p==1)&&l.selection.moveToPosition(o),p==2&&(l.textInput.onContextMenu(n.domEvent),b.isMozilla||n.preventDefault());return}if(this.mousedownEvent.time=Date.now(),t&&!l.isFocused()&&(l.focus(),this.$focusTimeout&&!this.$clickSelection&&!l.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(n);return}return this.captureMouse(n),this.startSelect(o,n.domEvent._clicks>1),n.preventDefault()},r.prototype.startSelect=function(n,t){n=n||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var o=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?o.selection.selectToPosition(n):t||o.selection.moveToPosition(n),t||this.select(),o.setStyle("ace_selecting"),this.setState("select"))},r.prototype.select=function(){var n,t=this.editor,o=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var l=this.$clickSelection.comparePoint(o);if(l==-1)n=this.$clickSelection.end;else if(l==1)n=this.$clickSelection.start;else{var p=i(this.$clickSelection,o);o=p.cursor,n=p.anchor}t.selection.setSelectionAnchor(n.row,n.column)}t.selection.selectToPosition(o),t.renderer.scrollCursorIntoView()},r.prototype.extendSelectionBy=function(n){var t,o=this.editor,l=o.renderer.screenToTextCoordinates(this.x,this.y),p=o.selection[n](l.row,l.column);if(this.$clickSelection){var v=this.$clickSelection.comparePoint(p.start),k=this.$clickSelection.comparePoint(p.end);if(v==-1&&k<=0)t=this.$clickSelection.end,(p.end.row!=l.row||p.end.column!=l.column)&&(l=p.start);else if(k==1&&v>=0)t=this.$clickSelection.start,(p.start.row!=l.row||p.start.column!=l.column)&&(l=p.end);else if(v==-1&&k==1)l=p.end,t=p.start;else{var D=i(this.$clickSelection,l);l=D.cursor,t=D.anchor}o.selection.setSelectionAnchor(t.row,t.column)}o.selection.selectToPosition(l),o.renderer.scrollCursorIntoView()},r.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},r.prototype.focusWait=function(){var n=d(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),t=Date.now();(n>$||t-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},r.prototype.onDoubleClick=function(n){var t=n.getDocumentPosition(),o=this.editor,l=o.session,p=l.getBracketRange(t);p?(p.isEmpty()&&(p.start.column--,p.end.column++),this.setState("select")):(p=o.selection.getWordRange(t.row,t.column),this.setState("selectByWords")),this.$clickSelection=p,this.select()},r.prototype.onTripleClick=function(n){var t=n.getDocumentPosition(),o=this.editor;this.setState("selectByLines");var l=o.getSelectionRange();l.isMultiLine()&&l.contains(t.row,t.column)?(this.$clickSelection=o.selection.getLineRange(l.start.row),this.$clickSelection.end=o.selection.getLineRange(l.end.row).end):this.$clickSelection=o.selection.getLineRange(t.row),this.select()},r.prototype.onQuadClick=function(n){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("selectAll")},r.prototype.onMouseWheel=function(n){if(!n.getAccelKey()){n.getShiftKey()&&n.wheelY&&!n.wheelX&&(n.wheelX=n.wheelY,n.wheelY=0);var t=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var o=this.$lastScroll,l=n.domEvent.timeStamp,p=l-o.t,v=p?n.wheelX/p:o.vx,k=p?n.wheelY/p:o.vy;p<w&&(v=(v+o.vx)/2,k=(k+o.vy)/2);var D=Math.abs(v/k),_=!1;if(D>=1&&t.renderer.isScrollableBy(n.wheelX*n.speed,0)&&(_=!0),D<=1&&t.renderer.isScrollableBy(0,n.wheelY*n.speed)&&(_=!0),_)o.allowed=l;else if(l-o.allowed<w){var M=Math.abs(v)<=1.5*Math.abs(o.vx)&&Math.abs(k)<=1.5*Math.abs(o.vy);M?(_=!0,o.allowed=l):o.allowed=0}if(o.t=l,o.vx=v,o.vy=k,_)return t.renderer.scrollBy(n.wheelX*n.speed,n.wheelY*n.speed),n.stop()}},r}();h.prototype.selectEnd=h.prototype.selectByLinesEnd,h.prototype.selectAllEnd=h.prototype.selectByLinesEnd,h.prototype.selectByWordsEnd=h.prototype.selectByLinesEnd,f.DefaultHandlers=h;function d(r,n,t,o){return Math.sqrt(Math.pow(t-r,2)+Math.pow(o-n,2))}function i(r,n){if(r.start.row==r.end.row)var t=2*n.column-r.start.column-r.end.column;else if(r.start.row==r.end.row-1&&!r.start.column&&!r.end.column)var t=n.column-4;else var t=2*n.row-r.start.row-r.end.row;return t<0?{cursor:r.start,anchor:r.end}:{cursor:r.end,anchor:r.start}}}),ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/range"],function(s,f,C){var b=this&&this.__extends||function(){var o=function(l,p){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,k){v.__proto__=k}||function(v,k){for(var D in k)Object.prototype.hasOwnProperty.call(k,D)&&(v[D]=k[D])},o(l,p)};return function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");o(l,p);function v(){this.constructor=l}l.prototype=p===null?Object.create(p):(v.prototype=p.prototype,new v)}}(),$=this&&this.__values||function(o){var l=typeof Symbol=="function"&&Symbol.iterator,p=l&&o[l],v=0;if(p)return p.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&v>=o.length&&(o=void 0),{value:o&&o[v++],done:!o}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")},w=s("./lib/dom"),h=s("./range").Range,d="ace_tooltip",i=function(){function o(l){this.isOpen=!1,this.$element=null,this.$parentNode=l}return o.prototype.$init=function(){return this.$element=w.createElement("div"),this.$element.className=d,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},o.prototype.getElement=function(){return this.$element||this.$init()},o.prototype.setText=function(l){this.getElement().textContent=l},o.prototype.setHtml=function(l){this.getElement().innerHTML=l},o.prototype.setPosition=function(l,p){this.getElement().style.left=l+"px",this.getElement().style.top=p+"px"},o.prototype.setClassName=function(l){w.addCssClass(this.getElement(),l)},o.prototype.setTheme=function(l){this.$element.className=d+" "+(l.isDark?"ace_dark ":"")+(l.cssClass||"")},o.prototype.show=function(l,p,v){l!=null&&this.setText(l),p!=null&&v!=null&&this.setPosition(p,v),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},o.prototype.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=d,this.isOpen=!1)},o.prototype.getHeight=function(){return this.getElement().offsetHeight},o.prototype.getWidth=function(){return this.getElement().offsetWidth},o.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},o}(),r=function(){function o(){this.popups=[]}return o.prototype.addPopup=function(l){this.popups.push(l),this.updatePopups()},o.prototype.removePopup=function(l){var p=this.popups.indexOf(l);p!==-1&&(this.popups.splice(p,1),this.updatePopups())},o.prototype.updatePopups=function(){var l,p,v,k;this.popups.sort(function(R,I){return I.priority-R.priority});var D=[];try{for(var _=$(this.popups),M=_.next();!M.done;M=_.next()){var A=M.value,F=!0;try{for(var N=(v=void 0,$(D)),O=N.next();!O.done;O=N.next()){var H=O.value;if(this.doPopupsOverlap(H,A)){F=!1;break}}}catch(R){v={error:R}}finally{try{O&&!O.done&&(k=N.return)&&k.call(N)}finally{if(v)throw v.error}}F?D.push(A):A.hide()}}catch(R){l={error:R}}finally{try{M&&!M.done&&(p=_.return)&&p.call(_)}finally{if(l)throw l.error}}},o.prototype.doPopupsOverlap=function(l,p){var v=l.getElement().getBoundingClientRect(),k=p.getElement().getBoundingClientRect();return v.left<k.right&&v.right>k.left&&v.top<k.bottom&&v.bottom>k.top},o}(),n=new r;f.popupManager=n,f.Tooltip=i;var t=function(o){b(l,o);function l(p){p===void 0&&(p=document.body);var v=o.call(this,p)||this;v.timeout=void 0,v.lastT=0,v.idleTime=350,v.lastEvent=void 0,v.onMouseOut=v.onMouseOut.bind(v),v.onMouseMove=v.onMouseMove.bind(v),v.waitForHover=v.waitForHover.bind(v),v.hide=v.hide.bind(v);var k=v.getElement();return k.style.whiteSpace="pre-wrap",k.style.pointerEvents="auto",k.addEventListener("mouseout",v.onMouseOut),k.tabIndex=-1,k.addEventListener("blur",(function(){k.contains(document.activeElement)||this.hide()}).bind(v)),v}return l.prototype.addToEditor=function(p){p.on("mousemove",this.onMouseMove),p.on("mousedown",this.hide),p.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},l.prototype.removeFromEditor=function(p){p.off("mousemove",this.onMouseMove),p.off("mousedown",this.hide),p.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},l.prototype.onMouseMove=function(p,v){this.lastEvent=p,this.lastT=Date.now();var k=v.$mouseHandler.isMousePressed;if(this.isOpen){var D=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(D.row,D.column)||k||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||k||(this.lastEvent=p,this.timeout=setTimeout(this.waitForHover,this.idleTime))},l.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var p=Date.now()-this.lastT;if(this.idleTime-p>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-p);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},l.prototype.isOutsideOfText=function(p){var v=p.editor,k=p.getDocumentPosition(),D=v.session.getLine(k.row);if(k.column==D.length){var _=v.renderer.pixelToScreenCoordinates(p.clientX,p.clientY),M=v.session.documentToScreenPosition(k.row,k.column);if(M.column!=_.column||M.row!=_.row)return!0}return!1},l.prototype.setDataProvider=function(p){this.$gatherData=p},l.prototype.showForRange=function(p,v,k,D){if(!(D&&D!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var _=p.renderer;this.isOpen||(n.addPopup(this),this.$registerCloseEvents(),this.setTheme(_.theme)),this.isOpen=!0,this.addMarker(v,p.session),this.range=h.fromPoints(v.start,v.end);var M=this.getElement();M.innerHTML="",M.appendChild(k),M.style.display="block";var A=_.textToScreenCoordinates(v.start.row,v.start.column),F=M.clientHeight,N=_.scroller.getBoundingClientRect(),O=!0;A.pageY-F<0&&(O=!1),O?A.pageY-=F:A.pageY+=_.lineHeight,M.style.maxWidth=N.width-(A.pageX-N.left)+"px",this.setPosition(A.pageX,A.pageY)}},l.prototype.addMarker=function(p,v){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=v,this.marker=v&&v.addMarker(p,"ace_highlight-marker","text")},l.prototype.hide=function(p){!p&&document.activeElement==this.getElement()||p&&p.target&&(p.type!="keydown"||p.ctrlKey||p.metaKey)&&this.$element.contains(p.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,n.removePopup(this)))},l.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("mousewheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},l.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("mousewheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},l.prototype.onMouseOut=function(p){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!p.relatedTarget||p.relatedTarget==this.getElement()||p&&p.currentTarget.contains(p.relatedTarget)||p.relatedTarget.classList.contains("ace_content")||this.hide())},l}(i);f.HoverTooltip=t}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config"],function(s,f,C){var b=this&&this.__extends||function(){var t=function(o,l){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,v){p.__proto__=v}||function(p,v){for(var k in v)Object.prototype.hasOwnProperty.call(v,k)&&(p[k]=v[k])},t(o,l)};return function(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");t(o,l);function p(){this.constructor=o}o.prototype=l===null?Object.create(l):(p.prototype=l.prototype,new p)}}(),$=this&&this.__values||function(t){var o=typeof Symbol=="function"&&Symbol.iterator,l=o&&t[o],p=0;if(l)return l.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&p>=t.length&&(t=void 0),{value:t&&t[p++],done:!t}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")},w=s("../lib/dom"),h=s("../lib/event"),d=s("../tooltip").Tooltip,i=s("../config").nls;function r(t){var o=t.editor,l=o.renderer.$gutterLayer,p=new n(o);t.editor.setDefaultHandler("guttermousedown",function(A){if(!(!o.isFocused()||A.getButton()!=0)){var F=l.getRegion(A);if(F!="foldWidgets"){var N=A.getDocumentPosition().row,O=o.session.selection;if(A.getShiftKey())O.selectTo(N,0);else{if(A.domEvent.detail==2)return o.selectAll(),A.preventDefault();t.$clickSelection=o.selection.getLineRange(N)}return t.setState("selectByLines"),t.captureMouse(A),A.preventDefault()}}});var v,k;function D(){var A=k.getDocumentPosition().row,F=o.session.getLength();if(A==F){var N=o.renderer.pixelToScreenCoordinates(0,k.y).row,O=k.$pos;if(N>o.session.documentToScreenRow(O.row,O.column))return _()}if(p.showTooltip(A),!!p.isOpen)if(o.on("mousewheel",_),t.$tooltipFollowsMouse)M(k);else{var H=k.getGutterRow(),R=l.$lines.get(H);if(R){var I=R.element.querySelector(".ace_gutter_annotation"),L=I.getBoundingClientRect(),S=p.getElement().style;S.left=L.right+"px",S.top=L.bottom+"px"}else M(k)}}function _(){v&&(v=clearTimeout(v)),p.isOpen&&(p.hideTooltip(),o.off("mousewheel",_))}function M(A){p.setPosition(A.x,A.y)}t.editor.setDefaultHandler("guttermousemove",function(A){var F=A.domEvent.target||A.domEvent.srcElement;if(w.hasCssClass(F,"ace_fold-widget"))return _();p.isOpen&&t.$tooltipFollowsMouse&&M(A),k=A,!v&&(v=setTimeout(function(){v=null,k&&!t.isMousePressed?D():_()},50))}),h.addListener(o.renderer.$gutter,"mouseout",function(A){k=null,!(!p.isOpen||v)&&(v=setTimeout(function(){v=null,_()},50))},o),o.on("changeSession",_),o.on("input",_)}f.GutterHandler=r;var n=function(t){b(o,t);function o(l){var p=t.call(this,l.container)||this;return p.editor=l,p}return o.prototype.setPosition=function(l,p){var v=window.innerWidth||document.documentElement.clientWidth,k=window.innerHeight||document.documentElement.clientHeight,D=this.getWidth(),_=this.getHeight();l+=15,p+=15,l+D>v&&(l-=l+D-v),p+_>k&&(p-=20+_),d.prototype.setPosition.call(this,l,p)},Object.defineProperty(o,"annotationLabels",{get:function(){return{error:{singular:i("error"),plural:i("errors")},warning:{singular:i("warning"),plural:i("warnings")},info:{singular:i("information message"),plural:i("information messages")}}},enumerable:!1,configurable:!0}),o.prototype.showTooltip=function(l){var p=this.editor.renderer.$gutterLayer,v=p.$annotations[l],k;v?k={text:Array.from(v.text),type:Array.from(v.type)}:k={text:[],type:[]};var D=p.session.getFoldLine(l);if(D&&p.$showFoldedAnnotations){for(var _={error:[],warning:[],info:[]},M,A=l+1;A<=D.end.row;A++)if(p.$annotations[A])for(var F=0;F<p.$annotations[A].text.length;F++){var N=p.$annotations[A].type[F];if(_[N].push(p.$annotations[A].text[F]),N==="error"){M="error_fold";continue}if(N==="warning"){M="warning_fold";continue}}if(M==="error_fold"||M==="warning_fold"){var O="".concat(o.annotationsToSummaryString(_)," in folded code.");k.text.push(O),k.type.push(M)}}if(k.text.length===0)return this.hide();for(var H={error:[],warning:[],info:[]},R=p.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",A=0;A<k.text.length;A++){var I="<span class='ace_".concat(k.type[A]," ").concat(R,"' aria-label='").concat(o.annotationLabels[k.type[A].replace("_fold","")].singular,"' role=img> </span> ").concat(k.text[A]);H[k.type[A].replace("_fold","")].push(I)}var L=[].concat(H.error,H.warning,H.info).join("<br>");this.setHtml(L),this.$element.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.editor._signal("showGutterTooltip",this)},o.prototype.hideTooltip=function(){this.$element.removeAttribute("aria-live"),this.hide(),this.editor._signal("hideGutterTooltip",this)},o.annotationsToSummaryString=function(l){var p,v,k=[],D=["error","warning","info"];try{for(var _=$(D),M=_.next();!M.done;M=_.next()){var A=M.value;if(l[A].length){var F=l[A].length===1?o.annotationLabels[A].singular:o.annotationLabels[A].plural;k.push("".concat(l[A].length," ").concat(F))}}}catch(N){p={error:N}}finally{try{M&&!M.done&&(v=_.return)&&v.call(_)}finally{if(p)throw p.error}}return k.join(", ")},o}(d);f.GutterTooltip=n}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(s,f,C){var b=s("../lib/event"),$=s("../lib/useragent"),w=function(){function h(d,i){this.domEvent=d,this.editor=i,this.x=this.clientX=d.clientX,this.y=this.clientY=d.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return h.prototype.stopPropagation=function(){b.stopPropagation(this.domEvent),this.propagationStopped=!0},h.prototype.preventDefault=function(){b.preventDefault(this.domEvent),this.defaultPrevented=!0},h.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},h.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},h.prototype.getGutterRow=function(){var d=this.getDocumentPosition().row,i=this.editor.session.documentToScreenRow(d,0),r=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return i-r},h.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var d=this.editor,i=d.getSelectionRange();if(i.isEmpty())this.$inSelection=!1;else{var r=this.getDocumentPosition();this.$inSelection=i.contains(r.row,r.column)}return this.$inSelection},h.prototype.getButton=function(){return b.getButton(this.domEvent)},h.prototype.getShiftKey=function(){return this.domEvent.shiftKey},h.prototype.getAccelKey=function(){return $.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},h}();f.MouseEvent=w}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(s,f,C){var b=s("../lib/dom"),$=s("../lib/event"),w=s("../lib/useragent"),h=200,d=200,i=5;function r(t){var o=t.editor,l=b.createElement("div");l.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",l.textContent=" ";var p=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];p.forEach(function(V){t[V]=this[V]},this),o.on("mousedown",this.onMouseDown.bind(t));var v=o.container,k,D,_,M,A,F,N=0,O,H,R,I,L;this.onDragStart=function(V){if(this.cancelDrag||!v.draggable){var G=this;return setTimeout(function(){G.startSelect(),G.captureMouse(V)},0),V.preventDefault()}A=o.getSelectionRange();var K=V.dataTransfer;K.effectAllowed=o.getReadOnly()?"copy":"copyMove",o.container.appendChild(l),K.setDragImage&&K.setDragImage(l,0,0),setTimeout(function(){o.container.removeChild(l)}),K.clearData(),K.setData("Text",o.session.getTextRange()),H=!0,this.setState("drag")},this.onDragEnd=function(V){if(v.draggable=!1,H=!1,this.setState(null),!o.getReadOnly()){var G=V.dataTransfer.dropEffect;!O&&G=="move"&&o.session.remove(o.getSelectionRange()),o.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(V){if(!(o.getReadOnly()||!U(V.dataTransfer)))return D=V.clientX,_=V.clientY,k||B(),N++,V.dataTransfer.dropEffect=O=j(V),$.preventDefault(V)},this.onDragOver=function(V){if(!(o.getReadOnly()||!U(V.dataTransfer)))return D=V.clientX,_=V.clientY,k||(B(),N++),W!==null&&(W=null),V.dataTransfer.dropEffect=O=j(V),$.preventDefault(V)},this.onDragLeave=function(V){if(N--,N<=0&&k)return P(),O=null,$.preventDefault(V)},this.onDrop=function(V){if(F){var G=V.dataTransfer;if(H)switch(O){case"move":A.contains(F.row,F.column)?A={start:F,end:F}:A=o.moveText(A,F);break;case"copy":A=o.moveText(A,F,!0);break}else{var K=G.getData("Text");A={start:F,end:o.session.insert(F,K)},o.focus(),O=null}return P(),$.preventDefault(V)}},$.addListener(v,"dragstart",this.onDragStart.bind(t),o),$.addListener(v,"dragend",this.onDragEnd.bind(t),o),$.addListener(v,"dragenter",this.onDragEnter.bind(t),o),$.addListener(v,"dragover",this.onDragOver.bind(t),o),$.addListener(v,"dragleave",this.onDragLeave.bind(t),o),$.addListener(v,"drop",this.onDrop.bind(t),o);function S(V,G){var K=Date.now(),Y=!G||V.row!=G.row,Q=!G||V.column!=G.column;if(!I||Y||Q)o.moveCursorToPosition(V),I=K,L={x:D,y:_};else{var Z=n(L.x,L.y,D,_);Z>i?I=null:K-I>=d&&(o.renderer.scrollCursorIntoView(),I=null)}}function E(V,G){var K=Date.now(),Y=o.renderer.layerConfig.lineHeight,Q=o.renderer.layerConfig.characterWidth,Z=o.renderer.scroller.getBoundingClientRect(),J={x:{left:D-Z.left,right:Z.right-D},y:{top:_-Z.top,bottom:Z.bottom-_}},q=Math.min(J.x.left,J.x.right),ne=Math.min(J.y.top,J.y.bottom),se={row:V.row,column:V.column};q/Q<=2&&(se.column+=J.x.left<J.x.right?-3:2),ne/Y<=1&&(se.row+=J.y.top<J.y.bottom?-1:1);var fe=V.row!=se.row,de=V.column!=se.column,ae=!G||V.row!=G.row;fe||de&&!ae?R?K-R>=h&&o.renderer.scrollCursorIntoView(se):R=K:R=null}function T(){var V=F;F=o.renderer.screenToTextCoordinates(D,_),S(F,V),E(F,V)}function B(){A=o.selection.toOrientedRange(),k=o.session.addMarker(A,"ace_selection",o.getSelectionStyle()),o.clearSelection(),o.isFocused()&&o.renderer.$cursorLayer.setBlinking(!1),clearInterval(M),T(),M=setInterval(T,20),N=0,$.addListener(document,"mousemove",z)}function P(){clearInterval(M),o.session.removeMarker(k),k=null,o.selection.fromOrientedRange(A),o.isFocused()&&!H&&o.$resetCursorStyle(),A=null,F=null,N=0,R=null,I=null,$.removeListener(document,"mousemove",z)}var W=null;function z(){W==null&&(W=setTimeout(function(){W!=null&&k&&P()},20))}function U(V){var G=V.types;return!G||Array.prototype.some.call(G,function(K){return K=="text/plain"||K=="Text"})}function j(V){var G=["copy","copymove","all","uninitialized"],K=["move","copymove","linkmove","all","uninitialized"],Y=w.isMac?V.altKey:V.ctrlKey,Q="uninitialized";try{Q=V.dataTransfer.effectAllowed.toLowerCase()}catch{}var Z="none";return Y&&G.indexOf(Q)>=0?Z="copy":K.indexOf(Q)>=0?Z="move":G.indexOf(Q)>=0&&(Z="copy"),Z}}(function(){this.dragWait=function(){var t=Date.now()-this.mousedownEvent.time;t>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var t=this.editor.container;t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(t){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var t=this.editor,o=t.container;o.draggable=!0,t.renderer.$cursorLayer.setBlinking(!1),t.setStyle("ace_dragging");var l=w.isWin?"default":"move";t.renderer.setCursorStyle(l),this.setState("dragReady")},this.onMouseDrag=function(t){var o=this.editor.container;if(w.isIE&&this.state=="dragReady"){var l=n(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);l>3&&o.dragDrop()}if(this.state==="dragWait"){var l=n(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);l>0&&(o.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(t){if(this.$dragEnabled){this.mousedownEvent=t;var o=this.editor,l=t.inSelection(),p=t.getButton(),v=t.domEvent.detail||1;if(v===1&&p===0&&l){if(t.editor.inMultiSelectMode&&(t.getAccelKey()||t.getShiftKey()))return;this.mousedownEvent.time=Date.now();var k=t.domEvent.target||t.domEvent.srcElement;if("unselectable"in k&&(k.unselectable="on"),o.getDragDelay()){if(w.isWebKit){this.cancelDrag=!0;var D=o.container;D.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(t,this.onMouseDrag.bind(this)),t.defaultPrevented=!0}}}}).call(r.prototype);function n(t,o,l,p){return Math.sqrt(Math.pow(l-t,2)+Math.pow(p-o,2))}f.DragdropHandler=r}),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(s,f,C){var b=s("./mouse_event").MouseEvent,$=s("../lib/event"),w=s("../lib/dom");f.addTouchListeners=function(h,d){var i="scroll",r,n,t,o,l,p,v=0,k,D=0,_=0,M=0,A,F;function N(){var S=window.navigator&&window.navigator.clipboard,E=!1,T=function(){var P=d.getCopyText(),W=d.session.getUndoManager().hasUndo();F.replaceChild(w.buildDom(E?["span",!P&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],P&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],P&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],S&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],W&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),F.firstChild)},B=function(P){var W=P.target.getAttribute("action");if(W=="more"||!E)return E=!E,T();W=="paste"?S.readText().then(function(z){d.execCommand(W,z)}):W&&((W=="cut"||W=="copy")&&(S?S.writeText(d.getCopyText()):document.execCommand("copy")),d.execCommand(W)),F.firstChild.style.display="none",E=!1,W!="openCommandPalette"&&d.focus()};F=w.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(P){i="menu",P.stopPropagation(),P.preventDefault(),d.textInput.focus()},ontouchend:function(P){P.stopPropagation(),P.preventDefault(),B(P)},onclick:B},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],d.container)}function O(){F||N();var S=d.selection.cursor,E=d.renderer.textToScreenCoordinates(S.row,S.column),T=d.renderer.textToScreenCoordinates(0,0).pageX,B=d.renderer.scrollLeft,P=d.container.getBoundingClientRect();F.style.top=E.pageY-P.top-3+"px",E.pageX-P.left<P.width-70?(F.style.left="",F.style.right="10px"):(F.style.right="",F.style.left=T+B-P.left+"px"),F.style.display="",F.firstChild.style.display="none",d.on("input",H)}function H(S){F&&(F.style.display="none"),d.off("input",H)}function R(){l=null,clearTimeout(l);var S=d.selection.getRange(),E=S.contains(k.row,k.column);(S.isEmpty()||!E)&&(d.selection.moveToPosition(k),d.selection.selectWord()),i="wait",O()}function I(){l=null,clearTimeout(l),d.selection.moveToPosition(k);var S=D>=2?d.selection.getLineRange(k.row):d.session.getBracketRange(k);S&&!S.isEmpty()?d.selection.setRange(S):d.selection.selectWord(),i="wait"}$.addListener(h,"contextmenu",function(S){if(A){var E=d.textInput.getElement();E.focus()}},d),$.addListener(h,"touchstart",function(S){var E=S.touches;if(l||E.length>1){clearTimeout(l),l=null,t=-1,i="zoom";return}A=d.$mouseHandler.isMousePressed=!0;var T=d.renderer.layerConfig.lineHeight,B=d.renderer.layerConfig.lineHeight,P=S.timeStamp;o=P;var W=E[0],z=W.clientX,U=W.clientY;Math.abs(r-z)+Math.abs(n-U)>T&&(t=-1),r=S.clientX=z,n=S.clientY=U,_=M=0;var j=new b(S,d);if(k=j.getDocumentPosition(),P-t<500&&E.length==1&&!v)D++,S.preventDefault(),S.button=0,I();else{D=0;var V=d.selection.cursor,G=d.selection.isEmpty()?V:d.selection.anchor,K=d.renderer.$cursorLayer.getPixelPosition(V,!0),Y=d.renderer.$cursorLayer.getPixelPosition(G,!0),Q=d.renderer.scroller.getBoundingClientRect(),Z=d.renderer.layerConfig.offset,J=d.renderer.scrollLeft,q=function(fe,de){return fe=fe/B,de=de/T-.75,fe*fe+de*de};if(S.clientX<Q.left){i="zoom";return}var ne=q(S.clientX-Q.left-K.left+J,S.clientY-Q.top-K.top+Z),se=q(S.clientX-Q.left-Y.left+J,S.clientY-Q.top-Y.top+Z);ne<3.5&&se<3.5&&(i=ne>se?"cursor":"anchor"),se<3.5?i="anchor":ne<3.5?i="cursor":i="scroll",l=setTimeout(R,450)}t=P},d),$.addListener(h,"touchend",function(S){A=d.$mouseHandler.isMousePressed=!1,p&&clearInterval(p),i=="zoom"?(i="",v=0):l?(d.selection.moveToPosition(k),v=0,O()):i=="scroll"?(L(),H()):O(),clearTimeout(l),l=null},d),$.addListener(h,"touchmove",function(S){l&&(clearTimeout(l),l=null);var E=S.touches;if(!(E.length>1||i=="zoom")){var T=E[0],B=r-T.clientX,P=n-T.clientY;if(i=="wait")if(B*B+P*P>4)i="cursor";else return S.preventDefault();r=T.clientX,n=T.clientY,S.clientX=T.clientX,S.clientY=T.clientY;var W=S.timeStamp,z=W-o;if(o=W,i=="scroll"){var U=new b(S,d);U.speed=1,U.wheelX=B,U.wheelY=P,10*Math.abs(B)<Math.abs(P)&&(B=0),10*Math.abs(P)<Math.abs(B)&&(P=0),z!=0&&(_=B/z,M=P/z),d._emit("mousewheel",U),U.propagationStopped||(_=M=0)}else{var j=new b(S,d),V=j.getDocumentPosition();i=="cursor"?d.selection.moveCursorToPosition(V):i=="anchor"&&d.selection.setSelectionAnchor(V.row,V.column),d.renderer.scrollCursorIntoView(V),S.preventDefault()}}},d);function L(){v+=60,p=setInterval(function(){v--<=0&&(clearInterval(p),p=null),Math.abs(_)<.01&&(_=0),Math.abs(M)<.01&&(M=0),v<20&&(_=.9*_),v<20&&(M=.9*M);var S=d.session.getScrollTop();d.renderer.scrollBy(10*_,10*M),S==d.session.getScrollTop()&&(v=0)},10)}}}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(s,f,C){var b=s("../lib/event"),$=s("../lib/useragent"),w=s("./default_handlers").DefaultHandlers,h=s("./default_gutter_handler").GutterHandler,d=s("./mouse_event").MouseEvent,i=s("./dragdrop_handler").DragdropHandler,r=s("./touch_handler").addTouchListeners,n=s("../config"),t=function(){function o(l){var p=this;this.editor=l,new w(this),new h(this),new i(this);var v=function(_){var M=!document.hasFocus||!document.hasFocus()||!l.isFocused()&&document.activeElement==(l.textInput&&l.textInput.getElement());M&&window.focus(),l.focus(),setTimeout(function(){l.isFocused()||l.focus()})},k=l.renderer.getMouseEventTarget();b.addListener(k,"click",this.onMouseEvent.bind(this,"click"),l),b.addListener(k,"mousemove",this.onMouseMove.bind(this,"mousemove"),l),b.addMultiMouseDownListener([k,l.renderer.scrollBarV&&l.renderer.scrollBarV.inner,l.renderer.scrollBarH&&l.renderer.scrollBarH.inner,l.textInput&&l.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",l),b.addMouseWheelListener(l.container,this.onMouseWheel.bind(this,"mousewheel"),l),r(l.container,l);var D=l.renderer.$gutter;b.addListener(D,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),l),b.addListener(D,"click",this.onMouseEvent.bind(this,"gutterclick"),l),b.addListener(D,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),l),b.addListener(D,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),l),b.addListener(k,"mousedown",v,l),b.addListener(D,"mousedown",v,l),$.isIE&&l.renderer.scrollBarV&&(b.addListener(l.renderer.scrollBarV.element,"mousedown",v,l),b.addListener(l.renderer.scrollBarH.element,"mousedown",v,l)),l.on("mousemove",function(_){if(!(p.state||p.$dragDelay||!p.$dragEnabled)){var M=l.renderer.screenToTextCoordinates(_.x,_.y),A=l.session.selection.getRange(),F=l.renderer;!A.isEmpty()&&A.insideStart(M.row,M.column)?F.setCursorStyle("default"):F.setCursorStyle("")}},l)}return o.prototype.onMouseEvent=function(l,p){this.editor.session&&this.editor._emit(l,new d(p,this.editor))},o.prototype.onMouseMove=function(l,p){var v=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!v||!v.length||this.editor._emit(l,new d(p,this.editor))},o.prototype.onMouseWheel=function(l,p){var v=new d(p,this.editor);v.speed=this.$scrollSpeed*2,v.wheelX=p.wheelX,v.wheelY=p.wheelY,this.editor._emit(l,v)},o.prototype.setState=function(l){this.state=l},o.prototype.captureMouse=function(l,p){this.x=l.x,this.y=l.y,this.isMousePressed=!0;var v=this.editor,k=this.editor.renderer;k.$isMousePressed=!0;var D=this,_=function(O){if(O){if($.isWebKit&&!O.which&&D.releaseMouse)return D.releaseMouse();D.x=O.clientX,D.y=O.clientY,p&&p(O),D.mouseEvent=new d(O,D.editor),D.$mouseMoved=!0}},M=function(O){v.off("beforeEndOperation",F),clearInterval(N),v.session&&A(),D[D.state+"End"]&&D[D.state+"End"](O),D.state="",D.isMousePressed=k.$isMousePressed=!1,k.$keepTextAreaAtCursor&&k.$moveTextAreaToCursor(),D.$onCaptureMouseMove=D.releaseMouse=null,O&&D.onMouseEvent("mouseup",O),v.endOperation()},A=function(){D[D.state]&&D[D.state](),D.$mouseMoved=!1};if($.isOldIE&&l.domEvent.type=="dblclick")return setTimeout(function(){M(l)});var F=function(O){D.releaseMouse&&v.curOp.command.name&&v.curOp.selectionChanged&&(D[D.state+"End"]&&D[D.state+"End"](),D.state="",D.releaseMouse())};v.on("beforeEndOperation",F),v.startOperation({command:{name:"mouse"}}),D.$onCaptureMouseMove=_,D.releaseMouse=b.capture(this.editor.container,_,M);var N=setInterval(A,20)},o.prototype.cancelContextMenu=function(){var l=(function(p){p&&p.domEvent&&p.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",l),p&&p.domEvent&&b.stopEvent(p.domEvent))}).bind(this);setTimeout(l,10),this.editor.on("nativecontextmenu",l)},o.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},o}();t.prototype.releaseMouse=null,n.defineOptions(t.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:$.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),f.MouseHandler=t}),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(s,f,C){var b=s("../lib/dom"),$=function(){function w(h){h.on("click",function(d){var i=d.getDocumentPosition(),r=h.session,n=r.getFoldAt(i.row,i.column,1);n&&(d.getAccelKey()?r.removeFold(n):r.expandFold(n),d.stop());var t=d.domEvent&&d.domEvent.target;t&&b.hasCssClass(t,"ace_inline_button")&&b.hasCssClass(t,"ace_toggle_wrap")&&(r.setOption("wrap",!r.getUseWrapMode()),h.renderer.scrollCursorIntoView())}),h.on("gutterclick",function(d){var i=h.renderer.$gutterLayer.getRegion(d);if(i=="foldWidgets"){var r=d.getDocumentPosition().row,n=h.session;n.foldWidgets&&n.foldWidgets[r]&&h.session.onFoldWidgetClick(r,d),h.isFocused()||h.focus(),d.stop()}}),h.on("gutterdblclick",function(d){var i=h.renderer.$gutterLayer.getRegion(d);if(i=="foldWidgets"){var r=d.getDocumentPosition().row,n=h.session,t=n.getParentFoldRangeData(r,!0),o=t.range||t.firstRange;if(o){r=o.start.row;var l=n.getFoldAt(r,n.getLine(r).length,1);l?n.removeFold(l):(n.addFold("...",o),h.renderer.scrollCursorIntoView({row:o.start.row,column:0}))}d.stop()}})}return w}();f.FoldHandler=$}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(s,f,C){var b=s("../lib/keys"),$=s("../lib/event"),w=function(){function h(d){this.$editor=d,this.$data={editor:d},this.$handlers=[],this.setDefaultHandler(d.commands)}return h.prototype.setDefaultHandler=function(d){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=d,this.addKeyboardHandler(d,0)},h.prototype.setKeyboardHandler=function(d){var i=this.$handlers;if(i[i.length-1]!=d){for(;i[i.length-1]&&i[i.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(i[i.length-1]);this.addKeyboardHandler(d,1)}},h.prototype.addKeyboardHandler=function(d,i){if(d){typeof d=="function"&&!d.handleKeyboard&&(d.handleKeyboard=d);var r=this.$handlers.indexOf(d);r!=-1&&this.$handlers.splice(r,1),i==null?this.$handlers.push(d):this.$handlers.splice(i,0,d),r==-1&&d.attach&&d.attach(this.$editor)}},h.prototype.removeKeyboardHandler=function(d){var i=this.$handlers.indexOf(d);return i==-1?!1:(this.$handlers.splice(i,1),d.detach&&d.detach(this.$editor),!0)},h.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},h.prototype.getStatusText=function(){var d=this.$data,i=d.editor;return this.$handlers.map(function(r){return r.getStatusText&&r.getStatusText(i,d)||""}).filter(Boolean).join(" ")},h.prototype.$callKeyboardHandlers=function(d,i,r,n){for(var t,o=!1,l=this.$editor.commands,p=this.$handlers.length;p--&&(t=this.$handlers[p].handleKeyboard(this.$data,d,i,r,n),!(!(!t||!t.command)&&(t.command=="null"?o=!0:o=l.exec(t.command,this.$editor,t.args,n),o&&n&&d!=-1&&t.passEvent!=!0&&t.command.passEvent!=!0&&$.stopEvent(n),o))););return!o&&d==-1&&(t={command:"insertstring"},o=l.exec("insertstring",this.$editor,i)),o&&this.$editor._signal&&this.$editor._signal("keyboardActivity",t),o},h.prototype.onCommandKey=function(d,i,r){var n=b.keyCodeToString(r);return this.$callKeyboardHandlers(i,n,r,d)},h.prototype.onTextInput=function(d){return this.$callKeyboardHandlers(-1,d)},h}();f.KeyBinding=w}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(s,f,C){var b=0,$=0,w=!1,h=!1,d=!1,i=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],r=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],n=0,t=1,o=0,l=1,p=2,v=3,k=4,D=5,_=6,M=7,A=8,F=9,N=10,O=11,H=12,R=13,I=14,L=15,S=16,E=17,T=18,B=[T,T,T,T,T,T,T,T,T,_,D,_,A,D,T,T,T,T,T,T,T,T,T,T,T,T,T,T,D,D,D,_,A,k,k,O,O,O,k,k,k,k,k,N,F,N,F,F,p,p,p,p,p,p,p,p,p,p,F,k,k,k,k,k,k,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,k,k,k,k,k,k,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,k,k,k,k,T,T,T,T,T,T,D,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,F,k,O,O,O,O,k,k,k,k,o,k,k,T,k,k,O,O,p,p,k,o,k,k,k,p,o,k,k,k,k,k],P=[A,A,A,A,A,A,A,A,A,A,A,T,T,T,o,l,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,A,D,R,I,L,S,E,F,O,O,O,O,O,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,F,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,A];function W(V,G,K,Y){var Q=b?r:i,Z=null,J=null,q=null,ne=0,se=null,fe=null,de=-1,ae=null,ge=null,me=[];if(!Y)for(ae=0,Y=[];ae<K;ae++)Y[ae]=j(V[ae]);for($=b,w=!1,h=!1,d=!1,ge=0;ge<K;ge++){if(Z=ne,me[ge]=J=U(V,Y,me,ge),ne=Q[Z][J],se=ne&240,ne&=15,G[ge]=q=Q[ne][5],se>0)if(se==16){for(ae=de;ae<ge;ae++)G[ae]=1;de=-1}else de=-1;if(fe=Q[ne][6],fe)de==-1&&(de=ge);else if(de>-1){for(ae=de;ae<ge;ae++)G[ae]=q;de=-1}Y[ge]==D&&(G[ge]=0),$|=q}if(d){for(ae=0;ae<K;ae++)if(Y[ae]==_){G[ae]=b;for(var ve=ae-1;ve>=0&&Y[ve]==A;ve--)G[ve]=b}}}function z(V,G,K){if(!($<V)){if(V==1&&b==t&&!h){K.reverse();return}for(var Y=K.length,Q=0,Z,J,q,ne;Q<Y;){if(G[Q]>=V){for(Z=Q+1;Z<Y&&G[Z]>=V;)Z++;for(J=Q,q=Z-1;J<q;J++,q--)ne=K[J],K[J]=K[q],K[q]=ne;Q=Z}Q++}}}function U(V,G,K,Y){var Q=G[Y],Z,J,q,ne;switch(Q){case o:case l:w=!1;case k:case v:return Q;case p:return w?v:p;case M:return w=!0,l;case A:return k;case F:return Y<1||Y+1>=G.length||(Z=K[Y-1])!=p&&Z!=v||(J=G[Y+1])!=p&&J!=v?k:(w&&(J=v),J==Z?J:k);case N:return Z=Y>0?K[Y-1]:D,Z==p&&Y+1<G.length&&G[Y+1]==p?p:k;case O:if(Y>0&&K[Y-1]==p)return p;if(w)return k;for(ne=Y+1,q=G.length;ne<q&&G[ne]==O;)ne++;return ne<q&&G[ne]==p?p:k;case H:for(q=G.length,ne=Y+1;ne<q&&G[ne]==H;)ne++;if(ne<q){var se=V[Y],fe=se>=1425&&se<=2303||se==64286;if(Z=G[ne],fe&&(Z==l||Z==M))return l}return Y<1||(Z=G[Y-1])==D?k:K[Y-1];case D:return w=!1,h=!0,b;case _:return d=!0,k;case R:case I:case S:case E:case L:w=!1;case T:return k}}function j(V){var G=V.charCodeAt(0),K=G>>8;return K==0?G>191?o:B[G]:K==5?/[\u0591-\u05f4]/.test(V)?l:o:K==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(V)?H:/[\u0660-\u0669\u066b-\u066c]/.test(V)?v:G==1642?O:/[\u06f0-\u06f9]/.test(V)?p:M:K==32&&G<=8287?P[G&255]:K==254&&G>=65136?M:k}f.L=o,f.R=l,f.EN=p,f.ON_R=3,f.AN=4,f.R_H=5,f.B=6,f.RLE=7,f.DOT="·",f.doBidiReorder=function(V,G,K){if(V.length<2)return{};var Y=V.split(""),Q=new Array(Y.length),Z=new Array(Y.length),J=[];b=K?t:n,W(Y,J,Y.length,G);for(var q=0;q<Q.length;Q[q]=q,q++);z(2,J,Q),z(1,J,Q);for(var q=0;q<Q.length-1;q++)G[q]===v?J[q]=f.AN:J[q]===l&&(G[q]>M&&G[q]<R||G[q]===k||G[q]===T)?J[q]=f.ON_R:q>0&&Y[q-1]==="ل"&&/\u0622|\u0623|\u0625|\u0627/.test(Y[q])&&(J[q-1]=J[q]=f.R_H,q++);Y[Y.length-1]===f.DOT&&(J[Y.length-1]=f.B),Y[0]==="‫"&&(J[0]=f.RLE);for(var q=0;q<Q.length;q++)Z[q]=J[Q[q]];return{logicalFromVisual:Q,bidiLevels:Z}},f.hasBidiCharacters=function(V,G){for(var K=!1,Y=0;Y<V.length;Y++)G[Y]=j(V.charAt(Y)),!K&&(G[Y]==l||G[Y]==M||G[Y]==v)&&(K=!0);return K},f.getVisualFromLogicalIdx=function(V,G){for(var K=0;K<G.logicalFromVisual.length;K++)if(G.logicalFromVisual[K]==V)return K;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(s,f,C){var b=s("./lib/bidiutil"),$=s("./lib/lang"),w=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,h=function(){function d(i){this.session=i,this.bidiMap={},this.currentRow=null,this.bidiUtil=b,this.charWidths=[],this.EOL="¬",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="¶",this.RLE="‫",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=w.test(i.getValue())}return d.prototype.isBidiRow=function(i,r,n){return this.seenBidi?(i!==this.currentRow&&(this.currentRow=i,this.updateRowLine(r,n),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},d.prototype.onChange=function(i){this.seenBidi?this.currentRow=null:i.action=="insert"&&w.test(i.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},d.prototype.getDocumentRow=function(){var i=0,r=this.session.$screenRowCache;if(r.length){var n=this.session.$getRowCacheIndex(r,this.currentRow);n>=0&&(i=this.session.$docRowCache[n])}return i},d.prototype.getSplitIndex=function(){var i=0,r=this.session.$screenRowCache;if(r.length)for(var n,t=this.session.$getRowCacheIndex(r,this.currentRow);this.currentRow-i>0&&(n=this.session.$getRowCacheIndex(r,this.currentRow-i-1),n===t);)t=n,i++;else i=this.currentRow;return i},d.prototype.updateRowLine=function(i,r){i===void 0&&(i=this.getDocumentRow());var n=i===this.session.getLength()-1,t=n?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(i),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var o=this.session.$wrapData[i];o&&(r===void 0&&(r=this.getSplitIndex()),r>0&&o.length?(this.wrapIndent=o.indent,this.wrapOffset=this.wrapIndent*this.charWidths[b.L],this.line=r<o.length?this.line.substring(o[r-1],o[r]):this.line.substring(o[o.length-1])):this.line=this.line.substring(0,o[r]),r==o.length&&(this.line+=this.showInvisibles?t:b.DOT))}else this.line+=this.showInvisibles?t:b.DOT;var l=this.session,p=0,v;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(k,D){return k==="	"||l.isFullWidth(k.charCodeAt(0))?(v=k==="	"?l.getScreenTabSize(D+p):2,p+=v-1,$.stringRepeat(b.DOT,v)):k}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==b.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},d.prototype.updateBidiMap=function(){var i=[];b.hasBidiCharacters(this.line,i)||this.isRtlDir?this.bidiMap=b.doBidiReorder(this.line,i,this.isRtlDir):this.bidiMap={}},d.prototype.markAsDirty=function(){this.currentRow=null},d.prototype.updateCharacterWidths=function(i){if(this.characterWidth!==i.$characterSize.width){this.fontMetrics=i;var r=this.characterWidth=i.$characterSize.width,n=i.$measureCharWidth("ה");this.charWidths[b.L]=this.charWidths[b.EN]=this.charWidths[b.ON_R]=r,this.charWidths[b.R]=this.charWidths[b.AN]=n,this.charWidths[b.R_H]=n*.45,this.charWidths[b.B]=this.charWidths[b.RLE]=0,this.currentRow=null}},d.prototype.setShowInvisibles=function(i){this.showInvisibles=i,this.currentRow=null},d.prototype.setEolChar=function(i){this.EOL=i},d.prototype.setContentWidth=function(i){this.contentWidth=i},d.prototype.isRtlLine=function(i){return this.$isRtl?!0:i!=null?this.session.getLine(i).charAt(0)==this.RLE:this.isRtlDir},d.prototype.setRtlDirection=function(i,r){for(var n=i.getCursorPosition(),t=i.selection.getSelectionAnchor().row;t<=n.row;t++)!r&&i.session.getLine(t).charAt(0)===i.session.$bidiHandler.RLE?i.session.doc.removeInLine(t,0,1):r&&i.session.getLine(t).charAt(0)!==i.session.$bidiHandler.RLE&&i.session.doc.insert({column:0,row:t},i.session.$bidiHandler.RLE)},d.prototype.getPosLeft=function(i){i-=this.wrapIndent;var r=this.line.charAt(0)===this.RLE?1:0,n=i>r?this.session.getOverwrite()?i:i-1:r,t=b.getVisualFromLogicalIdx(n,this.bidiMap),o=this.bidiMap.bidiLevels,l=0;!this.session.getOverwrite()&&i<=r&&o[t]%2!==0&&t++;for(var p=0;p<t;p++)l+=this.charWidths[o[p]];return!this.session.getOverwrite()&&i>r&&o[t]%2===0&&(l+=this.charWidths[o[t]]),this.wrapIndent&&(l+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(l+=this.rtlLineOffset),l},d.prototype.getSelections=function(i,r){var n=this.bidiMap,t=n.bidiLevels,o,l=[],p=0,v=Math.min(i,r)-this.wrapIndent,k=Math.max(i,r)-this.wrapIndent,D=!1,_=!1,M=0;this.wrapIndent&&(p+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var A,F=0;F<t.length;F++)A=n.logicalFromVisual[F],o=t[F],D=A>=v&&A<k,D&&!_?M=p:!D&&_&&l.push({left:M,width:p-M}),p+=this.charWidths[o],_=D;if(D&&F===t.length&&l.push({left:M,width:p-M}),this.isRtlDir)for(var N=0;N<l.length;N++)l[N].left+=this.rtlLineOffset;return l},d.prototype.offsetToCol=function(n){this.isRtlDir&&(n-=this.rtlLineOffset);var r=0,n=Math.max(n,0),t=0,o=0,l=this.bidiMap.bidiLevels,p=this.charWidths[l[o]];for(this.wrapIndent&&(n-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);n>t+p/2;){if(t+=p,o===l.length-1){p=0;break}p=this.charWidths[l[++o]]}return o>0&&l[o-1]%2!==0&&l[o]%2===0?(n<t&&o--,r=this.bidiMap.logicalFromVisual[o]):o>0&&l[o-1]%2===0&&l[o]%2!==0?r=1+(n>t?this.bidiMap.logicalFromVisual[o]:this.bidiMap.logicalFromVisual[o-1]):this.isRtlDir&&o===l.length-1&&p===0&&l[o-1]%2===0||!this.isRtlDir&&o===0&&l[o]%2!==0?r=1+this.bidiMap.logicalFromVisual[o]:(o>0&&l[o-1]%2!==0&&p!==0&&o--,r=this.bidiMap.logicalFromVisual[o]),r===0&&this.isRtlDir&&r++,r+this.wrapIndent},d}();f.BidiHandler=h}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(s,f,C){var b=s("./lib/oop"),$=s("./lib/lang"),w=s("./lib/event_emitter").EventEmitter,h=s("./range").Range,d=function(){function i(r){this.session=r,this.doc=r.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var n=this;this.cursor.on("change",function(t){n.$cursorChanged=!0,n.$silent||n._emit("changeCursor"),!n.$isEmpty&&!n.$silent&&n._emit("changeSelection"),!n.$keepDesiredColumnOnChange&&t.old.column!=t.value.column&&(n.$desiredColumn=null)}),this.anchor.on("change",function(){n.$anchorChanged=!0,!n.$isEmpty&&!n.$silent&&n._emit("changeSelection")})}return i.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},i.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},i.prototype.getCursor=function(){return this.lead.getPosition()},i.prototype.setAnchor=function(r,n){this.$isEmpty=!1,this.anchor.setPosition(r,n)},i.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},i.prototype.getSelectionLead=function(){return this.lead.getPosition()},i.prototype.isBackwards=function(){var r=this.anchor,n=this.lead;return r.row>n.row||r.row==n.row&&r.column>n.column},i.prototype.getRange=function(){var r=this.anchor,n=this.lead;return this.$isEmpty?h.fromPoints(n,n):this.isBackwards()?h.fromPoints(n,r):h.fromPoints(r,n)},i.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},i.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},i.prototype.setRange=function(r,n){var t=n?r.end:r.start,o=n?r.start:r.end;this.$setSelection(t.row,t.column,o.row,o.column)},i.prototype.$setSelection=function(r,n,t,o){if(!this.$silent){var l=this.$isEmpty,p=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(r,n),this.cursor.setPosition(t,o),this.$isEmpty=!h.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||l!=this.$isEmpty||p)&&this._emit("changeSelection")}},i.prototype.$moveSelection=function(r){var n=this.lead;this.$isEmpty&&this.setSelectionAnchor(n.row,n.column),r.call(this)},i.prototype.selectTo=function(r,n){this.$moveSelection(function(){this.moveCursorTo(r,n)})},i.prototype.selectToPosition=function(r){this.$moveSelection(function(){this.moveCursorToPosition(r)})},i.prototype.moveTo=function(r,n){this.clearSelection(),this.moveCursorTo(r,n)},i.prototype.moveToPosition=function(r){this.clearSelection(),this.moveCursorToPosition(r)},i.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},i.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},i.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},i.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},i.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},i.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},i.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},i.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},i.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},i.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},i.prototype.getWordRange=function(r,n){if(typeof n>"u"){var t=r||this.lead;r=t.row,n=t.column}return this.session.getWordRange(r,n)},i.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},i.prototype.selectAWord=function(){var r=this.getCursor(),n=this.session.getAWordRange(r.row,r.column);this.setSelectionRange(n)},i.prototype.getLineRange=function(r,n){var t=typeof r=="number"?r:this.lead.row,o,l=this.session.getFoldLine(t);return l?(t=l.start.row,o=l.end.row):o=t,n===!0?new h(t,0,o,this.session.getLine(o).length):new h(t,0,o+1,0)},i.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},i.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},i.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},i.prototype.wouldMoveIntoSoftTab=function(r,n,t){var o=r.column,l=r.column+n;return t<0&&(o=r.column-n,l=r.column),this.session.isTabStop(r)&&this.doc.getLine(r.row).slice(o,l).split(" ").length-1==n},i.prototype.moveCursorLeft=function(){var r=this.lead.getPosition(),n;if(n=this.session.getFoldAt(r.row,r.column,-1))this.moveCursorTo(n.start.row,n.start.column);else if(r.column===0)r.row>0&&this.moveCursorTo(r.row-1,this.doc.getLine(r.row-1).length);else{var t=this.session.getTabSize();this.wouldMoveIntoSoftTab(r,t,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-t):this.moveCursorBy(0,-1)}},i.prototype.moveCursorRight=function(){var r=this.lead.getPosition(),n;if(n=this.session.getFoldAt(r.row,r.column,1))this.moveCursorTo(n.end.row,n.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var t=this.session.getTabSize(),r=this.lead;this.wouldMoveIntoSoftTab(r,t,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,t):this.moveCursorBy(0,1)}},i.prototype.moveCursorLineStart=function(){var r=this.lead.row,n=this.lead.column,t=this.session.documentToScreenRow(r,n),o=this.session.screenToDocumentPosition(t,0),l=this.session.getDisplayLine(r,null,o.row,o.column),p=l.match(/^\s*/);p[0].length!=n&&!this.session.$useEmacsStyleLineStart&&(o.column+=p[0].length),this.moveCursorToPosition(o)},i.prototype.moveCursorLineEnd=function(){var r=this.lead,n=this.session.getDocumentLastRowColumnPosition(r.row,r.column);if(this.lead.column==n.column){var t=this.session.getLine(n.row);if(n.column==t.length){var o=t.search(/\s+$/);o>0&&(n.column=o)}}this.moveCursorTo(n.row,n.column)},i.prototype.moveCursorFileEnd=function(){var r=this.doc.getLength()-1,n=this.doc.getLine(r).length;this.moveCursorTo(r,n)},i.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},i.prototype.moveCursorLongWordRight=function(){var r=this.lead.row,n=this.lead.column,t=this.doc.getLine(r),o=t.substring(n);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var l=this.session.getFoldAt(r,n,1);if(l){this.moveCursorTo(l.end.row,l.end.column);return}if(this.session.nonTokenRe.exec(o)&&(n+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,o=t.substring(n)),n>=t.length){this.moveCursorTo(r,t.length),this.moveCursorRight(),r<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(o)&&(n+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(r,n)},i.prototype.moveCursorLongWordLeft=function(){var r=this.lead.row,n=this.lead.column,t;if(t=this.session.getFoldAt(r,n,-1)){this.moveCursorTo(t.start.row,t.start.column);return}var o=this.session.getFoldStringAt(r,n,-1);o==null&&(o=this.doc.getLine(r).substring(0,n));var l=$.stringReverse(o);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(l)&&(n-=this.session.nonTokenRe.lastIndex,l=l.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),n<=0){this.moveCursorTo(r,0),this.moveCursorLeft(),r>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(l)&&(n-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(r,n)},i.prototype.$shortWordEndIndex=function(r){var n=0,t,o=/\s/,l=this.session.tokenRe;if(l.lastIndex=0,this.session.tokenRe.exec(r))n=this.session.tokenRe.lastIndex;else{for(;(t=r[n])&&o.test(t);)n++;if(n<1){for(l.lastIndex=0;(t=r[n])&&!l.test(t);)if(l.lastIndex=0,n++,o.test(t))if(n>2){n--;break}else{for(;(t=r[n])&&o.test(t);)n++;if(n>2)break}}}return l.lastIndex=0,n},i.prototype.moveCursorShortWordRight=function(){var r=this.lead.row,n=this.lead.column,t=this.doc.getLine(r),o=t.substring(n),l=this.session.getFoldAt(r,n,1);if(l)return this.moveCursorTo(l.end.row,l.end.column);if(n==t.length){var p=this.doc.getLength();do r++,o=this.doc.getLine(r);while(r<p&&/^\s*$/.test(o));/^\s+/.test(o)||(o=""),n=0}var v=this.$shortWordEndIndex(o);this.moveCursorTo(r,n+v)},i.prototype.moveCursorShortWordLeft=function(){var r=this.lead.row,n=this.lead.column,t;if(t=this.session.getFoldAt(r,n,-1))return this.moveCursorTo(t.start.row,t.start.column);var o=this.session.getLine(r).substring(0,n);if(n===0){do r--,o=this.doc.getLine(r);while(r>0&&/^\s*$/.test(o));n=o.length,/\s+$/.test(o)||(o="")}var l=$.stringReverse(o),p=this.$shortWordEndIndex(l);return this.moveCursorTo(r,n-p)},i.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},i.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},i.prototype.moveCursorBy=function(r,n){var t=this.session.documentToScreenPosition(this.lead.row,this.lead.column),o;if(n===0&&(r!==0&&(this.session.$bidiHandler.isBidiRow(t.row,this.lead.row)?(o=this.session.$bidiHandler.getPosLeft(t.column),t.column=Math.round(o/this.session.$bidiHandler.charWidths[0])):o=t.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?t.column=this.$desiredColumn:this.$desiredColumn=t.column),r!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var l=this.session.lineWidgets[this.lead.row];r<0?r-=l.rowsAbove||0:r>0&&(r+=l.rowCount-(l.rowsAbove||0))}var p=this.session.screenToDocumentPosition(t.row+r,t.column,o);r!==0&&n===0&&p.row===this.lead.row&&(p.column,this.lead.column),this.moveCursorTo(p.row,p.column+n,n===0)},i.prototype.moveCursorToPosition=function(r){this.moveCursorTo(r.row,r.column)},i.prototype.moveCursorTo=function(r,n,t){var o=this.session.getFoldAt(r,n,1);o&&(r=o.start.row,n=o.start.column),this.$keepDesiredColumnOnChange=!0;var l=this.session.getLine(r);/[\uDC00-\uDFFF]/.test(l.charAt(n))&&l.charAt(n-1)&&(this.lead.row==r&&this.lead.column==n+1?n=n-1:n=n+1),this.lead.setPosition(r,n),this.$keepDesiredColumnOnChange=!1,t||(this.$desiredColumn=null)},i.prototype.moveCursorToScreen=function(r,n,t){var o=this.session.screenToDocumentPosition(r,n);this.moveCursorTo(o.row,o.column,t)},i.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},i.prototype.fromOrientedRange=function(r){this.setSelectionRange(r,r.cursor==r.start),this.$desiredColumn=r.desiredColumn||this.$desiredColumn},i.prototype.toOrientedRange=function(r){var n=this.getRange();return r?(r.start.column=n.start.column,r.start.row=n.start.row,r.end.column=n.end.column,r.end.row=n.end.row):r=n,r.cursor=this.isBackwards()?r.start:r.end,r.desiredColumn=this.$desiredColumn,r},i.prototype.getRangeOfMovements=function(r){var n=this.getCursor();try{r(this);var t=this.getCursor();return h.fromPoints(n,t)}catch{return h.fromPoints(n,n)}finally{this.moveCursorToPosition(n)}},i.prototype.toJSON=function(){if(this.rangeCount)var r=this.ranges.map(function(n){var t=n.clone();return t.isBackwards=n.cursor==n.start,t});else{var r=this.getRange();r.isBackwards=this.isBackwards()}return r},i.prototype.fromJSON=function(r){if(r.start==null)if(this.rangeList&&r.length>1){this.toSingleRange(r[0]);for(var n=r.length;n--;){var t=h.fromPoints(r[n].start,r[n].end);r[n].isBackwards&&(t.cursor=t.start),this.addRange(t,!0)}return}else r=r[0];this.rangeList&&this.toSingleRange(r),this.setSelectionRange(r,r.isBackwards)},i.prototype.isEqual=function(r){if((r.length||this.rangeCount)&&r.length!=this.rangeCount)return!1;if(!r.length||!this.ranges)return this.getRange().isEqual(r);for(var n=this.ranges.length;n--;)if(!this.ranges[n].isEqual(r[n]))return!1;return!0},i}();d.prototype.setSelectionAnchor=d.prototype.setAnchor,d.prototype.getSelectionAnchor=d.prototype.getAnchor,d.prototype.setSelectionRange=d.prototype.setRange,b.implement(d.prototype,w),f.Selection=d}),ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(s,f,C){var b=s("./lib/report_error").reportError,$=2e3,w=function(){function h(d){this.states=d,this.regExps={},this.matchMappings={};for(var i in this.states){for(var r=this.states[i],n=[],t=0,o=this.matchMappings[i]={defaultToken:"text"},l="g",p=[],v=0;v<r.length;v++){var k=r[v];if(k.defaultToken&&(o.defaultToken=k.defaultToken),k.caseInsensitive&&l.indexOf("i")===-1&&(l+="i"),k.unicode&&l.indexOf("u")===-1&&(l+="u"),k.regex!=null){k.regex instanceof RegExp&&(k.regex=k.regex.toString().slice(1,-1));var D=k.regex,_=new RegExp("(?:("+D+")|(.))").exec("a").length-2;Array.isArray(k.token)?k.token.length==1||_==1?k.token=k.token[0]:_-1!=k.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:k,groupCount:_-1}),k.token=k.token[0]):(k.tokenArray=k.token,k.token=null,k.onMatch=this.$arrayTokens):typeof k.token=="function"&&!k.onMatch&&(_>1?k.onMatch=this.$applyToken:k.onMatch=k.token),_>1&&(/\\\d/.test(k.regex)?D=k.regex.replace(/\\([0-9]+)/g,function(M,A){return"\\"+(parseInt(A,10)+t+1)}):(_=1,D=this.removeCapturingGroups(k.regex)),!k.splitRegex&&typeof k.token!="string"&&p.push(k)),o[t]=v,t+=_,n.push(D),k.onMatch||(k.onMatch=null)}}n.length||(o[0]=0,n.push("$")),p.forEach(function(M){M.splitRegex=this.createSplitterRegexp(M.regex,l)},this),this.regExps[i]=new RegExp("("+n.join(")|(")+")|($)",l)}}return h.prototype.$setMaxTokenCount=function(d){$=d|0},h.prototype.$applyToken=function(d){var i=this.splitRegex.exec(d).slice(1),r=this.token.apply(this,i);if(typeof r=="string")return[{type:r,value:d}];for(var n=[],t=0,o=r.length;t<o;t++)i[t]&&(n[n.length]={type:r[t],value:i[t]});return n},h.prototype.$arrayTokens=function(d){if(!d)return[];var i=this.splitRegex.exec(d);if(!i)return"text";for(var r=[],n=this.tokenArray,t=0,o=n.length;t<o;t++)i[t+1]&&(r[r.length]={type:n[t],value:i[t+1]});return r},h.prototype.removeCapturingGroups=function(d){var i=d.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(r,n){return n?"(?:":r});return i},h.prototype.createSplitterRegexp=function(d,i){if(d.indexOf("(?=")!=-1){var r=0,n=!1,t={};d.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(o,l,p,v,k,D){return n?n=k!="]":k?n=!0:v?(r==t.stack&&(t.end=D+1,t.stack=-1),r--):p&&(r++,p.length!=1&&(t.stack=r,t.start=D)),o}),t.end!=null&&/^\)*$/.test(d.substr(t.end))&&(d=d.substring(0,t.start)+d.substr(t.end))}return d.charAt(0)!="^"&&(d="^"+d),d.charAt(d.length-1)!="$"&&(d+="$"),new RegExp(d,(i||"").replace("g",""))},h.prototype.getLineTokens=function(d,i){if(i&&typeof i!="string"){var r=i.slice(0);i=r[0],i==="#tmp"&&(r.shift(),i=r.shift())}else var r=[];var n=i||"start",t=this.states[n];t||(n="start",t=this.states[n]);var o=this.matchMappings[n],l=this.regExps[n];l.lastIndex=0;for(var p,v=[],k=0,D=0,_={type:null,value:""};p=l.exec(d);){var M=o.defaultToken,A=null,F=p[0],N=l.lastIndex;if(N-F.length>k){var O=d.substring(k,N-F.length);_.type==M?_.value+=O:(_.type&&v.push(_),_={type:M,value:O})}for(var H=0;H<p.length-2;H++)if(p[H+1]!==void 0){A=t[o[H]],A.onMatch?M=A.onMatch(F,n,r,d):M=A.token,A.next&&(typeof A.next=="string"?n=A.next:n=A.next(n,r),t=this.states[n],t||(this.reportError("state doesn't exist",n),n="start",t=this.states[n]),o=this.matchMappings[n],k=N,l=this.regExps[n],l.lastIndex=N),A.consumeLineEnd&&(k=N);break}if(F){if(typeof M=="string")(!A||A.merge!==!1)&&_.type===M?_.value+=F:(_.type&&v.push(_),_={type:M,value:F});else if(M){_.type&&v.push(_),_={type:null,value:""};for(var H=0;H<M.length;H++)v.push(M[H])}}if(k==d.length)break;if(k=N,D++>$){for(D>2*d.length&&this.reportError("infinite loop with in ace tokenizer",{startState:i,line:d});k<d.length;)_.type&&v.push(_),_={value:d.substring(k,k+=500),type:"overflow"};n="start",r=[];break}}return _.type&&v.push(_),r.length>1&&r[0]!==n&&r.unshift("#tmp",n),{tokens:v,state:r.length?r:n}},h}();w.prototype.reportError=b,f.Tokenizer=w}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(s,f,C){var b=s("../lib/deep_copy").deepCopy,$=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(d,i){if(!i){for(var r in d)this.$rules[r]=d[r];return}for(var r in d){for(var n=d[r],t=0;t<n.length;t++){var o=n[t];(o.next||o.onMatch)&&(typeof o.next=="string"&&o.next.indexOf(i)!==0&&(o.next=i+o.next),o.nextState&&o.nextState.indexOf(i)!==0&&(o.nextState=i+o.nextState))}this.$rules[i+r]=n}},this.getRules=function(){return this.$rules},this.embedRules=function(d,i,r,n,t){var o=typeof d=="function"?new d().getRules():d;if(n)for(var l=0;l<n.length;l++)n[l]=i+n[l];else{n=[];for(var p in o)n.push(i+p)}if(this.addRules(o,i),r)for(var v=Array.prototype[t?"push":"unshift"],l=0;l<n.length;l++)v.apply(this.$rules[n[l]],b(r));this.$embeds||(this.$embeds=[]),this.$embeds.push(i)},this.getEmbeds=function(){return this.$embeds};var w=function(d,i){return(d!="start"||i.length)&&i.unshift(this.nextState,d),this.nextState},h=function(d,i){return i.shift(),i.shift()||"start"};this.normalizeRules=function(){var d=0,i=this.$rules;function r(n){var t=i[n];t.processed=!0;for(var o=0;o<t.length;o++){var l=t[o],p=null;Array.isArray(l)&&(p=l,l={}),!l.regex&&l.start&&(l.regex=l.start,l.next||(l.next=[]),l.next.push({defaultToken:l.token},{token:l.token+".end",regex:l.end||l.start,next:"pop"}),l.token=l.token+".start",l.push=!0);var v=l.next||l.push;if(v&&Array.isArray(v)){var k=l.stateName;k||(k=l.token,typeof k!="string"&&(k=k[0]||""),i[k]&&(k+=d++)),i[k]=v,l.next=k,r(k)}else v=="pop"&&(l.next=h);if(l.push&&(l.nextState=l.next||l.push,l.next=w,delete l.push),l.rules)for(var D in l.rules)i[D]?i[D].push&&i[D].push.apply(i[D],l.rules[D]):i[D]=l.rules[D];var _=typeof l=="string"?l:l.include;if(_&&(_==="$self"&&(_="start"),Array.isArray(_)?p=_.map(function(A){return i[A]}):p=i[_]),p){var M=[o,1].concat(p);l.noEscape&&(M=M.filter(function(A){return!A.next})),t.splice.apply(t,M),o--}l.keywordMap&&(l.token=this.createKeywordMapper(l.keywordMap,l.defaultToken||"text",l.caseInsensitive),delete l.defaultToken)}}Object.keys(i).forEach(r,this)},this.createKeywordMapper=function(d,i,r,n){var t=Object.create(null);return this.$keywordList=[],Object.keys(d).forEach(function(o){for(var l=d[o],p=l.split(n||"|"),v=p.length;v--;){var k=p[v];this.$keywordList.push(k),r&&(k=k.toLowerCase()),t[k]=o}},this),d=null,r?function(o){return t[o.toLowerCase()]||i}:function(o){return t[o]||i}},this.getKeywords=function(){return this.$keywords}}).call($.prototype),f.TextHighlightRules=$}),ace.define("ace/mode/behaviour",["require","exports","module"],function(s,f,C){var b=function(){this.$behaviours={}};(function(){this.add=function($,w,h){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[$]:this.$behaviours[$]={}}this.$behaviours[$][w]=h},this.addBehaviours=function($){for(var w in $)for(var h in $[w])this.add(w,h,$[w][h])},this.remove=function($){this.$behaviours&&this.$behaviours[$]&&delete this.$behaviours[$]},this.inherit=function($,w){if(typeof $=="function")var h=new $().getBehaviours(w);else var h=$.getBehaviours(w);this.addBehaviours(h)},this.getBehaviours=function($){if($){for(var w={},h=0;h<$.length;h++)this.$behaviours[$[h]]&&(w[$[h]]=this.$behaviours[$[h]]);return w}else return this.$behaviours}}).call(b.prototype),f.Behaviour=b}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(s,f,C){var b=s("./range").Range,$=function(){function w(h,d,i){this.$session=h,this.$row=d,this.$rowTokens=h.getTokens(d);var r=h.getTokenAt(d,i);this.$tokenIndex=r?r.index:-1}return w.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},w.prototype.stepForward=function(){this.$tokenIndex+=1;for(var h;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,h||(h=this.$session.getLength()),this.$row>=h)return this.$row=h-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},w.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},w.prototype.getCurrentTokenRow=function(){return this.$row},w.prototype.getCurrentTokenColumn=function(){var h=this.$rowTokens,d=this.$tokenIndex,i=h[d].start;if(i!==void 0)return i;for(i=0;d>0;)d-=1,i+=h[d].value.length;return i},w.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},w.prototype.getCurrentTokenRange=function(){var h=this.$rowTokens[this.$tokenIndex],d=this.getCurrentTokenColumn();return new b(this.$row,d,this.$row,d+h.value.length)},w}();f.TokenIterator=$}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(s,f,C){var b=s("../../lib/oop"),$=s("../behaviour").Behaviour,w=s("../../token_iterator").TokenIterator,h=s("../../lib/lang"),d=["text","paren.rparen","rparen","paren","punctuation.operator"],i=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],r,n={},t={'"':'"',"'":"'"},o=function(v){var k=-1;if(v.multiSelect&&(k=v.selection.index,n.rangeCount!=v.multiSelect.rangeCount&&(n={rangeCount:v.multiSelect.rangeCount})),n[k])return r=n[k];r=n[k]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},l=function(v,k,D,_){var M=v.end.row-v.start.row;return{text:D+k+_,selection:[0,v.start.column+1,M,v.end.column+(M?0:1)]}},p=function(v){v=v||{},this.add("braces","insertion",function(k,D,_,M,A){var F=_.getCursorPosition(),N=M.doc.getLine(F.row);if(A=="{"){o(_);var O=_.getSelectionRange(),H=M.doc.getTextRange(O);if(H!==""&&H!=="{"&&_.getWrapBehavioursEnabled())return l(O,H,"{","}");if(p.isSaneInsertion(_,M))return/[\]\}\)]/.test(N[F.column])||_.inMultiSelectMode||v.braces?(p.recordAutoInsert(_,M,"}"),{text:"{}",selection:[1,1]}):(p.recordMaybeInsert(_,M,"{"),{text:"{",selection:[1,1]})}else if(A=="}"){o(_);var R=N.substring(F.column,F.column+1);if(R=="}"){var I=M.$findOpeningBracket("}",{column:F.column+1,row:F.row});if(I!==null&&p.isAutoInsertedClosing(F,N,A))return p.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(A==`
`||A==`\r
`){o(_);var L="";p.isMaybeInsertedClosing(F,N)&&(L=h.stringRepeat("}",r.maybeInsertedBrackets),p.clearMaybeInsertedClosing());var R=N.substring(F.column,F.column+1);if(R==="}"){var S=M.findMatchingBracket({row:F.row,column:F.column+1},"}");if(!S)return null;var E=this.$getIndent(M.getLine(S.row))}else if(L)var E=this.$getIndent(N);else{p.clearMaybeInsertedClosing();return}var T=E+M.getTabString();return{text:`
`+T+`
`+E+L,selection:[1,T.length,1,T.length]}}else p.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(k,D,_,M,A){var F=M.doc.getTextRange(A);if(!A.isMultiLine()&&F=="{"){o(_);var N=M.doc.getLine(A.start.row),O=N.substring(A.end.column,A.end.column+1);if(O=="}")return A.end.column++,A;r.maybeInsertedBrackets--}}),this.add("parens","insertion",function(k,D,_,M,A){if(A=="("){o(_);var F=_.getSelectionRange(),N=M.doc.getTextRange(F);if(N!==""&&_.getWrapBehavioursEnabled())return l(F,N,"(",")");if(p.isSaneInsertion(_,M))return p.recordAutoInsert(_,M,")"),{text:"()",selection:[1,1]}}else if(A==")"){o(_);var O=_.getCursorPosition(),H=M.doc.getLine(O.row),R=H.substring(O.column,O.column+1);if(R==")"){var I=M.$findOpeningBracket(")",{column:O.column+1,row:O.row});if(I!==null&&p.isAutoInsertedClosing(O,H,A))return p.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(k,D,_,M,A){var F=M.doc.getTextRange(A);if(!A.isMultiLine()&&F=="("){o(_);var N=M.doc.getLine(A.start.row),O=N.substring(A.start.column+1,A.start.column+2);if(O==")")return A.end.column++,A}}),this.add("brackets","insertion",function(k,D,_,M,A){if(A=="["){o(_);var F=_.getSelectionRange(),N=M.doc.getTextRange(F);if(N!==""&&_.getWrapBehavioursEnabled())return l(F,N,"[","]");if(p.isSaneInsertion(_,M))return p.recordAutoInsert(_,M,"]"),{text:"[]",selection:[1,1]}}else if(A=="]"){o(_);var O=_.getCursorPosition(),H=M.doc.getLine(O.row),R=H.substring(O.column,O.column+1);if(R=="]"){var I=M.$findOpeningBracket("]",{column:O.column+1,row:O.row});if(I!==null&&p.isAutoInsertedClosing(O,H,A))return p.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(k,D,_,M,A){var F=M.doc.getTextRange(A);if(!A.isMultiLine()&&F=="["){o(_);var N=M.doc.getLine(A.start.row),O=N.substring(A.start.column+1,A.start.column+2);if(O=="]")return A.end.column++,A}}),this.add("string_dquotes","insertion",function(k,D,_,M,A){var F=M.$mode.$quotes||t;if(A.length==1&&F[A]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(A)!=-1)return;o(_);var N=A,O=_.getSelectionRange(),H=M.doc.getTextRange(O);if(H!==""&&(H.length!=1||!F[H])&&_.getWrapBehavioursEnabled())return l(O,H,N,N);if(!H){var R=_.getCursorPosition(),I=M.doc.getLine(R.row),L=I.substring(R.column-1,R.column),S=I.substring(R.column,R.column+1),E=M.getTokenAt(R.row,R.column),T=M.getTokenAt(R.row,R.column+1);if(L=="\\"&&E&&/escape/.test(E.type))return null;var B=E&&/string|escape/.test(E.type),P=!T||/string|escape/.test(T.type),W;if(S==N)W=B!==P,W&&/string\.end/.test(T.type)&&(W=!1);else{if(B&&!P||B&&P)return null;var z=M.$mode.tokenRe;z.lastIndex=0;var U=z.test(L);z.lastIndex=0;var j=z.test(S),V=M.$mode.$pairQuotesAfter,G=V&&V[N]&&V[N].test(L);if(!G&&U||j||S&&!/[\s;,.})\]\\]/.test(S))return null;var K=I[R.column-2];if(L==N&&(K==N||z.test(K)))return null;W=!0}return{text:W?N+N:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(k,D,_,M,A){var F=M.$mode.$quotes||t,N=M.doc.getTextRange(A);if(!A.isMultiLine()&&F.hasOwnProperty(N)){o(_);var O=M.doc.getLine(A.start.row),H=O.substring(A.start.column+1,A.start.column+2);if(H==N)return A.end.column++,A}}),v.closeDocComment!==!1&&this.add("doc comment end","insertion",function(k,D,_,M,A){if(k==="doc-start"&&(A===`
`||A===`\r
`)&&_.selection.isEmpty()){var F=_.getCursorPosition(),N=M.doc.getLine(F.row),O=M.doc.getLine(F.row+1),H=this.$getIndent(N);if(/\s*\*/.test(O))return/^\s*\*/.test(N)?{text:A+H+"* ",selection:[1,3+H.length,1,3+H.length]}:{text:A+H+" * ",selection:[1,3+H.length,1,3+H.length]};if(/\/\*\*/.test(N.substring(0,F.column)))return{text:A+H+" * "+A+" "+H+"*/",selection:[1,4+H.length,1,4+H.length]}}})};p.isSaneInsertion=function(v,k){var D=v.getCursorPosition(),_=new w(k,D.row,D.column);if(!this.$matchTokenType(_.getCurrentToken()||"text",d)){if(/[)}\]]/.test(v.session.getLine(D.row)[D.column]))return!0;var M=new w(k,D.row,D.column+1);if(!this.$matchTokenType(M.getCurrentToken()||"text",d))return!1}return _.stepForward(),_.getCurrentTokenRow()!==D.row||this.$matchTokenType(_.getCurrentToken()||"text",i)},p.$matchTokenType=function(v,k){return k.indexOf(v.type||v)>-1},p.recordAutoInsert=function(v,k,D){var _=v.getCursorPosition(),M=k.doc.getLine(_.row);this.isAutoInsertedClosing(_,M,r.autoInsertedLineEnd[0])||(r.autoInsertedBrackets=0),r.autoInsertedRow=_.row,r.autoInsertedLineEnd=D+M.substr(_.column),r.autoInsertedBrackets++},p.recordMaybeInsert=function(v,k,D){var _=v.getCursorPosition(),M=k.doc.getLine(_.row);this.isMaybeInsertedClosing(_,M)||(r.maybeInsertedBrackets=0),r.maybeInsertedRow=_.row,r.maybeInsertedLineStart=M.substr(0,_.column)+D,r.maybeInsertedLineEnd=M.substr(_.column),r.maybeInsertedBrackets++},p.isAutoInsertedClosing=function(v,k,D){return r.autoInsertedBrackets>0&&v.row===r.autoInsertedRow&&D===r.autoInsertedLineEnd[0]&&k.substr(v.column)===r.autoInsertedLineEnd},p.isMaybeInsertedClosing=function(v,k){return r.maybeInsertedBrackets>0&&v.row===r.maybeInsertedRow&&k.substr(v.column)===r.maybeInsertedLineEnd&&k.substr(0,v.column)==r.maybeInsertedLineStart},p.popAutoInsertedClosing=function(){r.autoInsertedLineEnd=r.autoInsertedLineEnd.substr(1),r.autoInsertedBrackets--},p.clearMaybeInsertedClosing=function(){r&&(r.maybeInsertedBrackets=0,r.maybeInsertedRow=-1)},b.inherits(p,$),f.CstyleBehaviour=p}),ace.define("ace/unicode",["require","exports","module"],function(s,f,C){for(var b=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],$=0,w=[],h=0;h<b.length;h+=2)w.push($+=b[h]),b[h+1]&&w.push(45,$+=b[h+1]);f.wordChars=String.fromCharCode.apply(null,w)}),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(s,f,C){var b=s("../config"),$=s("../tokenizer").Tokenizer,w=s("./text_highlight_rules").TextHighlightRules,h=s("./behaviour/cstyle").CstyleBehaviour,d=s("../unicode"),i=s("../lib/lang"),r=s("../token_iterator").TokenIterator,n=s("../range").Range,t=function(){this.HighlightRules=w};(function(){this.$defaultBehaviour=new h,this.tokenRe=new RegExp("^["+d.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+d.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new $(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(o,l,p,v){var k=l.doc,D=!0,_=!0,M=1/0,A=l.getTabSize(),F=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var H=this.lineCommentStart.map(i.escapeRegExp).join("|"),N=this.lineCommentStart[0];else var H=i.escapeRegExp(this.lineCommentStart),N=this.lineCommentStart;H=new RegExp("^(\\s*)(?:"+H+") ?"),F=l.getUseSoftTabs();var L=function(j,V){var G=j.match(H);if(G){var K=G[1].length,Y=G[0].length;!T(j,K,Y)&&G[0][Y-1]==" "&&Y--,k.removeInLine(V,K,Y)}},E=N+" ",I=function(j,V){(!D||/\S/.test(j))&&(T(j,M,M)?k.insertInLine({row:V,column:M},E):k.insertInLine({row:V,column:M},N))},S=function(j,V){return H.test(j)},T=function(j,V,G){for(var K=0;V--&&j.charAt(V)==" ";)K++;if(K%A!=0)return!1;for(var K=0;j.charAt(G++)==" ";)K++;return A>2?K%A!=A-1:K%A==0}}else{if(!this.blockComment)return!1;var N=this.blockComment.start,O=this.blockComment.end,H=new RegExp("^(\\s*)(?:"+i.escapeRegExp(N)+")"),R=new RegExp("(?:"+i.escapeRegExp(O)+")\\s*$"),I=function(W,z){S(W,z)||(!D||/\S/.test(W))&&(k.insertInLine({row:z,column:W.length},O),k.insertInLine({row:z,column:M},N))},L=function(W,z){var U;(U=W.match(R))&&k.removeInLine(z,W.length-U[0].length,W.length),(U=W.match(H))&&k.removeInLine(z,U[1].length,U[0].length)},S=function(W,z){if(H.test(W))return!0;for(var U=l.getTokens(z),j=0;j<U.length;j++)if(U[j].type==="comment")return!0}}function B(W){for(var z=p;z<=v;z++)W(k.getLine(z),z)}var P=1/0;B(function(W,z){var U=W.search(/\S/);U!==-1?(U<M&&(M=U),_&&!S(W,z)&&(_=!1)):P>W.length&&(P=W.length)}),M==1/0&&(M=P,D=!1,_=!1),F&&M%A!=0&&(M=Math.floor(M/A)*A),B(_?L:I)},this.toggleBlockComment=function(o,l,p,v){var k=this.blockComment;if(k){!k.start&&k[0]&&(k=k[0]);var D=new r(l,v.row,v.column),_=D.getCurrentToken();l.selection;var M=l.selection.toOrientedRange(),A,F;if(_&&/comment/.test(_.type)){for(var N,O;_&&/comment/.test(_.type);){var H=_.value.indexOf(k.start);if(H!=-1){var R=D.getCurrentTokenRow(),I=D.getCurrentTokenColumn()+H;N=new n(R,I,R,I+k.start.length);break}_=D.stepBackward()}for(var D=new r(l,v.row,v.column),_=D.getCurrentToken();_&&/comment/.test(_.type);){var H=_.value.indexOf(k.end);if(H!=-1){var R=D.getCurrentTokenRow(),I=D.getCurrentTokenColumn()+H;O=new n(R,I,R,I+k.end.length);break}_=D.stepForward()}O&&l.remove(O),N&&(l.remove(N),A=N.start.row,F=-k.start.length)}else F=k.start.length,A=p.start.row,l.insert(p.end,k.end),l.insert(p.start,k.start);M.start.row==A&&(M.start.column+=F),M.end.row==A&&(M.end.column+=F),l.selection.fromOrientedRange(M)}},this.getNextLineIndent=function(o,l,p){return this.$getIndent(l)},this.checkOutdent=function(o,l,p){return!1},this.autoOutdent=function(o,l,p){},this.$getIndent=function(o){return o.match(/^\s*/)[0]},this.createWorker=function(o){return null},this.createModeDelegates=function(o){this.$embeds=[],this.$modes={};for(var l in o)if(o[l]){var p=o[l],v=p.prototype.$id,k=b.$modes[v];k||(b.$modes[v]=k=new p),b.$modes[l]||(b.$modes[l]=k),this.$embeds.push(l),this.$modes[l]=k}for(var D=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],l=0;l<D.length;l++)(function(M){var A=D[l],F=M[A];M[D[l]]=function(){return this.$delegator(A,arguments,F)}})(this)},this.$delegator=function(o,l,p){var v=l[0]||"start";if(typeof v!="string"){if(Array.isArray(v[2])){var k=v[2][v[2].length-1],D=this.$modes[k];if(D)return D[o].apply(D,[v[1]].concat([].slice.call(l,1)))}v=v[0]||"start"}for(var _=0;_<this.$embeds.length;_++)if(this.$modes[this.$embeds[_]]){var M=v.split(this.$embeds[_]);if(!M[0]&&M[1]){l[0]=M[1];var D=this.$modes[this.$embeds[_]];return D[o].apply(D,l)}}var A=p.apply(this,l);return p?A:void 0},this.transformAction=function(o,l,p,v,k){if(this.$behaviour){var D=this.$behaviour.getBehaviours();for(var _ in D)if(D[_][l]){var M=D[_][l].apply(this,arguments);if(M)return M}}},this.getKeywords=function(o){if(!this.completionKeywords){var l=this.$tokenizer.rules,p=[];for(var v in l)for(var k=l[v],D=0,_=k.length;D<_;D++)if(typeof k[D].token=="string")/keyword|support|storage/.test(k[D].token)&&p.push(k[D].regex);else if(typeof k[D].token=="object"){for(var M=0,A=k[D].token.length;M<A;M++)if(/keyword|support|storage/.test(k[D].token[M])){var v=k[D].regex.match(/\(.+?\)/g)[M];p.push(v.substr(1,v.length-2))}}this.completionKeywords=p}return o?p.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(o,l,p,v){var k=this.$keywordList||this.$createKeywordList();return k.map(function(D){return{name:D,value:D,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(t.prototype),f.Mode=t}),ace.define("ace/apply_delta",["require","exports","module"],function(s,f,C){f.applyDelta=function(b,$,w){var h=$.start.row,d=$.start.column,i=b[h]||"";switch($.action){case"insert":var r=$.lines;if(r.length===1)b[h]=i.substring(0,d)+$.lines[0]+i.substring(d);else{var n=[h,1].concat($.lines);b.splice.apply(b,n),b[h]=i.substring(0,d)+b[h],b[h+$.lines.length-1]+=i.substring(d)}break;case"remove":var t=$.end.column,o=$.end.row;h===o?b[h]=i.substring(0,d)+i.substring(t):b.splice(h,o-h+1,i.substring(0,d)+b[o].substring(t));break}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(s,f,C){var b=s("./lib/oop"),$=s("./lib/event_emitter").EventEmitter,w=function(){function i(r,n,t){this.$onChange=this.onChange.bind(this),this.attach(r),typeof t>"u"?this.setPosition(n.row,n.column):this.setPosition(n,t)}return i.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},i.prototype.getDocument=function(){return this.document},i.prototype.onChange=function(r){if(!(r.start.row==r.end.row&&r.start.row!=this.row)&&!(r.start.row>this.row)){var n=d(r,{row:this.row,column:this.column},this.$insertRight);this.setPosition(n.row,n.column,!0)}},i.prototype.setPosition=function(r,n,t){var o;if(t?o={row:r,column:n}:o=this.$clipPositionToDocument(r,n),!(this.row==o.row&&this.column==o.column)){var l={row:this.row,column:this.column};this.row=o.row,this.column=o.column,this._signal("change",{old:l,value:o})}},i.prototype.detach=function(){this.document.off("change",this.$onChange)},i.prototype.attach=function(r){this.document=r||this.document,this.document.on("change",this.$onChange)},i.prototype.$clipPositionToDocument=function(r,n){var t={};return r>=this.document.getLength()?(t.row=Math.max(0,this.document.getLength()-1),t.column=this.document.getLine(t.row).length):r<0?(t.row=0,t.column=0):(t.row=r,t.column=Math.min(this.document.getLine(t.row).length,Math.max(0,n))),n<0&&(t.column=0),t},i}();w.prototype.$insertRight=!1,b.implement(w.prototype,$);function h(i,r,n){var t=n?i.column<=r.column:i.column<r.column;return i.row<r.row||i.row==r.row&&t}function d(i,r,n){var t=i.action=="insert",o=(t?1:-1)*(i.end.row-i.start.row),l=(t?1:-1)*(i.end.column-i.start.column),p=i.start,v=t?p:i.end;return h(r,p,n)?{row:r.row,column:r.column}:h(v,r,!n)?{row:r.row+o,column:r.column+(r.row==v.row?l:0)}:{row:p.row,column:p.column}}f.Anchor=w}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(s,f,C){var b=s("./lib/oop"),$=s("./apply_delta").applyDelta,w=s("./lib/event_emitter").EventEmitter,h=s("./range").Range,d=s("./anchor").Anchor,i=function(){function r(n){this.$lines=[""],n.length===0?this.$lines=[""]:Array.isArray(n)?this.insertMergedLines({row:0,column:0},n):this.insert({row:0,column:0},n)}return r.prototype.setValue=function(n){var t=this.getLength()-1;this.remove(new h(0,0,t,this.getLine(t).length)),this.insert({row:0,column:0},n||"")},r.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},r.prototype.createAnchor=function(n,t){return new d(this,n,t)},r.prototype.$detectNewLine=function(n){var t=n.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:`
`,this._signal("changeNewLineMode")},r.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},r.prototype.setNewLineMode=function(n){this.$newLineMode!==n&&(this.$newLineMode=n,this._signal("changeNewLineMode"))},r.prototype.getNewLineMode=function(){return this.$newLineMode},r.prototype.isNewLine=function(n){return n==`\r
`||n=="\r"||n==`
`},r.prototype.getLine=function(n){return this.$lines[n]||""},r.prototype.getLines=function(n,t){return this.$lines.slice(n,t+1)},r.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},r.prototype.getLength=function(){return this.$lines.length},r.prototype.getTextRange=function(n){return this.getLinesForRange(n).join(this.getNewLineCharacter())},r.prototype.getLinesForRange=function(n){var t;if(n.start.row===n.end.row)t=[this.getLine(n.start.row).substring(n.start.column,n.end.column)];else{t=this.getLines(n.start.row,n.end.row),t[0]=(t[0]||"").substring(n.start.column);var o=t.length-1;n.end.row-n.start.row==o&&(t[o]=t[o].substring(0,n.end.column))}return t},r.prototype.insertLines=function(n,t){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(n,t)},r.prototype.removeLines=function(n,t){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(n,t)},r.prototype.insertNewLine=function(n){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(n,["",""])},r.prototype.insert=function(n,t){return this.getLength()<=1&&this.$detectNewLine(t),this.insertMergedLines(n,this.$split(t))},r.prototype.insertInLine=function(n,t){var o=this.clippedPos(n.row,n.column),l=this.pos(n.row,n.column+t.length);return this.applyDelta({start:o,end:l,action:"insert",lines:[t]},!0),this.clonePos(l)},r.prototype.clippedPos=function(n,t){var o=this.getLength();n===void 0?n=o:n<0?n=0:n>=o&&(n=o-1,t=void 0);var l=this.getLine(n);return t==null&&(t=l.length),t=Math.min(Math.max(t,0),l.length),{row:n,column:t}},r.prototype.clonePos=function(n){return{row:n.row,column:n.column}},r.prototype.pos=function(n,t){return{row:n,column:t}},r.prototype.$clipPosition=function(n){var t=this.getLength();return n.row>=t?(n.row=Math.max(0,t-1),n.column=this.getLine(t-1).length):(n.row=Math.max(0,n.row),n.column=Math.min(Math.max(n.column,0),this.getLine(n.row).length)),n},r.prototype.insertFullLines=function(n,t){n=Math.min(Math.max(n,0),this.getLength());var o=0;n<this.getLength()?(t=t.concat([""]),o=0):(t=[""].concat(t),n--,o=this.$lines[n].length),this.insertMergedLines({row:n,column:o},t)},r.prototype.insertMergedLines=function(n,t){var o=this.clippedPos(n.row,n.column),l={row:o.row+t.length-1,column:(t.length==1?o.column:0)+t[t.length-1].length};return this.applyDelta({start:o,end:l,action:"insert",lines:t}),this.clonePos(l)},r.prototype.remove=function(n){var t=this.clippedPos(n.start.row,n.start.column),o=this.clippedPos(n.end.row,n.end.column);return this.applyDelta({start:t,end:o,action:"remove",lines:this.getLinesForRange({start:t,end:o})}),this.clonePos(t)},r.prototype.removeInLine=function(n,t,o){var l=this.clippedPos(n,t),p=this.clippedPos(n,o);return this.applyDelta({start:l,end:p,action:"remove",lines:this.getLinesForRange({start:l,end:p})},!0),this.clonePos(l)},r.prototype.removeFullLines=function(n,t){n=Math.min(Math.max(0,n),this.getLength()-1),t=Math.min(Math.max(0,t),this.getLength()-1);var o=t==this.getLength()-1&&n>0,l=t<this.getLength()-1,p=o?n-1:n,v=o?this.getLine(p).length:0,k=l?t+1:t,D=l?0:this.getLine(k).length,_=new h(p,v,k,D),M=this.$lines.slice(n,t+1);return this.applyDelta({start:_.start,end:_.end,action:"remove",lines:this.getLinesForRange(_)}),M},r.prototype.removeNewLine=function(n){n<this.getLength()-1&&n>=0&&this.applyDelta({start:this.pos(n,this.getLine(n).length),end:this.pos(n+1,0),action:"remove",lines:["",""]})},r.prototype.replace=function(n,t){if(n instanceof h||(n=h.fromPoints(n.start,n.end)),t.length===0&&n.isEmpty())return n.start;if(t==this.getTextRange(n))return n.end;this.remove(n);var o;return t?o=this.insert(n.start,t):o=n.start,o},r.prototype.applyDeltas=function(n){for(var t=0;t<n.length;t++)this.applyDelta(n[t])},r.prototype.revertDeltas=function(n){for(var t=n.length-1;t>=0;t--)this.revertDelta(n[t])},r.prototype.applyDelta=function(n,t){var o=n.action=="insert";(o?n.lines.length<=1&&!n.lines[0]:!h.comparePoints(n.start,n.end))||(o&&n.lines.length>2e4?this.$splitAndapplyLargeDelta(n,2e4):($(this.$lines,n,t),this._signal("change",n)))},r.prototype.$safeApplyDelta=function(n){var t=this.$lines.length;(n.action=="remove"&&n.start.row<t&&n.end.row<t||n.action=="insert"&&n.start.row<=t)&&this.applyDelta(n)},r.prototype.$splitAndapplyLargeDelta=function(n,t){for(var o=n.lines,l=o.length-t+1,p=n.start.row,v=n.start.column,k=0,D=0;k<l;k=D){D+=t-1;var _=o.slice(k,D);_.push(""),this.applyDelta({start:this.pos(p+k,v),end:this.pos(p+D,v=0),action:n.action,lines:_},!0)}n.lines=o.slice(k),n.start.row=p+k,n.start.column=v,this.applyDelta(n,!0)},r.prototype.revertDelta=function(n){this.$safeApplyDelta({start:this.clonePos(n.start),end:this.clonePos(n.end),action:n.action=="insert"?"remove":"insert",lines:n.lines.slice()})},r.prototype.indexToPosition=function(n,t){for(var o=this.$lines||this.getAllLines(),l=this.getNewLineCharacter().length,p=t||0,v=o.length;p<v;p++)if(n-=o[p].length+l,n<0)return{row:p,column:n+o[p].length+l};return{row:v-1,column:n+o[v-1].length+l}},r.prototype.positionToIndex=function(n,t){for(var o=this.$lines||this.getAllLines(),l=this.getNewLineCharacter().length,p=0,v=Math.min(n.row,o.length),k=t||0;k<v;++k)p+=o[k].length+l;return p+n.column},r.prototype.$split=function(n){return n.split(/\r\n|\r|\n/)},r}();i.prototype.$autoNewLine="",i.prototype.$newLineMode="auto",b.implement(i.prototype,w),f.Document=i}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(s,f,C){var b=s("./lib/oop"),$=s("./lib/event_emitter").EventEmitter,w=function(){function h(d,i){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=d;var r=this;this.$worker=function(){if(r.running){for(var n=new Date,t=r.currentLine,o=-1,l=r.doc,p=t;r.lines[t];)t++;var v=l.getLength(),k=0;for(r.running=!1;t<v;){r.$tokenizeRow(t),o=t;do t++;while(r.lines[t]);if(k++,k%5===0&&new Date-n>20){r.running=setTimeout(r.$worker,20);break}}r.currentLine=t,o==-1&&(o=t),p<=o&&r.fireUpdateEvent(p,o)}}}return h.prototype.setTokenizer=function(d){this.tokenizer=d,this.lines=[],this.states=[],this.start(0)},h.prototype.setDocument=function(d){this.doc=d,this.lines=[],this.states=[],this.stop()},h.prototype.fireUpdateEvent=function(d,i){var r={first:d,last:i};this._signal("update",{data:r})},h.prototype.start=function(d){this.currentLine=Math.min(d||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},h.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},h.prototype.$updateOnChange=function(d){var i=d.start.row,r=d.end.row-i;if(r===0)this.lines[i]=null;else if(d.action=="remove")this.lines.splice(i,r+1,null),this.states.splice(i,r+1,null);else{var n=Array(r+1);n.unshift(i,1),this.lines.splice.apply(this.lines,n),this.states.splice.apply(this.states,n)}this.currentLine=Math.min(i,this.currentLine,this.doc.getLength()),this.stop()},h.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},h.prototype.getTokens=function(d){return this.lines[d]||this.$tokenizeRow(d)},h.prototype.getState=function(d){return this.currentLine==d&&this.$tokenizeRow(d),this.states[d]||"start"},h.prototype.$tokenizeRow=function(d){var i=this.doc.getLine(d),r=this.states[d-1],n=this.tokenizer.getLineTokens(i,r,d);return this.states[d]+""!=n.state+""?(this.states[d]=n.state,this.lines[d+1]=null,this.currentLine>d+1&&(this.currentLine=d+1)):this.currentLine==d&&(this.currentLine=d+1),this.lines[d]=n.tokens},h.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},h}();b.implement(w.prototype,$),f.BackgroundTokenizer=w}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(s,f,C){var b=s("./lib/lang"),$=s("./range").Range,w=function(){function h(d,i,r){r===void 0&&(r="text"),this.setRegexp(d),this.clazz=i,this.type=r}return h.prototype.setRegexp=function(d){this.regExp+""!=d+""&&(this.regExp=d,this.cache=[])},h.prototype.update=function(d,i,r,n){if(this.regExp)for(var t=n.firstRow,o=n.lastRow,l={},p=t;p<=o;p++){var v=this.cache[p];v==null&&(v=b.getMatchOffsets(r.getLine(p),this.regExp),v.length>this.MAX_RANGES&&(v=v.slice(0,this.MAX_RANGES)),v=v.map(function(M){return new $(p,M.offset,p,M.offset+M.length)}),this.cache[p]=v.length?v:"");for(var k=v.length;k--;){var D=v[k].toScreenRange(r),_=D.toString();l[_]||(l[_]=!0,i.drawSingleLineMarker(d,D,this.clazz,n))}}},h}();w.prototype.MAX_RANGES=500,f.SearchHighlight=w}),ace.define("ace/undomanager",["require","exports","module","ace/range"],function(s,f,C){var b=function(){function M(){this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return M.prototype.addSession=function(A){this.$session=A},M.prototype.add=function(A,F,N){if(!this.$fromUndo&&A!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),F===!1||!this.lastDeltas){this.lastDeltas=[];var O=this.$undoStack.length;O>this.$undoDepth-1&&this.$undoStack.splice(0,O-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),A.id=this.$rev=++this.$maxRev}(A.action=="remove"||A.action=="insert")&&(this.$lastDelta=A),this.lastDeltas.push(A)}},M.prototype.addSelection=function(A,F){this.selections.push({value:A,rev:F||this.$rev})},M.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},M.prototype.markIgnored=function(A,F){F==null&&(F=this.$rev+1);for(var N=this.$undoStack,O=N.length;O--;){var H=N[O][0];if(H.id<=A)break;H.id<F&&(H.ignore=!0)}this.lastDeltas=null},M.prototype.getSelection=function(A,F){for(var N=this.selections,O=N.length;O--;){var H=N[O];if(H.rev<A)return F&&(H=N[O+1]),H}},M.prototype.getRevision=function(){return this.$rev},M.prototype.getDeltas=function(A,F){F==null&&(F=this.$rev+1);for(var N=this.$undoStack,O=null,H=0,R=N.length;R--;){var I=N[R][0];if(I.id<F&&!O&&(O=R+1),I.id<=A){H=R+1;break}}return N.slice(H,O)},M.prototype.getChangedRanges=function(A,F){F==null&&(F=this.$rev+1)},M.prototype.getChangedLines=function(A,F){F==null&&(F=this.$rev+1)},M.prototype.undo=function(A,F){this.lastDeltas=null;var N=this.$undoStack;if($(N,N.length)){A||(A=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var O=N.pop(),H=null;return O&&(H=A.undoChanges(O,F),this.$redoStack.push(O),this.$syncRev()),this.$fromUndo=!1,H}},M.prototype.redo=function(A,F){if(this.lastDeltas=null,A||(A=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var N=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);_(this.$redoStack,N),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(R){R[0].id=++this.$maxRev},this)}var O=this.$redoStack.pop(),H=null;return O&&(H=A.redoChanges(O,F),this.$undoStack.push(O),this.$syncRev()),this.$fromUndo=!1,H},M.prototype.$syncRev=function(){var A=this.$undoStack,F=A[A.length-1],N=F&&F[0].id||0;this.$redoStackBaseRev=N,this.$rev=N},M.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},M.prototype.canUndo=function(){return this.$undoStack.length>0},M.prototype.canRedo=function(){return this.$redoStack.length>0},M.prototype.bookmark=function(A){A==null&&(A=this.$rev),this.mark=A},M.prototype.isAtBookmark=function(){return this.$rev===this.mark},M.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},M.prototype.fromJSON=function(A){this.reset(),this.$undoStack=A.$undoStack,this.$redoStack=A.$redoStack},M.prototype.$prettyPrint=function(A){return A?r(A):r(this.$undoStack)+`
---
`+r(this.$redoStack)},M}();b.prototype.hasUndo=b.prototype.canUndo,b.prototype.hasRedo=b.prototype.canRedo,b.prototype.isClean=b.prototype.isAtBookmark,b.prototype.markClean=b.prototype.bookmark;function $(M,A){for(var F=A;F--;){var N=M[F];if(N&&!N[0].ignore){for(;F<A-1;){var O=o(M[F],M[F+1]);M[F]=O[0],M[F+1]=O[1],F++}return!0}}}var w=s("./range").Range,h=w.comparePoints;w.comparePoints;function d(M){return{row:M.row,column:M.column}}function i(M){return{start:d(M.start),end:d(M.end),action:M.action,lines:M.lines.slice()}}function r(M){if(M=M||this,Array.isArray(M))return M.map(r).join(`
`);var A="";return M.action?(A=M.action=="insert"?"+":"-",A+="["+M.lines+"]"):M.value&&(Array.isArray(M.value)?A=M.value.map(n).join(`
`):A=n(M.value)),M.start&&(A+=n(M)),(M.id||M.rev)&&(A+="	("+(M.id||M.rev)+")"),A}function n(M){return M.start.row+":"+M.start.column+"=>"+M.end.row+":"+M.end.column}function t(M,A){var F=M.action=="insert",N=A.action=="insert";if(F&&N)if(h(A.start,M.end)>=0)p(A,M,-1);else if(h(A.start,M.start)<=0)p(M,A,1);else return null;else if(F&&!N)if(h(A.start,M.end)>=0)p(A,M,-1);else if(h(A.end,M.start)<=0)p(M,A,-1);else return null;else if(!F&&N)if(h(A.start,M.start)>=0)p(A,M,1);else if(h(A.start,M.start)<=0)p(M,A,1);else return null;else if(!F&&!N)if(h(A.start,M.start)>=0)p(A,M,1);else if(h(A.end,M.start)<=0)p(M,A,-1);else return null;return[A,M]}function o(M,A){for(var F=M.length;F--;)for(var N=0;N<A.length;N++)if(!t(M[F],A[N])){for(;F<M.length;){for(;N--;)t(A[N],M[F]);N=A.length,F++}return[M,A]}return M.selectionBefore=A.selectionBefore=M.selectionAfter=A.selectionAfter=null,[A,M]}function l(M,A){var F=M.action=="insert",N=A.action=="insert";if(F&&N)h(M.start,A.start)<0?p(A,M,1):p(M,A,1);else if(F&&!N)h(M.start,A.end)>=0?p(M,A,-1):(h(M.start,A.start)<=0||p(M,w.fromPoints(A.start,M.start),-1),p(A,M,1));else if(!F&&N)h(A.start,M.end)>=0?p(A,M,-1):(h(A.start,M.start)<=0||p(A,w.fromPoints(M.start,A.start),-1),p(M,A,1));else if(!F&&!N)if(h(A.start,M.end)>=0)p(A,M,-1);else if(h(A.end,M.start)<=0)p(M,A,-1);else{var O,H;return h(M.start,A.start)<0&&(O=M,M=k(M,A.start)),h(M.end,A.end)>0&&(H=k(M,A.end)),v(A.end,M.start,M.end,-1),H&&!O&&(M.lines=H.lines,M.start=H.start,M.end=H.end,H=M),[A,O,H].filter(Boolean)}return[A,M]}function p(M,A,F){v(M.start,A.start,A.end,F),v(M.end,A.start,A.end,F)}function v(M,A,F,N){M.row==(N==1?A:F).row&&(M.column+=N*(F.column-A.column)),M.row+=N*(F.row-A.row)}function k(M,A){var F=M.lines,N=M.end;M.end=d(A);var O=M.end.row-M.start.row,H=F.splice(O,F.length),R=O?A.column:A.column-M.start.column;F.push(H[0].substring(0,R)),H[0]=H[0].substr(R);var I={start:d(A),end:N,lines:H,action:M.action};return I}function D(M,A){A=i(A);for(var F=M.length;F--;){for(var N=M[F],O=0;O<N.length;O++){var H=N[O],R=l(H,A);A=R[0],R.length!=2&&(R[2]?(N.splice(O+1,1,R[1],R[2]),O++):R[1]||(N.splice(O,1),O--))}N.length||M.splice(F,1)}return M}function _(M,A){for(var F=0;F<A.length;F++)for(var N=A[F],O=0;O<N.length;O++)D(M,N[O])}f.UndoManager=b}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(s,f,C){var b=s("../range").Range,$=function(){function w(h,d){this.foldData=h,Array.isArray(d)?this.folds=d:d=this.folds=[d];var i=d[d.length-1];this.range=new b(d[0].start.row,d[0].start.column,i.end.row,i.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(r){r.setFoldLine(this)},this)}return w.prototype.shiftRow=function(h){this.start.row+=h,this.end.row+=h,this.folds.forEach(function(d){d.start.row+=h,d.end.row+=h})},w.prototype.addFold=function(h){if(h.sameRow){if(h.start.row<this.startRow||h.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(h),this.folds.sort(function(d,i){return-d.range.compareEnd(i.start.row,i.start.column)}),this.range.compareEnd(h.start.row,h.start.column)>0?(this.end.row=h.end.row,this.end.column=h.end.column):this.range.compareStart(h.end.row,h.end.column)<0&&(this.start.row=h.start.row,this.start.column=h.start.column)}else if(h.start.row==this.end.row)this.folds.push(h),this.end.row=h.end.row,this.end.column=h.end.column;else if(h.end.row==this.start.row)this.folds.unshift(h),this.start.row=h.start.row,this.start.column=h.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");h.foldLine=this},w.prototype.containsRow=function(h){return h>=this.start.row&&h<=this.end.row},w.prototype.walk=function(h,d,i){var r=0,n=this.folds,t,o,l,p=!0;d==null&&(d=this.end.row,i=this.end.column);for(var v=0;v<n.length;v++){if(t=n[v],o=t.range.compareStart(d,i),o==-1){h(null,d,i,r,p);return}if(l=h(null,t.start.row,t.start.column,r,p),l=!l&&h(t.placeholder,t.start.row,t.start.column,r),l||o===0)return;p=!t.sameRow,r=t.end.column}h(null,d,i,r,p)},w.prototype.getNextFoldTo=function(h,d){for(var i,r,n=0;n<this.folds.length;n++){if(i=this.folds[n],r=i.range.compareEnd(h,d),r==-1)return{fold:i,kind:"after"};if(r===0)return{fold:i,kind:"inside"}}return null},w.prototype.addRemoveChars=function(h,d,i){var r=this.getNextFoldTo(h,d),n,t;if(r){if(n=r.fold,r.kind=="inside"&&n.start.column!=d&&n.start.row!=h)window.console&&window.console.log(h,d,n);else if(n.start.row==h){t=this.folds;var o=t.indexOf(n);for(o===0&&(this.start.column+=i),o;o<t.length;o++){if(n=t[o],n.start.column+=i,!n.sameRow)return;n.end.column+=i}this.end.column+=i}}},w.prototype.split=function(h,d){var i=this.getNextFoldTo(h,d);if(!i||i.kind=="inside")return null;var r=i.fold,n=this.folds,t=this.foldData,o=n.indexOf(r),l=n[o-1];this.end.row=l.end.row,this.end.column=l.end.column,n=n.splice(o,n.length-o);var p=new w(t,n);return t.splice(t.indexOf(this)+1,0,p),p},w.prototype.merge=function(h){for(var d=h.folds,i=0;i<d.length;i++)this.addFold(d[i]);var r=this.foldData;r.splice(r.indexOf(h),1)},w.prototype.toString=function(){var h=[this.range.toString()+": ["];return this.folds.forEach(function(d){h.push("  "+d.toString())}),h.push("]"),h.join(`
`)},w.prototype.idxToPosition=function(h){for(var d=0,i=0;i<this.folds.length;i++){var r=this.folds[i];if(h-=r.start.column-d,h<0)return{row:r.start.row,column:r.start.column+h};if(h-=r.placeholder.length,h<0)return r.start;d=r.end.column}return{row:this.end.row,column:this.end.column+h}},w}();f.FoldLine=$}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(s,f,C){var b=s("./range").Range,$=b.comparePoints,w=function(){function h(){this.ranges=[],this.$bias=1}return h.prototype.pointIndex=function(d,i,r){for(var n=this.ranges,t=r||0;t<n.length;t++){var o=n[t],l=$(d,o.end);if(!(l>0)){var p=$(d,o.start);return l===0?i&&p!==0?-t-2:t:p>0||p===0&&!i?t:-t-1}}return-t-1},h.prototype.add=function(d){var i=!d.isEmpty(),r=this.pointIndex(d.start,i);r<0&&(r=-r-1);var n=this.pointIndex(d.end,i,r);return n<0?n=-n-1:n++,this.ranges.splice(r,n-r,d)},h.prototype.addList=function(d){for(var i=[],r=d.length;r--;)i.push.apply(i,this.add(d[r]));return i},h.prototype.substractPoint=function(d){var i=this.pointIndex(d);if(i>=0)return this.ranges.splice(i,1)},h.prototype.merge=function(){var d=[],i=this.ranges;i=i.sort(function(l,p){return $(l.start,p.start)});for(var r=i[0],n,t=1;t<i.length;t++){n=r,r=i[t];var o=$(n.end,r.start);o<0||o==0&&!n.isEmpty()&&!r.isEmpty()||($(n.end,r.end)<0&&(n.end.row=r.end.row,n.end.column=r.end.column),i.splice(t,1),d.push(r),r=n,t--)}return this.ranges=i,d},h.prototype.contains=function(d,i){return this.pointIndex({row:d,column:i})>=0},h.prototype.containsPoint=function(d){return this.pointIndex(d)>=0},h.prototype.rangeAtPoint=function(d){var i=this.pointIndex(d);if(i>=0)return this.ranges[i]},h.prototype.clipRows=function(d,i){var r=this.ranges;if(r[0].start.row>i||r[r.length-1].start.row<d)return[];var n=this.pointIndex({row:d,column:0});n<0&&(n=-n-1);var t=this.pointIndex({row:i,column:0},n);t<0&&(t=-t-1);for(var o=[],l=n;l<t;l++)o.push(r[l]);return o},h.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},h.prototype.attach=function(d){this.session&&this.detach(),this.session=d,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},h.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},h.prototype.$onChange=function(d){for(var i=d.start,r=d.end,n=i.row,t=r.row,o=this.ranges,l=0,p=o.length;l<p;l++){var v=o[l];if(v.end.row>=n)break}if(d.action=="insert")for(var k=t-n,D=-i.column+r.column;l<p;l++){var v=o[l];if(v.start.row>n)break;if(v.start.row==n&&v.start.column>=i.column&&(v.start.column==i.column&&this.$bias<=0||(v.start.column+=D,v.start.row+=k)),v.end.row==n&&v.end.column>=i.column){if(v.end.column==i.column&&this.$bias<0)continue;v.end.column==i.column&&D>0&&l<p-1&&v.end.column>v.start.column&&v.end.column==o[l+1].start.column&&(v.end.column-=D),v.end.column+=D,v.end.row+=k}}else for(var k=n-t,D=i.column-r.column;l<p;l++){var v=o[l];if(v.start.row>t)break;v.end.row<t&&(n<v.end.row||n==v.end.row&&i.column<v.end.column)?(v.end.row=n,v.end.column=i.column):v.end.row==t?v.end.column<=r.column?(k||v.end.column>i.column)&&(v.end.column=i.column,v.end.row=i.row):(v.end.column+=D,v.end.row+=k):v.end.row>t&&(v.end.row+=k),v.start.row<t&&(n<v.start.row||n==v.start.row&&i.column<v.start.column)?(v.start.row=n,v.start.column=i.column):v.start.row==t?v.start.column<=r.column?(k||v.start.column>i.column)&&(v.start.column=i.column,v.start.row=i.row):(v.start.column+=D,v.start.row+=k):v.start.row>t&&(v.start.row+=k)}if(k!=0&&l<p)for(;l<p;l++){var v=o[l];v.start.row+=k,v.end.row+=k}},h}();w.prototype.comparePoints=$,f.RangeList=w}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(s,f,C){var b=this&&this.__extends||function(){var n=function(t,o){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(l[v]=p[v])},n(t,o)};return function(t,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");n(t,o);function l(){this.constructor=t}t.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)}}(),$=s("../range_list").RangeList,w=function(n){b(t,n);function t(o,l){var p=n.call(this)||this;return p.foldLine=null,p.placeholder=l,p.range=o,p.start=o.start,p.end=o.end,p.sameRow=o.start.row==o.end.row,p.subFolds=p.ranges=[],p}return t.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},t.prototype.setFoldLine=function(o){this.foldLine=o,this.subFolds.forEach(function(l){l.setFoldLine(o)})},t.prototype.clone=function(){var o=this.range.clone(),l=new t(o,this.placeholder);return this.subFolds.forEach(function(p){l.subFolds.push(p.clone())}),l.collapseChildren=this.collapseChildren,l},t.prototype.addSubFold=function(o){if(!this.range.isEqual(o)){d(o,this.start);for(var D=o.start.row,_=o.start.column,l=0,p=-1;l<this.subFolds.length&&(p=this.subFolds[l].range.compare(D,_),p==1);l++);var v=this.subFolds[l],k=0;if(p==0){if(v.range.containsRange(o))return v.addSubFold(o);k=1}for(var D=o.range.end.row,_=o.range.end.column,M=l,p=-1;M<this.subFolds.length&&(p=this.subFolds[M].range.compare(D,_),p==1);M++);p==0&&M++;for(var A=this.subFolds.splice(l,M-l,o),F=p==0?A.length-1:A.length,N=k;N<F;N++)o.addSubFold(A[N]);return o.setFoldLine(this.foldLine),o}},t.prototype.restoreRange=function(o){return r(o,this.start)},t}($);function h(n,t){n.row-=t.row,n.row==0&&(n.column-=t.column)}function d(n,t){h(n.start,t),h(n.end,t)}function i(n,t){n.row==0&&(n.column+=t.column),n.row+=t.row}function r(n,t){i(n.start,t),i(n.end,t)}f.Fold=w}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(s,f,C){var b=s("../range").Range,$=s("./fold_line").FoldLine,w=s("./fold").Fold,h=s("../token_iterator").TokenIterator,d=s("../mouse/mouse_event").MouseEvent;function i(){this.getFoldAt=function(r,n,t){var o=this.getFoldLine(r);if(!o)return null;for(var l=o.folds,p=0;p<l.length;p++){var v=l[p].range;if(v.contains(r,n)){if(t==1&&v.isEnd(r,n)&&!v.isEmpty())continue;if(t==-1&&v.isStart(r,n)&&!v.isEmpty())continue;return l[p]}}},this.getFoldsInRange=function(r){var n=r.start,t=r.end,o=this.$foldData,l=[];n.column+=1,t.column-=1;for(var p=0;p<o.length;p++){var v=o[p].range.compareRange(r);if(v!=2){if(v==-2)break;for(var k=o[p].folds,D=0;D<k.length;D++){var _=k[D];if(v=_.range.compareRange(r),v==-2)break;if(v==2)continue;if(v==42)break;l.push(_)}}}return n.column-=1,t.column+=1,l},this.getFoldsInRangeList=function(r){if(Array.isArray(r)){var n=[];r.forEach(function(t){n=n.concat(this.getFoldsInRange(t))},this)}else var n=this.getFoldsInRange(r);return n},this.getAllFolds=function(){for(var r=[],n=this.$foldData,t=0;t<n.length;t++)for(var o=0;o<n[t].folds.length;o++)r.push(n[t].folds[o]);return r},this.getFoldStringAt=function(r,n,t,o){if(o=o||this.getFoldLine(r),!o)return null;for(var l={end:{column:0}},p,v,k=0;k<o.folds.length;k++){v=o.folds[k];var D=v.range.compareEnd(r,n);if(D==-1){p=this.getLine(v.start.row).substring(l.end.column,v.start.column);break}else if(D===0)return null;l=v}return p||(p=this.getLine(v.start.row).substring(l.end.column)),t==-1?p.substring(0,n-l.end.column):t==1?p.substring(n-l.end.column):p},this.getFoldLine=function(r,n){var t=this.$foldData,o=0;for(n&&(o=t.indexOf(n)),o==-1&&(o=0),o;o<t.length;o++){var l=t[o];if(l.start.row<=r&&l.end.row>=r)return l;if(l.end.row>r)return null}return null},this.getNextFoldLine=function(r,n){var t=this.$foldData,o=0;for(n&&(o=t.indexOf(n)),o==-1&&(o=0),o;o<t.length;o++){var l=t[o];if(l.end.row>=r)return l}return null},this.getFoldedRowCount=function(r,n){for(var t=this.$foldData,o=n-r+1,l=0;l<t.length;l++){var p=t[l],v=p.end.row,k=p.start.row;if(v>=n){k<n&&(k>=r?o-=n-k:o=0);break}else v>=r&&(k>=r?o-=v-k:o-=v-r+1)}return o},this.$addFoldLine=function(r){return this.$foldData.push(r),this.$foldData.sort(function(n,t){return n.start.row-t.start.row}),r},this.addFold=function(r,n){var t=this.$foldData,o=!1,l;r instanceof w?l=r:(l=new w(n,r),l.collapseChildren=n.collapseChildren),this.$clipRangeToDocument(l.range);var p=l.start.row,v=l.start.column,k=l.end.row,D=l.end.column,_=this.getFoldAt(p,v,1),M=this.getFoldAt(k,D,-1);if(_&&M==_)return _.addSubFold(l);_&&!_.range.isStart(p,v)&&this.removeFold(_),M&&!M.range.isEnd(k,D)&&this.removeFold(M);var A=this.getFoldsInRange(l.range);A.length>0&&(this.removeFolds(A),l.collapseChildren||A.forEach(function(H){l.addSubFold(H)}));for(var F=0;F<t.length;F++){var N=t[F];if(k==N.start.row){N.addFold(l),o=!0;break}else if(p==N.end.row){if(N.addFold(l),o=!0,!l.sameRow){var O=t[F+1];if(O&&O.start.row==k){N.merge(O);break}}break}else if(k<=N.start.row)break}return o||(N=this.$addFoldLine(new $(this.$foldData,l))),this.$useWrapMode?this.$updateWrapData(N.start.row,N.start.row):this.$updateRowLengthCache(N.start.row,N.start.row),this.$modified=!0,this._signal("changeFold",{data:l,action:"add"}),l},this.addFolds=function(r){r.forEach(function(n){this.addFold(n)},this)},this.removeFold=function(r){var n=r.foldLine,t=n.start.row,o=n.end.row,l=this.$foldData,p=n.folds;if(p.length==1)l.splice(l.indexOf(n),1);else if(n.range.isEnd(r.end.row,r.end.column))p.pop(),n.end.row=p[p.length-1].end.row,n.end.column=p[p.length-1].end.column;else if(n.range.isStart(r.start.row,r.start.column))p.shift(),n.start.row=p[0].start.row,n.start.column=p[0].start.column;else if(r.sameRow)p.splice(p.indexOf(r),1);else{var v=n.split(r.start.row,r.start.column);p=v.folds,p.shift(),v.start.row=p[0].start.row,v.start.column=p[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(t,o):this.$updateRowLengthCache(t,o)),this.$modified=!0,this._signal("changeFold",{data:r,action:"remove"})},this.removeFolds=function(r){for(var n=[],t=0;t<r.length;t++)n.push(r[t]);n.forEach(function(o){this.removeFold(o)},this),this.$modified=!0},this.expandFold=function(r){this.removeFold(r),r.subFolds.forEach(function(n){r.restoreRange(n),this.addFold(n)},this),r.collapseChildren>0&&this.foldAll(r.start.row+1,r.end.row,r.collapseChildren-1),r.subFolds=[]},this.expandFolds=function(r){r.forEach(function(n){this.expandFold(n)},this)},this.unfold=function(r,n){var t,o;if(r==null)t=new b(0,0,this.getLength(),0),n==null&&(n=!0);else if(typeof r=="number")t=new b(r,0,r,this.getLine(r).length);else if("row"in r)t=b.fromPoints(r,r);else{if(Array.isArray(r))return o=[],r.forEach(function(p){o=o.concat(this.unfold(p))},this),o;t=r}o=this.getFoldsInRangeList(t);for(var l=o;o.length==1&&b.comparePoints(o[0].start,t.start)<0&&b.comparePoints(o[0].end,t.end)>0;)this.expandFolds(o),o=this.getFoldsInRangeList(t);if(n!=!1?this.removeFolds(o):this.expandFolds(o),l.length)return l},this.isRowFolded=function(r,n){return!!this.getFoldLine(r,n)},this.getRowFoldEnd=function(r,n){var t=this.getFoldLine(r,n);return t?t.end.row:r},this.getRowFoldStart=function(r,n){var t=this.getFoldLine(r,n);return t?t.start.row:r},this.getFoldDisplayLine=function(r,n,t,o,l){o==null&&(o=r.start.row),l==null&&(l=0),n==null&&(n=r.end.row),t==null&&(t=this.getLine(n).length);var p=this.doc,v="";return r.walk(function(k,D,_,M){if(!(D<o)){if(D==o){if(_<l)return;M=Math.max(l,M)}k!=null?v+=k:v+=p.getLine(D).substring(M,_)}},n,t),v},this.getDisplayLine=function(r,n,t,o){var l=this.getFoldLine(r);if(l)return this.getFoldDisplayLine(l,r,n,t,o);var p;return p=this.doc.getLine(r),p.substring(o||0,n||p.length)},this.$cloneFoldData=function(){var r=[];return r=this.$foldData.map(function(n){var t=n.folds.map(function(o){return o.clone()});return new $(r,t)}),r},this.toggleFold=function(r){var n=this.selection,t=n.getRange(),o,l;if(t.isEmpty()){var p=t.start;if(o=this.getFoldAt(p.row,p.column),o){this.expandFold(o);return}else(l=this.findMatchingBracket(p))?t.comparePoint(l)==1?t.end=l:(t.start=l,t.start.column++,t.end.column--):(l=this.findMatchingBracket({row:p.row,column:p.column+1}))?(t.comparePoint(l)==1?t.end=l:t.start=l,t.start.column++):t=this.getCommentFoldRange(p.row,p.column)||t}else{var v=this.getFoldsInRange(t);if(r&&v.length){this.expandFolds(v);return}else v.length==1&&(o=v[0])}if(o||(o=this.getFoldAt(t.start.row,t.start.column)),o&&o.range.toString()==t.toString()){this.expandFold(o);return}var k="...";if(!t.isMultiLine()){if(k=this.getTextRange(t),k.length<4)return;k=k.trim().substring(0,2)+".."}this.addFold(k,t)},this.getCommentFoldRange=function(r,n,t){var o=new h(this,r,n),l=o.getCurrentToken(),p=l&&l.type;if(l&&/^comment|string/.test(p)){p=p.match(/comment|string/)[0],p=="comment"&&(p+="|doc-start|\\.doc");var v=new RegExp(p),k=new b;if(t!=1){do l=o.stepBackward();while(l&&v.test(l.type)&&!/^comment.end/.test(l.type));l=o.stepForward()}if(k.start.row=o.getCurrentTokenRow(),k.start.column=o.getCurrentTokenColumn()+(/^comment.start/.test(l.type)?l.value.length:2),o=new h(this,r,n),t!=-1){var D=-1;do if(l=o.stepForward(),D==-1){var _=this.getState(o.$row);v.test(_)||(D=o.$row)}else if(o.$row>D)break;while(l&&v.test(l.type)&&!/^comment.start/.test(l.type));l=o.stepBackward()}else l=o.getCurrentToken();return k.end.row=o.getCurrentTokenRow(),k.end.column=o.getCurrentTokenColumn(),/^comment.end/.test(l.type)||(k.end.column+=l.value.length-2),k}},this.foldAll=function(r,n,t,o){t==null&&(t=1e5);var l=this.foldWidgets;if(l){n=n||this.getLength(),r=r||0;for(var p=r;p<n;p++)if(l[p]==null&&(l[p]=this.getFoldWidget(p)),l[p]=="start"&&!(o&&!o(p))){var v=this.getFoldWidgetRange(p);v&&v.isMultiLine()&&v.end.row<=n&&v.start.row>=r&&(p=v.end.row,v.collapseChildren=t,this.addFold("...",v))}}},this.foldToLevel=function(r){for(this.foldAll();r-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var r=this;this.foldAll(null,null,null,function(n){for(var t=r.getTokens(n),o=0;o<t.length;o++){var l=t[o];if(!(l.type=="text"&&/^\s+$/.test(l.value)))return!!/comment/.test(l.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(r){if(!this.$foldStyles[r])throw new Error("invalid fold style: "+r+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=r){this.$foldStyle=r,r=="manual"&&this.unfold();var n=this.$foldMode;this.$setFolding(null),this.$setFolding(n)}},this.$setFolding=function(r){if(this.$foldMode!=r){if(this.$foldMode=r,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!r||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=r.getFoldWidget.bind(r,this,this.$foldStyle),this.getFoldWidgetRange=r.getFoldWidgetRange.bind(r,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(r,n){var t=this.foldWidgets;if(!t||n&&t[r])return{};for(var o=r-1,l;o>=0;){var p=t[o];if(p==null&&(p=t[o]=this.getFoldWidget(o)),p=="start"){var v=this.getFoldWidgetRange(o);if(l||(l=v),v&&v.end.row>=r)break}o--}return{range:o!==-1&&v,firstRange:l}},this.onFoldWidgetClick=function(r,n){n instanceof d&&(n=n.domEvent);var t={children:n.shiftKey,all:n.ctrlKey||n.metaKey,siblings:n.altKey},o=this.$toggleFoldWidget(r,t);if(!o){var l=n.target||n.srcElement;l&&/ace_fold-widget/.test(l.className)&&(l.className+=" ace_invalid")}},this.$toggleFoldWidget=function(r,n){if(this.getFoldWidget){var t=this.getFoldWidget(r),o=this.getLine(r),l=t==="end"?-1:1,p=this.getFoldAt(r,l===-1?0:o.length,l);if(p)return n.children||n.all?this.removeFold(p):this.expandFold(p),p;var v=this.getFoldWidgetRange(r,!0);if(v&&!v.isMultiLine()&&(p=this.getFoldAt(v.start.row,v.start.column,1),p&&v.isEqual(p.range)))return this.removeFold(p),p;if(n.siblings){var k=this.getParentFoldRangeData(r);if(k.range)var D=k.range.start.row+1,_=k.range.end.row;this.foldAll(D,_,n.all?1e4:0)}else n.children?(_=v?v.end.row:this.getLength(),this.foldAll(r+1,_,n.all?1e4:0)):v&&(n.all&&(v.collapseChildren=1e4),this.addFold("...",v));return v}},this.toggleFoldWidget=function(r){var n=this.selection.getCursor().row;n=this.getRowFoldStart(n);var t=this.$toggleFoldWidget(n,{});if(!t){var o=this.getParentFoldRangeData(n,!0);if(t=o.range||o.firstRange,t){n=t.start.row;var l=this.getFoldAt(n,this.getLine(n).length,1);l?this.removeFold(l):this.addFold("...",t)}}},this.updateFoldWidgets=function(r){var n=r.start.row,t=r.end.row-n;if(t===0)this.foldWidgets[n]=null;else if(r.action=="remove")this.foldWidgets.splice(n,t+1,null);else{var o=Array(t+1);o.unshift(n,1),this.foldWidgets.splice.apply(this.foldWidgets,o)}},this.tokenizerUpdateFoldWidgets=function(r){var n=r.data;n.first!=n.last&&this.foldWidgets.length>n.first&&this.foldWidgets.splice(n.first,this.foldWidgets.length)}}f.Folding=i}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(s,f,C){var b=s("../token_iterator").TokenIterator,$=s("../range").Range;function w(){this.findMatchingBracket=function(h,d){if(h.column==0)return null;var i=d||this.getLine(h.row).charAt(h.column-1);if(i=="")return null;var r=i.match(/([\(\[\{])|([\)\]\}])/);return r?r[1]?this.$findClosingBracket(r[1],h):this.$findOpeningBracket(r[2],h):null},this.getBracketRange=function(h){var d=this.getLine(h.row),i=!0,r,n=d.charAt(h.column-1),t=n&&n.match(/([\(\[\{])|([\)\]\}])/);if(t||(n=d.charAt(h.column),h={row:h.row,column:h.column+1},t=n&&n.match(/([\(\[\{])|([\)\]\}])/),i=!1),!t)return null;if(t[1]){var o=this.$findClosingBracket(t[1],h);if(!o)return null;r=$.fromPoints(h,o),i||(r.end.column++,r.start.column--),r.cursor=r.end}else{var o=this.$findOpeningBracket(t[2],h);if(!o)return null;r=$.fromPoints(o,h),i||(r.start.column++,r.end.column--),r.cursor=r.start}return r},this.getMatchingBracketRanges=function(h,d){var i=this.getLine(h.row),r=/([\(\[\{])|([\)\]\}])/,n=!d&&i.charAt(h.column-1),t=n&&n.match(r);if(t||(n=(d===void 0||d)&&i.charAt(h.column),h={row:h.row,column:h.column+1},t=n&&n.match(r)),!t)return null;var o=new $(h.row,h.column-1,h.row,h.column),l=t[1]?this.$findClosingBracket(t[1],h):this.$findOpeningBracket(t[2],h);if(!l)return[o];var p=new $(l.row,l.column,l.row,l.column+1);return[o,p]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(h,d,i){var r=this.$brackets[h],n=1,t=new b(this,d.row,d.column),o=t.getCurrentToken();if(o||(o=t.stepForward()),!!o){i||(i=new RegExp("(\\.?"+o.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var l=d.column-t.getCurrentTokenColumn()-2,p=o.value;;){for(;l>=0;){var v=p.charAt(l);if(v==r){if(n-=1,n==0)return{row:t.getCurrentTokenRow(),column:l+t.getCurrentTokenColumn()}}else v==h&&(n+=1);l-=1}do o=t.stepBackward();while(o&&!i.test(o.type));if(o==null)break;p=o.value,l=p.length-1}return null}},this.$findClosingBracket=function(h,d,i){var r=this.$brackets[h],n=1,t=new b(this,d.row,d.column),o=t.getCurrentToken();if(o||(o=t.stepForward()),!!o){i||(i=new RegExp("(\\.?"+o.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var l=d.column-t.getCurrentTokenColumn();;){for(var p=o.value,v=p.length;l<v;){var k=p.charAt(l);if(k==r){if(n-=1,n==0)return{row:t.getCurrentTokenRow(),column:l+t.getCurrentTokenColumn()}}else k==h&&(n+=1);l+=1}do o=t.stepForward();while(o&&!i.test(o.type));if(o==null)break;l=0}return null}},this.getMatchingTags=function(h){var d=new b(this,h.row,h.column),i=this.$findTagName(d);if(i){var r=d.stepBackward();return r.value==="<"?this.$findClosingTag(d,i):this.$findOpeningTag(d,i)}},this.$findTagName=function(h){var d=h.getCurrentToken(),i=!1,r=!1;if(d&&d.type.indexOf("tag-name")===-1)do r?d=h.stepBackward():d=h.stepForward(),d&&(d.value==="/>"?r=!0:d.type.indexOf("tag-name")!==-1&&(i=!0));while(d&&!i);return d},this.$findClosingTag=function(h,d){var i,r=d.value,n=d.value,t=0,o=new $(h.getCurrentTokenRow(),h.getCurrentTokenColumn(),h.getCurrentTokenRow(),h.getCurrentTokenColumn()+1);d=h.stepForward();var l=new $(h.getCurrentTokenRow(),h.getCurrentTokenColumn(),h.getCurrentTokenRow(),h.getCurrentTokenColumn()+d.value.length),p=!1;do if(i=d,d=h.stepForward(),d){if(d.value===">"&&!p){var v=new $(h.getCurrentTokenRow(),h.getCurrentTokenColumn(),h.getCurrentTokenRow(),h.getCurrentTokenColumn()+1);p=!0}if(d.type.indexOf("tag-name")!==-1){if(r=d.value,n===r){if(i.value==="<")t++;else if(i.value==="</"&&(t--,t<0)){h.stepBackward();var k=new $(h.getCurrentTokenRow(),h.getCurrentTokenColumn(),h.getCurrentTokenRow(),h.getCurrentTokenColumn()+2);d=h.stepForward();var D=new $(h.getCurrentTokenRow(),h.getCurrentTokenColumn(),h.getCurrentTokenRow(),h.getCurrentTokenColumn()+d.value.length);if(d=h.stepForward(),d&&d.value===">")var _=new $(h.getCurrentTokenRow(),h.getCurrentTokenColumn(),h.getCurrentTokenRow(),h.getCurrentTokenColumn()+1);else return}}}else if(n===r&&d.value==="/>"&&(t--,t<0))var k=new $(h.getCurrentTokenRow(),h.getCurrentTokenColumn(),h.getCurrentTokenRow(),h.getCurrentTokenColumn()+2),D=k,_=D,v=new $(l.end.row,l.end.column,l.end.row,l.end.column+1)}while(d&&t>=0);if(o&&v&&k&&_&&l&&D)return{openTag:new $(o.start.row,o.start.column,v.end.row,v.end.column),closeTag:new $(k.start.row,k.start.column,_.end.row,_.end.column),openTagName:l,closeTagName:D}},this.$findOpeningTag=function(h,d){var i=h.getCurrentToken(),r=d.value,n=0,t=h.getCurrentTokenRow(),o=h.getCurrentTokenColumn(),l=o+2,p=new $(t,o,t,l);h.stepForward();var v=new $(h.getCurrentTokenRow(),h.getCurrentTokenColumn(),h.getCurrentTokenRow(),h.getCurrentTokenColumn()+d.value.length);if(d=h.stepForward(),!(!d||d.value!==">")){var k=new $(h.getCurrentTokenRow(),h.getCurrentTokenColumn(),h.getCurrentTokenRow(),h.getCurrentTokenColumn()+1);h.stepBackward(),h.stepBackward();do if(d=i,t=h.getCurrentTokenRow(),o=h.getCurrentTokenColumn(),l=o+d.value.length,i=h.stepBackward(),d){if(d.type.indexOf("tag-name")!==-1){if(r===d.value)if(i.value==="<"){if(n++,n>0){var D=new $(t,o,t,l),_=new $(h.getCurrentTokenRow(),h.getCurrentTokenColumn(),h.getCurrentTokenRow(),h.getCurrentTokenColumn()+1);do d=h.stepForward();while(d&&d.value!==">");var M=new $(h.getCurrentTokenRow(),h.getCurrentTokenColumn(),h.getCurrentTokenRow(),h.getCurrentTokenColumn()+1)}}else i.value==="</"&&n--}else if(d.value==="/>"){for(var A=0,F=i;F;){if(F.type.indexOf("tag-name")!==-1&&F.value===r){n--;break}else if(F.value==="<")break;F=h.stepBackward(),A++}for(var N=0;N<A;N++)h.stepForward()}}while(i&&n<=0);if(_&&M&&p&&k&&D&&v)return{openTag:new $(_.start.row,_.start.column,M.end.row,M.end.column),closeTag:new $(p.start.row,p.start.column,k.end.row,k.end.column),openTagName:D,closeTagName:v}}}}f.BracketMatch=w}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(s,f,C){var b=s("./lib/oop"),$=s("./lib/lang"),w=s("./bidihandler").BidiHandler,h=s("./config"),d=s("./lib/event_emitter").EventEmitter,i=s("./selection").Selection,r=s("./mode/text").Mode,n=s("./range").Range,t=s("./document").Document,o=s("./background_tokenizer").BackgroundTokenizer,l=s("./search_highlight").SearchHighlight,p=s("./undomanager").UndoManager,v=function(){function R(I,L){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++R.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new o(new r().getTokenizer(),this);var S=this;this.bgTokenizer.on("update",function(E){S._signal("tokenizerUpdate",E)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof I!="object"||!I.getLine)&&(I=new t(I)),this.setDocument(I),this.selection=new i(this),this.$bidiHandler=new w(this),h.resetOptions(this),this.setMode(L),h._signal("session",this),this.destroyed=!1}return R.prototype.setDocument=function(I){this.doc&&this.doc.off("change",this.$onChange),this.doc=I,I.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},R.prototype.getDocument=function(){return this.doc},R.prototype.$resetRowCache=function(I){if(!I){this.$docRowCache=[],this.$screenRowCache=[];return}var L=this.$docRowCache.length,S=this.$getRowCacheIndex(this.$docRowCache,I)+1;L>S&&(this.$docRowCache.splice(S,L),this.$screenRowCache.splice(S,L))},R.prototype.$getRowCacheIndex=function(I,L){for(var S=0,E=I.length-1;S<=E;){var T=S+E>>1,B=I[T];if(L>B)S=T+1;else if(L<B)E=T-1;else return T}return S-1},R.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},R.prototype.onChangeFold=function(I){var L=I.data;this.$resetRowCache(L.start.row)},R.prototype.onChange=function(I){this.$modified=!0,this.$bidiHandler.onChange(I),this.$resetRowCache(I.start.row);var L=this.$updateInternalDataOnChange(I);!this.$fromUndo&&this.$undoManager&&(L&&L.length&&(this.$undoManager.add({action:"removeFolds",folds:L},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(I,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(I),this._signal("change",I)},R.prototype.setValue=function(I){this.doc.setValue(I),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},R.fromJSON=function(I){I=JSON.parse(I);var L=new p;L.$undoStack=I.history.undo,L.$redoStack=I.history.redo,L.mark=I.history.mark,L.$rev=I.history.rev;var S=new R(I.value);return I.folds.forEach(function(E){S.addFold("...",n.fromPoints(E.start,E.end))}),S.setAnnotations(I.annotations),S.setBreakpoints(I.breakpoints),S.setMode(I.mode),S.setScrollLeft(I.scrollLeft),S.setScrollTop(I.scrollTop),S.setUndoManager(L),S.selection.fromJSON(I.selection),S},R.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(I){return I.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},R.prototype.toString=function(){return this.doc.getValue()},R.prototype.getSelection=function(){return this.selection},R.prototype.getState=function(I){return this.bgTokenizer.getState(I)},R.prototype.getTokens=function(I){return this.bgTokenizer.getTokens(I)},R.prototype.getTokenAt=function(I,L){var S=this.bgTokenizer.getTokens(I),E,T=0;if(L==null){var B=S.length-1;T=this.getLine(I).length}else for(var B=0;B<S.length&&(T+=S[B].value.length,!(T>=L));B++);return E=S[B],E?(E.index=B,E.start=T-E.value.length,E):null},R.prototype.setUndoManager=function(I){if(this.$undoManager=I,this.$informUndoManager&&this.$informUndoManager.cancel(),I){var L=this;I.addSession(this),this.$syncInformUndoManager=function(){L.$informUndoManager.cancel(),L.mergeUndoDeltas=!1},this.$informUndoManager=$.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},R.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},R.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},R.prototype.getTabString=function(){return this.getUseSoftTabs()?$.stringRepeat(" ",this.getTabSize()):"	"},R.prototype.setUseSoftTabs=function(I){this.setOption("useSoftTabs",I)},R.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},R.prototype.setTabSize=function(I){this.setOption("tabSize",I)},R.prototype.getTabSize=function(){return this.$tabSize},R.prototype.isTabStop=function(I){return this.$useSoftTabs&&I.column%this.$tabSize===0},R.prototype.setNavigateWithinSoftTabs=function(I){this.setOption("navigateWithinSoftTabs",I)},R.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},R.prototype.setOverwrite=function(I){this.setOption("overwrite",I)},R.prototype.getOverwrite=function(){return this.$overwrite},R.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},R.prototype.addGutterDecoration=function(I,L){this.$decorations[I]||(this.$decorations[I]=""),this.$decorations[I]+=" "+L,this._signal("changeBreakpoint",{})},R.prototype.removeGutterDecoration=function(I,L){this.$decorations[I]=(this.$decorations[I]||"").replace(" "+L,""),this._signal("changeBreakpoint",{})},R.prototype.getBreakpoints=function(){return this.$breakpoints},R.prototype.setBreakpoints=function(I){this.$breakpoints=[];for(var L=0;L<I.length;L++)this.$breakpoints[I[L]]="ace_breakpoint";this._signal("changeBreakpoint",{})},R.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},R.prototype.setBreakpoint=function(I,L){L===void 0&&(L="ace_breakpoint"),L?this.$breakpoints[I]=L:delete this.$breakpoints[I],this._signal("changeBreakpoint",{})},R.prototype.clearBreakpoint=function(I){delete this.$breakpoints[I],this._signal("changeBreakpoint",{})},R.prototype.addMarker=function(I,L,S,E){var T=this.$markerId++,B={range:I,type:S||"line",renderer:typeof S=="function"?S:null,clazz:L,inFront:!!E,id:T};return E?(this.$frontMarkers[T]=B,this._signal("changeFrontMarker")):(this.$backMarkers[T]=B,this._signal("changeBackMarker")),T},R.prototype.addDynamicMarker=function(I,L){if(I.update){var S=this.$markerId++;return I.id=S,I.inFront=!!L,L?(this.$frontMarkers[S]=I,this._signal("changeFrontMarker")):(this.$backMarkers[S]=I,this._signal("changeBackMarker")),I}},R.prototype.removeMarker=function(I){var L=this.$frontMarkers[I]||this.$backMarkers[I];if(L){var S=L.inFront?this.$frontMarkers:this.$backMarkers;delete S[I],this._signal(L.inFront?"changeFrontMarker":"changeBackMarker")}},R.prototype.getMarkers=function(I){return I?this.$frontMarkers:this.$backMarkers},R.prototype.highlight=function(I){if(!this.$searchHighlight){var L=new l(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(L)}this.$searchHighlight.setRegexp(I)},R.prototype.highlightLines=function(I,L,S,E){typeof L!="number"&&(S=L,L=I),S||(S="ace_step");var T=new n(I,0,L,1/0);return T.id=this.addMarker(T,S,"fullLine",E),T},R.prototype.setAnnotations=function(I){this.$annotations=I,this._signal("changeAnnotation",{})},R.prototype.getAnnotations=function(){return this.$annotations||[]},R.prototype.clearAnnotations=function(){this.setAnnotations([])},R.prototype.$detectNewLine=function(I){var L=I.match(/^.*?(\r?\n)/m);L?this.$autoNewLine=L[1]:this.$autoNewLine=`
`},R.prototype.getWordRange=function(I,L){var S=this.getLine(I),E=!1;if(L>0&&(E=!!S.charAt(L-1).match(this.tokenRe)),E||(E=!!S.charAt(L).match(this.tokenRe)),E)var T=this.tokenRe;else if(/^\s+$/.test(S.slice(L-1,L+1)))var T=/\s/;else var T=this.nonTokenRe;var B=L;if(B>0){do B--;while(B>=0&&S.charAt(B).match(T));B++}for(var P=L;P<S.length&&S.charAt(P).match(T);)P++;return new n(I,B,I,P)},R.prototype.getAWordRange=function(I,L){for(var S=this.getWordRange(I,L),E=this.getLine(S.end.row);E.charAt(S.end.column).match(/[ \t]/);)S.end.column+=1;return S},R.prototype.setNewLineMode=function(I){this.doc.setNewLineMode(I)},R.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},R.prototype.setUseWorker=function(I){this.setOption("useWorker",I)},R.prototype.getUseWorker=function(){return this.$useWorker},R.prototype.onReloadTokenizer=function(I){var L=I.data;this.bgTokenizer.start(L.first),this._signal("tokenizerUpdate",I)},R.prototype.setMode=function(I,L){if(I&&typeof I=="object"){if(I.getTokenizer)return this.$onChangeMode(I);var S=I,E=S.path}else E=I||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new r),this.$modes[E]&&!S){this.$onChangeMode(this.$modes[E]),L&&L();return}this.$modeId=E,h.loadModule(["mode",E],(function(T){if(this.$modeId!==E)return L&&L();this.$modes[E]&&!S?this.$onChangeMode(this.$modes[E]):T&&T.Mode&&(T=new T.Mode(S),S||(this.$modes[E]=T,T.$id=E),this.$onChangeMode(T)),L&&L()}).bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},R.prototype.$onChangeMode=function(I,L){if(L||(this.$modeId=I.$id),this.$mode!==I){var S=this.$mode;this.$mode=I,this.$stopWorker(),this.$useWorker&&this.$startWorker();var E=I.getTokenizer();if(E.on!==void 0){var T=this.onReloadTokenizer.bind(this);E.on("update",T)}this.bgTokenizer.setTokenizer(E),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=I.tokenRe,this.nonTokenRe=I.nonTokenRe,L||(I.attachToSession&&I.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(I.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:S,mode:I}))}},R.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},R.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(I){h.warn("Could not load worker",I),this.$worker=null}},R.prototype.getMode=function(){return this.$mode},R.prototype.setScrollTop=function(I){this.$scrollTop===I||isNaN(I)||(this.$scrollTop=I,this._signal("changeScrollTop",I))},R.prototype.getScrollTop=function(){return this.$scrollTop},R.prototype.setScrollLeft=function(I){this.$scrollLeft===I||isNaN(I)||(this.$scrollLeft=I,this._signal("changeScrollLeft",I))},R.prototype.getScrollLeft=function(){return this.$scrollLeft},R.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},R.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var I=0;return this.lineWidgets.forEach(function(L){L&&L.screenWidth>I&&(I=L.screenWidth)}),this.lineWidgetWidth=I},R.prototype.$computeWidth=function(I){if(this.$modified||I){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var L=this.doc.getAllLines(),S=this.$rowLengthCache,E=0,T=0,B=this.$foldData[T],P=B?B.start.row:1/0,W=L.length,z=0;z<W;z++){if(z>P){if(z=B.end.row+1,z>=W)break;B=this.$foldData[T++],P=B?B.start.row:1/0}S[z]==null&&(S[z]=this.$getStringScreenWidth(L[z])[0]),S[z]>E&&(E=S[z])}this.screenWidth=E}},R.prototype.getLine=function(I){return this.doc.getLine(I)},R.prototype.getLines=function(I,L){return this.doc.getLines(I,L)},R.prototype.getLength=function(){return this.doc.getLength()},R.prototype.getTextRange=function(I){return this.doc.getTextRange(I||this.selection.getRange())},R.prototype.insert=function(I,L){return this.doc.insert(I,L)},R.prototype.remove=function(I){return this.doc.remove(I)},R.prototype.removeFullLines=function(I,L){return this.doc.removeFullLines(I,L)},R.prototype.undoChanges=function(I,L){if(I.length){this.$fromUndo=!0;for(var S=I.length-1;S!=-1;S--){var E=I[S];E.action=="insert"||E.action=="remove"?this.doc.revertDelta(E):E.folds&&this.addFolds(E.folds)}!L&&this.$undoSelect&&(I.selectionBefore?this.selection.fromJSON(I.selectionBefore):this.selection.setRange(this.$getUndoSelection(I,!0))),this.$fromUndo=!1}},R.prototype.redoChanges=function(I,L){if(I.length){this.$fromUndo=!0;for(var S=0;S<I.length;S++){var E=I[S];(E.action=="insert"||E.action=="remove")&&this.doc.$safeApplyDelta(E)}!L&&this.$undoSelect&&(I.selectionAfter?this.selection.fromJSON(I.selectionAfter):this.selection.setRange(this.$getUndoSelection(I,!1))),this.$fromUndo=!1}},R.prototype.setUndoSelect=function(I){this.$undoSelect=I},R.prototype.$getUndoSelection=function(I,L){function S(W){return L?W.action!=="insert":W.action==="insert"}for(var E,T,B=0;B<I.length;B++){var P=I[B];if(P.start){if(!E){S(P)?E=n.fromPoints(P.start,P.end):E=n.fromPoints(P.start,P.start);continue}S(P)?(T=P.start,E.compare(T.row,T.column)==-1&&E.setStart(T),T=P.end,E.compare(T.row,T.column)==1&&E.setEnd(T)):(T=P.start,E.compare(T.row,T.column)==-1&&(E=n.fromPoints(P.start,P.start)))}}return E},R.prototype.replace=function(I,L){return this.doc.replace(I,L)},R.prototype.moveText=function(I,L,S){var E=this.getTextRange(I),T=this.getFoldsInRange(I),B=n.fromPoints(L,L);if(!S){this.remove(I);var P=I.start.row-I.end.row,W=P?-I.end.column:I.start.column-I.end.column;W&&(B.start.row==I.end.row&&B.start.column>I.end.column&&(B.start.column+=W),B.end.row==I.end.row&&B.end.column>I.end.column&&(B.end.column+=W)),P&&B.start.row>=I.end.row&&(B.start.row+=P,B.end.row+=P)}if(B.end=this.insert(B.start,E),T.length){var z=I.start,U=B.start,P=U.row-z.row,W=U.column-z.column;this.addFolds(T.map(function(G){return G=G.clone(),G.start.row==z.row&&(G.start.column+=W),G.end.row==z.row&&(G.end.column+=W),G.start.row+=P,G.end.row+=P,G}))}return B},R.prototype.indentRows=function(I,L,S){S=S.replace(/\t/g,this.getTabString());for(var E=I;E<=L;E++)this.doc.insertInLine({row:E,column:0},S)},R.prototype.outdentRows=function(I){for(var L=I.collapseRows(),S=new n(0,0,0,0),E=this.getTabSize(),T=L.start.row;T<=L.end.row;++T){var B=this.getLine(T);S.start.row=T,S.end.row=T;for(var P=0;P<E&&B.charAt(P)==" ";++P);P<E&&B.charAt(P)=="	"?(S.start.column=P,S.end.column=P+1):(S.start.column=0,S.end.column=P),this.remove(S)}},R.prototype.$moveLines=function(I,L,S){if(I=this.getRowFoldStart(I),L=this.getRowFoldEnd(L),S<0){var E=this.getRowFoldStart(I+S);if(E<0)return 0;var T=E-I}else if(S>0){var E=this.getRowFoldEnd(L+S);if(E>this.doc.getLength()-1)return 0;var T=E-L}else{I=this.$clipRowToDocument(I),L=this.$clipRowToDocument(L);var T=L-I+1}var B=new n(I,0,L,Number.MAX_VALUE),P=this.getFoldsInRange(B).map(function(z){return z=z.clone(),z.start.row+=T,z.end.row+=T,z}),W=S==0?this.doc.getLines(I,L):this.doc.removeFullLines(I,L);return this.doc.insertFullLines(I+T,W),P.length&&this.addFolds(P),T},R.prototype.moveLinesUp=function(I,L){return this.$moveLines(I,L,-1)},R.prototype.moveLinesDown=function(I,L){return this.$moveLines(I,L,1)},R.prototype.duplicateLines=function(I,L){return this.$moveLines(I,L,0)},R.prototype.$clipRowToDocument=function(I){return Math.max(0,Math.min(I,this.doc.getLength()-1))},R.prototype.$clipColumnToRow=function(I,L){return L<0?0:Math.min(this.doc.getLine(I).length,L)},R.prototype.$clipPositionToDocument=function(I,L){if(L=Math.max(0,L),I<0)I=0,L=0;else{var S=this.doc.getLength();I>=S?(I=S-1,L=this.doc.getLine(S-1).length):L=Math.min(this.doc.getLine(I).length,L)}return{row:I,column:L}},R.prototype.$clipRangeToDocument=function(I){I.start.row<0?(I.start.row=0,I.start.column=0):I.start.column=this.$clipColumnToRow(I.start.row,I.start.column);var L=this.doc.getLength()-1;return I.end.row>L?(I.end.row=L,I.end.column=this.doc.getLine(L).length):I.end.column=this.$clipColumnToRow(I.end.row,I.end.column),I},R.prototype.setUseWrapMode=function(I){if(I!=this.$useWrapMode){if(this.$useWrapMode=I,this.$modified=!0,this.$resetRowCache(0),I){var L=this.getLength();this.$wrapData=Array(L),this.$updateWrapData(0,L-1)}this._signal("changeWrapMode")}},R.prototype.getUseWrapMode=function(){return this.$useWrapMode},R.prototype.setWrapLimitRange=function(I,L){(this.$wrapLimitRange.min!==I||this.$wrapLimitRange.max!==L)&&(this.$wrapLimitRange={min:I,max:L},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},R.prototype.adjustWrapLimit=function(I,L){var S=this.$wrapLimitRange;S.max<0&&(S={min:L,max:L});var E=this.$constrainWrapLimit(I,S.min,S.max);return E!=this.$wrapLimit&&E>1?(this.$wrapLimit=E,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},R.prototype.$constrainWrapLimit=function(I,L,S){return L&&(I=Math.max(L,I)),S&&(I=Math.min(S,I)),I},R.prototype.getWrapLimit=function(){return this.$wrapLimit},R.prototype.setWrapLimit=function(I){this.setWrapLimitRange(I,I)},R.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},R.prototype.$updateInternalDataOnChange=function(I){var L=this.$useWrapMode,S=I.action,E=I.start,T=I.end,B=E.row,P=T.row,W=P-B,z=null;if(this.$updating=!0,W!=0)if(S==="remove"){this[L?"$wrapData":"$rowLengthCache"].splice(B,W);var U=this.$foldData;z=this.getFoldsInRange(I),this.removeFolds(z);var j=this.getFoldLine(T.row),V=0;if(j){j.addRemoveChars(T.row,T.column,E.column-T.column),j.shiftRow(-W);var G=this.getFoldLine(B);G&&G!==j&&(G.merge(j),j=G),V=U.indexOf(j)+1}for(V;V<U.length;V++){var j=U[V];j.start.row>=T.row&&j.shiftRow(-W)}P=B}else{var K=Array(W);K.unshift(B,0);var Y=L?this.$wrapData:this.$rowLengthCache;Y.splice.apply(Y,K);var U=this.$foldData,j=this.getFoldLine(B),V=0;if(j){var Q=j.range.compareInside(E.row,E.column);Q==0?(j=j.split(E.row,E.column),j&&(j.shiftRow(W),j.addRemoveChars(P,0,T.column-E.column))):Q==-1&&(j.addRemoveChars(B,0,T.column-E.column),j.shiftRow(W)),V=U.indexOf(j)+1}for(V;V<U.length;V++){var j=U[V];j.start.row>=B&&j.shiftRow(W)}}else{W=Math.abs(I.start.column-I.end.column),S==="remove"&&(z=this.getFoldsInRange(I),this.removeFolds(z),W=-W);var j=this.getFoldLine(B);j&&j.addRemoveChars(B,E.column,W)}return L&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,L?this.$updateWrapData(B,P):this.$updateRowLengthCache(B,P),z},R.prototype.$updateRowLengthCache=function(I,L,S){this.$rowLengthCache[I]=null,this.$rowLengthCache[L]=null},R.prototype.$updateWrapData=function(I,L){var S=this.doc.getAllLines(),E=this.getTabSize(),T=this.$wrapData,B=this.$wrapLimit,P,W,z=I;for(L=Math.min(L,S.length-1);z<=L;)W=this.getFoldLine(z,W),W?(P=[],W.walk((function(U,j,V,G){var K;if(U!=null){K=this.$getDisplayTokens(U,P.length),K[0]=_;for(var Y=1;Y<K.length;Y++)K[Y]=M}else K=this.$getDisplayTokens(S[j].substring(G,V),P.length);P=P.concat(K)}).bind(this),W.end.row,S[W.end.row].length+1),T[W.start.row]=this.$computeWrapSplits(P,B,E),z=W.end.row+1):(P=this.$getDisplayTokens(S[z]),T[z]=this.$computeWrapSplits(P,B,E),z++)},R.prototype.$computeWrapSplits=function(I,L,S){if(I.length==0)return[];var E=[],T=I.length,B=0,P=0,W=this.$wrapAsCode,z=this.$indentedSoftWrap,U=L<=Math.max(2*S,8)||z===!1?0:Math.floor(L/2);function j(){var Q=0;if(U===0)return Q;if(z)for(var Z=0;Z<I.length;Z++){var J=I[Z];if(J==F)Q+=1;else if(J==N)Q+=S;else{if(J==O)continue;break}}return W&&z!==!1&&(Q+=S),Math.min(Q,U)}function V(Q){for(var Z=Q-B,J=B;J<Q;J++){var q=I[J];(q===12||q===2)&&(Z-=1)}E.length||(G=j(),E.indent=G),P+=Z,E.push(P),B=Q}for(var G=0;T-B>L-G;){var K=B+L-G;if(I[K-1]>=F&&I[K]>=F){V(K);continue}if(I[K]==_||I[K]==M){for(K;K!=B-1&&I[K]!=_;K--);if(K>B){V(K);continue}for(K=B+L,K;K<I.length&&I[K]==M;K++);if(K==I.length)break;V(K);continue}for(var Y=Math.max(K-(L-(L>>2)),B-1);K>Y&&I[K]<_;)K--;if(W){for(;K>Y&&I[K]<_;)K--;for(;K>Y&&I[K]==A;)K--}else for(;K>Y&&I[K]<F;)K--;if(K>Y){V(++K);continue}K=B+L,I[K]==D&&K--,V(K-G)}return E},R.prototype.$getDisplayTokens=function(I,L){var S=[],E;L=L||0;for(var T=0;T<I.length;T++){var B=I.charCodeAt(T);if(B==9){E=this.getScreenTabSize(S.length+L),S.push(N);for(var P=1;P<E;P++)S.push(O)}else B==32?S.push(F):B>39&&B<48||B>57&&B<64?S.push(A):B>=4352&&H(B)?S.push(k,D):S.push(k)}return S},R.prototype.$getStringScreenWidth=function(I,L,S){if(L==0)return[0,0];L==null&&(L=1/0),S=S||0;var E,T;for(T=0;T<I.length&&(E=I.charCodeAt(T),E==9?S+=this.getScreenTabSize(S):E>=4352&&H(E)?S+=2:S+=1,!(S>L));T++);return[S,T]},R.prototype.getRowLength=function(I){var L=1;return this.lineWidgets&&(L+=this.lineWidgets[I]&&this.lineWidgets[I].rowCount||0),!this.$useWrapMode||!this.$wrapData[I]?L:this.$wrapData[I].length+L},R.prototype.getRowLineCount=function(I){return!this.$useWrapMode||!this.$wrapData[I]?1:this.$wrapData[I].length+1},R.prototype.getRowWrapIndent=function(I){if(this.$useWrapMode){var L=this.screenToDocumentPosition(I,Number.MAX_VALUE),S=this.$wrapData[L.row];return S.length&&S[0]<L.column?S.indent:0}else return 0},R.prototype.getScreenLastRowColumn=function(I){var L=this.screenToDocumentPosition(I,Number.MAX_VALUE);return this.documentToScreenColumn(L.row,L.column)},R.prototype.getDocumentLastRowColumn=function(I,L){var S=this.documentToScreenRow(I,L);return this.getScreenLastRowColumn(S)},R.prototype.getDocumentLastRowColumnPosition=function(I,L){var S=this.documentToScreenRow(I,L);return this.screenToDocumentPosition(S,Number.MAX_VALUE/10)},R.prototype.getRowSplitData=function(I){if(this.$useWrapMode)return this.$wrapData[I]},R.prototype.getScreenTabSize=function(I){return this.$tabSize-(I%this.$tabSize|0)},R.prototype.screenToDocumentRow=function(I,L){return this.screenToDocumentPosition(I,L).row},R.prototype.screenToDocumentColumn=function(I,L){return this.screenToDocumentPosition(I,L).column},R.prototype.screenToDocumentPosition=function(I,L,S){if(I<0)return{row:0,column:0};var E,T=0,B=0,P,W=0,z=0,U=this.$screenRowCache,j=this.$getRowCacheIndex(U,I),V=U.length;if(V&&j>=0)var W=U[j],T=this.$docRowCache[j],G=I>U[V-1];else var G=!V;for(var K=this.getLength()-1,Y=this.getNextFoldLine(T),Q=Y?Y.start.row:1/0;W<=I&&(z=this.getRowLength(T),!(W+z>I||T>=K));)W+=z,T++,T>Q&&(T=Y.end.row+1,Y=this.getNextFoldLine(T,Y),Q=Y?Y.start.row:1/0),G&&(this.$docRowCache.push(T),this.$screenRowCache.push(W));if(Y&&Y.start.row<=T)E=this.getFoldDisplayLine(Y),T=Y.start.row;else{if(W+z<=I||T>K)return{row:K,column:this.getLine(K).length};E=this.getLine(T),Y=null}var Z=0,J=Math.floor(I-W);if(this.$useWrapMode){var q=this.$wrapData[T];q&&(P=q[J],J>0&&q.length&&(Z=q.indent,B=q[J-1]||q[q.length-1],E=E.substring(B)))}return S!==void 0&&this.$bidiHandler.isBidiRow(W+J,T,J)&&(L=this.$bidiHandler.offsetToCol(S)),B+=this.$getStringScreenWidth(E,L-Z)[1],this.$useWrapMode&&B>=P&&(B=P-1),Y?Y.idxToPosition(B):{row:T,column:B}},R.prototype.documentToScreenPosition=function(I,L){if(typeof L>"u")var S=this.$clipPositionToDocument(I.row,I.column);else S=this.$clipPositionToDocument(I,L);I=S.row,L=S.column;var E=0,T=null,B=null;B=this.getFoldAt(I,L,1),B&&(I=B.start.row,L=B.start.column);var P,W=0,z=this.$docRowCache,U=this.$getRowCacheIndex(z,I),j=z.length;if(j&&U>=0)var W=z[U],E=this.$screenRowCache[U],V=I>z[j-1];else var V=!j;for(var G=this.getNextFoldLine(W),K=G?G.start.row:1/0;W<I;){if(W>=K){if(P=G.end.row+1,P>I)break;G=this.getNextFoldLine(P,G),K=G?G.start.row:1/0}else P=W+1;E+=this.getRowLength(W),W=P,V&&(this.$docRowCache.push(W),this.$screenRowCache.push(E))}var Y="";G&&W>=K?(Y=this.getFoldDisplayLine(G,I,L),T=G.start.row):(Y=this.getLine(I).substring(0,L),T=I);var Q=0;if(this.$useWrapMode){var Z=this.$wrapData[T];if(Z){for(var J=0;Y.length>=Z[J];)E++,J++;Y=Y.substring(Z[J-1]||0,Y.length),Q=J>0?Z.indent:0}}return this.lineWidgets&&this.lineWidgets[W]&&this.lineWidgets[W].rowsAbove&&(E+=this.lineWidgets[W].rowsAbove),{row:E,column:Q+this.$getStringScreenWidth(Y)[0]}},R.prototype.documentToScreenColumn=function(I,L){return this.documentToScreenPosition(I,L).column},R.prototype.documentToScreenRow=function(I,L){return this.documentToScreenPosition(I,L).row},R.prototype.getScreenLength=function(){var I=0,L=null;if(this.$useWrapMode)for(var T=this.$wrapData.length,B=0,E=0,L=this.$foldData[E++],P=L?L.start.row:1/0;B<T;){var W=this.$wrapData[B];I+=W?W.length+1:1,B++,B>P&&(B=L.end.row+1,L=this.$foldData[E++],P=L?L.start.row:1/0)}else{I=this.getLength();for(var S=this.$foldData,E=0;E<S.length;E++)L=S[E],I-=L.end.row-L.start.row}return this.lineWidgets&&(I+=this.$getWidgetScreenLength()),I},R.prototype.$setFontMetrics=function(I){this.$enableVarChar&&(this.$getStringScreenWidth=function(L,S,E){if(S===0)return[0,0];S||(S=1/0),E=E||0;var T,B;for(B=0;B<L.length&&(T=L.charAt(B),T==="	"?E+=this.getScreenTabSize(E):E+=I.getCharacterWidth(T),!(E>S));B++);return[E,B]})},R.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},R}();v.$uid=0,v.prototype.$modes=h.$modes,v.prototype.getValue=v.prototype.toString,v.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},v.prototype.$overwrite=!1,v.prototype.$mode=null,v.prototype.$modeId=null,v.prototype.$scrollTop=0,v.prototype.$scrollLeft=0,v.prototype.$wrapLimit=80,v.prototype.$useWrapMode=!1,v.prototype.$wrapLimitRange={min:null,max:null},v.prototype.lineWidgets=null,v.prototype.isFullWidth=H,b.implement(v.prototype,d);var k=1,D=2,_=3,M=4,A=9,F=10,N=11,O=12;function H(R){return R<4352?!1:R>=4352&&R<=4447||R>=4515&&R<=4519||R>=4602&&R<=4607||R>=9001&&R<=9002||R>=11904&&R<=11929||R>=11931&&R<=12019||R>=12032&&R<=12245||R>=12272&&R<=12283||R>=12288&&R<=12350||R>=12353&&R<=12438||R>=12441&&R<=12543||R>=12549&&R<=12589||R>=12593&&R<=12686||R>=12688&&R<=12730||R>=12736&&R<=12771||R>=12784&&R<=12830||R>=12832&&R<=12871||R>=12880&&R<=13054||R>=13056&&R<=19903||R>=19968&&R<=42124||R>=42128&&R<=42182||R>=43360&&R<=43388||R>=44032&&R<=55203||R>=55216&&R<=55238||R>=55243&&R<=55291||R>=63744&&R<=64255||R>=65040&&R<=65049||R>=65072&&R<=65106||R>=65108&&R<=65126||R>=65128&&R<=65131||R>=65281&&R<=65376||R>=65504&&R<=65510}s("./edit_session/folding").Folding.call(v.prototype),s("./edit_session/bracket_match").BracketMatch.call(v.prototype),h.defineOptions(v.prototype,"session",{wrap:{set:function(R){if(!R||R=="off"?R=!1:R=="free"?R=!0:R=="printMargin"?R=-1:typeof R=="string"&&(R=parseInt(R,10)||!1),this.$wrap!=R)if(this.$wrap=R,!R)this.setUseWrapMode(!1);else{var I=typeof R=="number"?R:null;this.setWrapLimitRange(I,I),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(R){R=R=="auto"?this.$mode.type!="text":R!="text",R!=this.$wrapAsCode&&(this.$wrapAsCode=R,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(R){this.$useWorker=R,this.$stopWorker(),R&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(R){R=parseInt(R),R>0&&this.$tabSize!==R&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=R,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(R){this.setFoldStyle(R)},handlesSet:!0},overwrite:{set:function(R){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(R){this.doc.setNewLineMode(R)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(R){this.setMode(R)},get:function(){return this.$modeId},handlesSet:!0}}),f.EditSession=v}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(s,f,C){var b=s("./lib/lang"),$=s("./lib/oop"),w=s("./range").Range,h=function(){function i(){this.$options={}}return i.prototype.set=function(r){return $.mixin(this.$options,r),this},i.prototype.getOptions=function(){return b.copyObject(this.$options)},i.prototype.setOptions=function(r){this.$options=r},i.prototype.find=function(r){var n=this.$options,t=this.$matchIterator(r,n);if(!t)return!1;var o=null;return t.forEach(function(l,p,v,k){return o=new w(l,p,v,k),p==k&&n.start&&n.start.start&&n.skipCurrent!=!1&&o.isEqual(n.start)?(o=null,!1):!0}),o},i.prototype.findAll=function(r){var n=this.$options;if(!n.needle)return[];this.$assembleRegExp(n);var t=n.range,o=t?r.getLines(t.start.row,t.end.row):r.doc.getAllLines(),l=[],p=n.re;if(n.$isMultiLine){var v=p.length,k=o.length-v,D;e:for(var _=p.offset||0;_<=k;_++){for(var M=0;M<v;M++)if(o[_+M].search(p[M])==-1)continue e;var A=o[_],F=o[_+v-1],N=A.length-A.match(p[0])[0].length,O=F.match(p[v-1])[0].length;D&&D.end.row===_&&D.end.column>N||(l.push(D=new w(_,N,_+v-1,O)),v>2&&(_=_+v-2))}}else for(var H=0;H<o.length;H++)for(var R=b.getMatchOffsets(o[H],p),M=0;M<R.length;M++){var I=R[M];l.push(new w(H,I.offset,H,I.offset+I.length))}if(t){for(var L=t.start.column,S=t.end.column,H=0,M=l.length-1;H<M&&l[H].start.column<L&&l[H].start.row==0;)H++;for(var E=t.end.row-t.start.row;H<M&&l[M].end.column>S&&l[M].end.row==E;)M--;for(l=l.slice(H,M+1),H=0,M=l.length;H<M;H++)l[H].start.row+=t.start.row,l[H].end.row+=t.start.row}return l},i.prototype.replace=function(r,n){var t=this.$options,o=this.$assembleRegExp(t);if(t.$isMultiLine)return n;if(o){var l=o.exec(r);if(!l||l[0].length!=r.length)return null;if(n=r.replace(o,n),t.preserveCase){n=n.split("");for(var p=Math.min(r.length,r.length);p--;){var v=r[p];v&&v.toLowerCase()!=v?n[p]=n[p].toUpperCase():n[p]=n[p].toLowerCase()}n=n.join("")}return n}},i.prototype.$assembleRegExp=function(r,n){if(r.needle instanceof RegExp)return r.re=r.needle;var t=r.needle;if(!r.needle)return r.re=!1;r.$supportsUnicodeFlag===void 0&&(r.$supportsUnicodeFlag=b.supportsUnicodeFlag());try{new RegExp(t,"u")}catch{r.$supportsUnicodeFlag=!1}r.regExp||(t=b.escapeRegExp(t)),r.wholeWord&&(t=d(t,r));var o=r.caseSensitive?"gm":"gmi";if(r.$supportsUnicodeFlag&&(o+="u"),r.$isMultiLine=!n&&/[\n\r]/.test(t),r.$isMultiLine)return r.re=this.$assembleMultilineRegExp(t,o);try{var l=new RegExp(t,o)}catch{l=!1}return r.re=l},i.prototype.$assembleMultilineRegExp=function(r,n){for(var t=r.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),o=[],l=0;l<t.length;l++)try{o.push(new RegExp(t[l],n))}catch{return!1}return o},i.prototype.$matchIterator=function(r,n){var t=this.$assembleRegExp(n);if(!t)return!1;var o=n.backwards==!0,l=n.skipCurrent!=!1,p=n.range,v=n.start;v||(v=p?p[o?"end":"start"]:r.selection.getRange()),v.start&&(v=v[l!=o?"end":"start"]);var k=p?p.start.row:0,D=p?p.end.row:r.getLength()-1;if(o)var _=function(F){var N=v.row;if(!A(N,v.column,F)){for(N--;N>=k;N--)if(A(N,Number.MAX_VALUE,F))return;if(n.wrap!=!1){for(N=D,k=v.row;N>=k;N--)if(A(N,Number.MAX_VALUE,F))return}}};else var _=function(N){var O=v.row;if(!A(O,v.column,N)){for(O=O+1;O<=D;O++)if(A(O,0,N))return;if(n.wrap!=!1){for(O=k,D=v.row;O<=D;O++)if(A(O,0,N))return}}};if(n.$isMultiLine)var M=t.length,A=function(F,N,O){var H=o?F-M+1:F;if(!(H<0||H+M>r.getLength())){var R=r.getLine(H),I=R.search(t[0]);if(!(!o&&I<N||I===-1)){for(var L=1;L<M;L++)if(R=r.getLine(H+L),R.search(t[L])==-1)return;var S=R.match(t[M-1])[0].length;if(!(o&&S>N)&&O(H,I,H+M-1,S))return!0}}};else if(o)var A=function(N,O,H){var R=r.getLine(N),I=[],L,S=0;for(t.lastIndex=0;L=t.exec(R);){var E=L[0].length;if(S=L.index,!E){if(S>=R.length)break;t.lastIndex=S+=1}if(L.index+E>O)break;I.push(L.index,E)}for(var T=I.length-1;T>=0;T-=2){var B=I[T-1],E=I[T];if(H(N,B,N,B+E))return!0}};else var A=function(N,O,H){var R=r.getLine(N),I,L;for(t.lastIndex=O;L=t.exec(R);){var S=L[0].length;if(I=L.index,H(N,I,N,I+S))return!0;if(!S&&(t.lastIndex=I+=1,I>=R.length))return!1}};return{forEach:_}},i}();function d(i,r){var n=b.supportsLookbehind();function t(v,k){k===void 0&&(k=!0);var D=n&&r.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return D.test(v)||r.regExp?n&&r.$supportsUnicodeFlag?k?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var o=Array.from(i),l=o[0],p=o[o.length-1];return t(l)+i+t(p,!1)}f.Search=h}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(s,f,C){var b=this&&this.__extends||function(){var n=function(t,o){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(l[v]=p[v])},n(t,o)};return function(t,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");n(t,o);function l(){this.constructor=t}t.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)}}(),$=s("../lib/keys"),w=s("../lib/useragent"),h=$.KEY_MODS,d=function(){function n(t,o){this.$init(t,o,!1)}return n.prototype.$init=function(t,o,l){this.platform=o||(w.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(t),this.$singleCommand=l},n.prototype.addCommand=function(t){this.commands[t.name]&&this.removeCommand(t),this.commands[t.name]=t,t.bindKey&&this._buildKeyHash(t)},n.prototype.removeCommand=function(t,o){var l=t&&(typeof t=="string"?t:t.name);t=this.commands[l],o||delete this.commands[l];var p=this.commandKeyBinding;for(var v in p){var k=p[v];if(k==t)delete p[v];else if(Array.isArray(k)){var D=k.indexOf(t);D!=-1&&(k.splice(D,1),k.length==1&&(p[v]=k[0]))}}},n.prototype.bindKey=function(t,o,l){if(typeof t=="object"&&t&&(l==null&&(l=t.position),t=t[this.platform]),!!t){if(typeof o=="function")return this.addCommand({exec:o,bindKey:t,name:o.name||t});t.split("|").forEach(function(p){var v="";if(p.indexOf(" ")!=-1){var k=p.split(/\s+/);p=k.pop(),k.forEach(function(M){var A=this.parseKeys(M),F=h[A.hashId]+A.key;v+=(v?" ":"")+F,this._addCommandToBinding(v,"chainKeys")},this),v+=" "}var D=this.parseKeys(p),_=h[D.hashId]+D.key;this._addCommandToBinding(v+_,o,l)},this)}},n.prototype._addCommandToBinding=function(t,o,l){var p=this.commandKeyBinding,v;if(!o)delete p[t];else if(!p[t]||this.$singleCommand)p[t]=o;else{Array.isArray(p[t])?(v=p[t].indexOf(o))!=-1&&p[t].splice(v,1):p[t]=[p[t]],typeof l!="number"&&(l=i(o));var k=p[t];for(v=0;v<k.length;v++){var D=k[v],_=i(D);if(_>l)break}k.splice(v,0,o)}},n.prototype.addCommands=function(t){t&&Object.keys(t).forEach(function(o){var l=t[o];if(l){if(typeof l=="string")return this.bindKey(l,o);typeof l=="function"&&(l={exec:l}),typeof l=="object"&&(l.name||(l.name=o),this.addCommand(l))}},this)},n.prototype.removeCommands=function(t){Object.keys(t).forEach(function(o){this.removeCommand(t[o])},this)},n.prototype.bindKeys=function(t){Object.keys(t).forEach(function(o){this.bindKey(o,t[o])},this)},n.prototype._buildKeyHash=function(t){this.bindKey(t.bindKey,t)},n.prototype.parseKeys=function(t){var o=t.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(_){return _}),l=o.pop(),p=$[l];if($.FUNCTION_KEYS[p])l=$.FUNCTION_KEYS[p].toLowerCase();else if(o.length){if(o.length==1&&o[0]=="shift")return{key:l.toUpperCase(),hashId:-1}}else return{key:l,hashId:-1};for(var v=0,k=o.length;k--;){var D=$.KEY_MODS[o[k]];if(D==null)return typeof console<"u"&&console.error("invalid modifier "+o[k]+" in "+t),!1;v|=D}return{key:l,hashId:v}},n.prototype.findKeyCommand=function(t,o){var l=h[t]+o;return this.commandKeyBinding[l]},n.prototype.handleKeyboard=function(t,o,l,p){if(!(p<0)){var v=h[o]+l,k=this.commandKeyBinding[v];return t.$keyChain&&(t.$keyChain+=" "+v,k=this.commandKeyBinding[t.$keyChain]||k),k&&(k=="chainKeys"||k[k.length-1]=="chainKeys")?(t.$keyChain=t.$keyChain||v,{command:"null"}):(t.$keyChain&&((!o||o==4)&&l.length==1?t.$keyChain=t.$keyChain.slice(0,-v.length-1):(o==-1||p>0)&&(t.$keyChain="")),{command:k})}},n.prototype.getStatusText=function(t,o){return o.$keyChain||""},n}();function i(n){return typeof n=="object"&&n.bindKey&&n.bindKey.position||(n.isDefault?-100:0)}var r=function(n){b(t,n);function t(o,l){var p=n.call(this,o,l)||this;return p.$singleCommand=!0,p}return t}(d);r.call=function(n,t,o){d.prototype.$init.call(n,t,o,!0)},d.call=function(n,t,o){d.prototype.$init.call(n,t,o,!1)},f.HashHandler=r,f.MultiHashHandler=d}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(s,f,C){var b=this&&this.__extends||function(){var i=function(r,n){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(t[l]=o[l])},i(r,n)};return function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");i(r,n);function t(){this.constructor=r}r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}}(),$=s("../lib/oop"),w=s("../keyboard/hash_handler").MultiHashHandler,h=s("../lib/event_emitter").EventEmitter,d=function(i){b(r,i);function r(n,t){var o=i.call(this,t,n)||this;return o.byName=o.commands,o.setDefaultHandler("exec",function(l){return l.args?l.command.exec(l.editor,l.args,l.event,!1):l.command.exec(l.editor,{},l.event,!0)}),o}return r.prototype.exec=function(n,t,o){if(Array.isArray(n)){for(var l=n.length;l--;)if(this.exec(n[l],t,o))return!0;return!1}if(typeof n=="string"&&(n=this.commands[n]),!n||t&&t.$readOnly&&!n.readOnly||this.$checkCommandState!=!1&&n.isAvailable&&!n.isAvailable(t))return!1;var p={editor:t,command:n,args:o};return p.returnValue=this._emit("exec",p),this._signal("afterExec",p),p.returnValue!==!1},r.prototype.toggleRecording=function(n){if(!this.$inReplay)return n&&n._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=(function(t){this.macro.push([t.command,t.args])}).bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},r.prototype.replay=function(n){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(n);try{this.$inReplay=!0,this.macro.forEach(function(t){typeof t=="string"?this.exec(t,n):this.exec(t[0],n,t[1])},this)}finally{this.$inReplay=!1}}},r.prototype.trimMacro=function(n){return n.map(function(t){return typeof t[0]!="string"&&(t[0]=t[0].name),t[1]||(t=t[0]),t})},r}(w);$.implement(d.prototype,h),f.CommandManager=d}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(s,f,C){var b=s("../lib/lang"),$=s("../config"),w=s("../range").Range;function h(i,r){return{win:i,mac:r}}f.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:h("Ctrl-,","Command-,"),exec:function(i){$.loadModule("ace/ext/settings_menu",function(r){r.init(i),i.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:h("Alt-E","F4"),exec:function(i){$.loadModule("ace/ext/error_marker",function(r){r.showErrorMarker(i,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:h("Alt-Shift-E","Shift-F4"),exec:function(i){$.loadModule("ace/ext/error_marker",function(r){r.showErrorMarker(i,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:h("Ctrl-A","Command-A"),exec:function(i){i.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:h(null,"Ctrl-L"),exec:function(i){i.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:h("Ctrl-L","Command-L"),exec:function(i,r){typeof r=="number"&&!isNaN(r)&&i.gotoLine(r),i.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:h("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(i){i.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:h("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(i){i.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:h("F2","F2"),exec:function(i){i.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:h("Alt-F2","Alt-F2"),exec:function(i){i.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:h(null,"Ctrl-Command-Option-0"),exec:function(i){i.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:h(null,"Ctrl-Command-Option-0"),exec:function(i){i.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:h("Alt-0","Command-Option-0"),exec:function(i){i.session.foldAll(),i.session.unfold(i.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:h("Alt-Shift-0","Command-Option-Shift-0"),exec:function(i){i.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:h("Ctrl-K","Command-G"),exec:function(i){i.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:h("Ctrl-Shift-K","Command-Shift-G"),exec:function(i){i.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:h("Alt-K","Ctrl-G"),exec:function(i){i.selection.isEmpty()?i.selection.selectWord():i.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:h("Alt-Shift-K","Ctrl-Shift-G"),exec:function(i){i.selection.isEmpty()?i.selection.selectWord():i.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:h("Ctrl-F","Command-F"),exec:function(i){$.loadModule("ace/ext/searchbox",function(r){r.Search(i)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(i){i.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:h("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(i){i.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:h("Ctrl-Home","Command-Home|Command-Up"),exec:function(i){i.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:h("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(i){i.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:h("Up","Up|Ctrl-P"),exec:function(i,r){i.navigateUp(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:h("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(i){i.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:h("Ctrl-End","Command-End|Command-Down"),exec:function(i){i.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:h("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(i){i.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:h("Down","Down|Ctrl-N"),exec:function(i,r){i.navigateDown(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:h("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(i){i.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:h("Ctrl-Left","Option-Left"),exec:function(i){i.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:h("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(i){i.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:h("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(i){i.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:h("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(i){i.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:h("Left","Left|Ctrl-B"),exec:function(i,r){i.navigateLeft(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:h("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(i){i.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:h("Ctrl-Right","Option-Right"),exec:function(i){i.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:h("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(i){i.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:h("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(i){i.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:h("Shift-Right","Shift-Right"),exec:function(i){i.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:h("Right","Right|Ctrl-F"),exec:function(i,r){i.navigateRight(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(i){i.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:h(null,"Option-PageDown"),exec:function(i){i.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:h("PageDown","PageDown|Ctrl-V"),exec:function(i){i.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(i){i.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:h(null,"Option-PageUp"),exec:function(i){i.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(i){i.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:h("Ctrl-Up",null),exec:function(i){i.renderer.scrollBy(0,-2*i.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:h("Ctrl-Down",null),exec:function(i){i.renderer.scrollBy(0,2*i.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(i){i.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(i){i.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:h("Ctrl-Alt-E","Command-Option-E"),exec:function(i){i.commands.toggleRecording(i)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:h("Ctrl-Shift-E","Command-Shift-E"),exec:function(i){i.commands.replay(i)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:h("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(i){i.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:h("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(i){i.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:h("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(i){i.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:h(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(i){},readOnly:!0},{name:"cut",description:"Cut",exec:function(i){var r=i.$copyWithEmptySelection&&i.selection.isEmpty(),n=r?i.selection.getLineRange():i.selection.getRange();i._emit("cut",n),n.isEmpty()||i.session.remove(n),i.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(i,r){i.$handlePaste(r)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:h("Ctrl-D","Command-D"),exec:function(i){i.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:h("Ctrl-Shift-D","Command-Shift-D"),exec:function(i){i.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:h("Ctrl-Alt-S","Command-Alt-S"),exec:function(i){i.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:h("Ctrl-/","Command-/"),exec:function(i){i.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:h("Ctrl-Shift-/","Command-Shift-/"),exec:function(i){i.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:h("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(i){i.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:h("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(i){i.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:h("Ctrl-H","Command-Option-F"),exec:function(i){$.loadModule("ace/ext/searchbox",function(r){r.Search(i,!0)})}},{name:"undo",description:"Undo",bindKey:h("Ctrl-Z","Command-Z"),exec:function(i){i.undo()}},{name:"redo",description:"Redo",bindKey:h("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(i){i.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:h("Alt-Shift-Up","Command-Option-Up"),exec:function(i){i.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:h("Alt-Up","Option-Up"),exec:function(i){i.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:h("Alt-Shift-Down","Command-Option-Down"),exec:function(i){i.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:h("Alt-Down","Option-Down"),exec:function(i){i.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:h("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(i){i.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:h("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(i){i.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:h("Shift-Delete",null),exec:function(i){if(i.selection.isEmpty())i.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:h("Alt-Backspace","Command-Backspace"),exec:function(i){i.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:h("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(i){i.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:h("Ctrl-Shift-Backspace",null),exec:function(i){var r=i.selection.getRange();r.start.column=0,i.session.remove(r)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:h("Ctrl-Shift-Delete",null),exec:function(i){var r=i.selection.getRange();r.end.column=Number.MAX_VALUE,i.session.remove(r)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:h("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(i){i.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:h("Ctrl-Delete","Alt-Delete"),exec:function(i){i.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:h("Shift-Tab","Shift-Tab"),exec:function(i){i.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:h("Tab","Tab"),exec:function(i){i.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:h("Ctrl-[","Ctrl-["),exec:function(i){i.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:h("Ctrl-]","Ctrl-]"),exec:function(i){i.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(i,r){i.insert(r)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(i,r){i.insert(b.stringRepeat(r.text||"",r.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:h(null,"Ctrl-O"),exec:function(i){i.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:h("Alt-Shift-X","Ctrl-T"),exec:function(i){i.transposeLetters()},multiSelectAction:function(i){i.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:h("Ctrl-U","Ctrl-U"),exec:function(i){i.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:h("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(i){i.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:h(null,null),exec:function(i){i.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:h("Ctrl-Shift-L","Command-Shift-L"),exec:function(i){var r=i.selection.getRange();r.start.column=r.end.column=0,r.end.row++,i.selection.setRange(r,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:h("Ctrl+F3","F3"),exec:function(i){i.openLink()}},{name:"joinlines",description:"Join lines",bindKey:h(null,null),exec:function(i){for(var r=i.selection.isBackwards(),n=r?i.selection.getSelectionLead():i.selection.getSelectionAnchor(),t=r?i.selection.getSelectionAnchor():i.selection.getSelectionLead(),o=i.session.doc.getLine(n.row).length,l=i.session.doc.getTextRange(i.selection.getRange()),p=l.replace(/\n\s*/," ").length,v=i.session.doc.getLine(n.row),k=n.row+1;k<=t.row+1;k++){var D=b.stringTrimLeft(b.stringTrimRight(i.session.doc.getLine(k)));D.length!==0&&(D=" "+D),v+=D}t.row+1<i.session.doc.getLength()-1&&(v+=i.session.doc.getNewLineCharacter()),i.clearSelection(),i.session.doc.replace(new w(n.row,0,t.row+2,0),v),p>0?(i.selection.moveCursorTo(n.row,n.column),i.selection.selectTo(n.row,n.column+p)):(o=i.session.doc.getLine(n.row).length>o?o+1:o,i.selection.moveCursorTo(n.row,o))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:h(null,null),exec:function(i){var r=i.session.doc.getLength()-1,n=i.session.doc.getLine(r).length,t=i.selection.rangeList.ranges,o=[];t.length<1&&(t=[i.selection.getRange()]);for(var l=0;l<t.length;l++)l==t.length-1&&(t[l].end.row===r&&t[l].end.column===n||o.push(new w(t[l].end.row,t[l].end.column,r,n))),l===0?t[l].start.row===0&&t[l].start.column===0||o.push(new w(0,0,t[l].start.row,t[l].start.column)):o.push(new w(t[l-1].end.row,t[l-1].end.column,t[l].start.row,t[l].start.column));i.exitMultiSelectMode(),i.clearSelection();for(var l=0;l<o.length;l++)i.selection.addRange(o[l],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(i){i.selection.clearSelection(),i.navigateLineEnd(),i.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(i){i.selection.clearSelection();var r=i.getCursorPosition();i.selection.moveTo(r.row-1,Number.MAX_VALUE),i.insert(`
`),r.row===0&&i.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(i){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),i.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:h("F1","F1"),exec:function(i){i.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:h(null,null),exec:function(i){i.prompt({$type:"modes"})},readOnly:!0}];for(var d=1;d<9;d++)f.commands.push({name:"foldToLevel"+d,description:"Fold To Level "+d,level:d,exec:function(i){i.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(s,f,C){var b=s("./lib/dom"),$=function(){function w(h){this.session=h,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return w.prototype.getRowLength=function(h){var d;return this.lineWidgets?d=this.lineWidgets[h]&&this.lineWidgets[h].rowCount||0:d=0,!this.$useWrapMode||!this.$wrapData[h]?1+d:this.$wrapData[h].length+1+d},w.prototype.$getWidgetScreenLength=function(){var h=0;return this.lineWidgets.forEach(function(d){d&&d.rowCount&&!d.hidden&&(h+=d.rowCount)}),h},w.prototype.$onChangeEditor=function(h){this.attach(h.editor)},w.prototype.attach=function(h){h&&h.widgetManager&&h.widgetManager!=this&&h.widgetManager.detach(),this.editor!=h&&(this.detach(),this.editor=h,h&&(h.widgetManager=this,h.renderer.on("beforeRender",this.measureWidgets),h.renderer.on("afterRender",this.renderWidgets)))},w.prototype.detach=function(h){var d=this.editor;if(d){this.editor=null,d.widgetManager=null,d.renderer.off("beforeRender",this.measureWidgets),d.renderer.off("afterRender",this.renderWidgets);var i=this.session.lineWidgets;i&&i.forEach(function(r){r&&r.el&&r.el.parentNode&&(r._inDocument=!1,r.el.parentNode.removeChild(r.el))})}},w.prototype.updateOnFold=function(h,d){var i=d.lineWidgets;if(!(!i||!h.action)){for(var r=h.data,n=r.start.row,t=r.end.row,o=h.action=="add",l=n+1;l<t;l++)i[l]&&(i[l].hidden=o);i[t]&&(o?i[n]?i[t].hidden=o:i[n]=i[t]:(i[n]==i[t]&&(i[n]=void 0),i[t].hidden=o))}},w.prototype.updateOnChange=function(h){var d=this.session.lineWidgets;if(d){var i=h.start.row,r=h.end.row-i;if(r!==0)if(h.action=="remove"){var n=d.splice(i+1,r);!d[i]&&n[n.length-1]&&(d[i]=n.pop()),n.forEach(function(o){o&&this.removeLineWidget(o)},this),this.$updateRows()}else{var t=new Array(r);d[i]&&d[i].column!=null&&h.start.column>d[i].column&&i++,t.unshift(i,0),d.splice.apply(d,t),this.$updateRows()}}},w.prototype.$updateRows=function(){var h=this.session.lineWidgets;if(h){var d=!0;h.forEach(function(i,r){if(i)for(d=!1,i.row=r;i.$oldWidget;)i.$oldWidget.row=r,i=i.$oldWidget}),d&&(this.session.lineWidgets=null)}},w.prototype.$registerLineWidget=function(h){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var d=this.session.lineWidgets[h.row];return d&&(h.$oldWidget=d,d.el&&d.el.parentNode&&(d.el.parentNode.removeChild(d.el),d._inDocument=!1)),this.session.lineWidgets[h.row]=h,h},w.prototype.addLineWidget=function(h){if(this.$registerLineWidget(h),h.session=this.session,!this.editor)return h;var d=this.editor.renderer;h.html&&!h.el&&(h.el=b.createElement("div"),h.el.innerHTML=h.html),h.text&&!h.el&&(h.el=b.createElement("div"),h.el.textContent=h.text),h.el&&(b.addCssClass(h.el,"ace_lineWidgetContainer"),h.className&&b.addCssClass(h.el,h.className),h.el.style.position="absolute",h.el.style.zIndex=5,d.container.appendChild(h.el),h._inDocument=!0,h.coverGutter||(h.el.style.zIndex=3),h.pixelHeight==null&&(h.pixelHeight=h.el.offsetHeight)),h.rowCount==null&&(h.rowCount=h.pixelHeight/d.layerConfig.lineHeight);var i=this.session.getFoldAt(h.row,0);if(h.$fold=i,i){var r=this.session.lineWidgets;h.row==i.end.row&&!r[i.start.row]?r[i.start.row]=h:h.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:h.row}}}),this.$updateRows(),this.renderWidgets(null,d),this.onWidgetChanged(h),h},w.prototype.removeLineWidget=function(h){if(h._inDocument=!1,h.session=null,h.el&&h.el.parentNode&&h.el.parentNode.removeChild(h.el),h.editor&&h.editor.destroy)try{h.editor.destroy()}catch{}if(this.session.lineWidgets){var d=this.session.lineWidgets[h.row];if(d==h)this.session.lineWidgets[h.row]=h.$oldWidget,h.$oldWidget&&this.onWidgetChanged(h.$oldWidget);else for(;d;){if(d.$oldWidget==h){d.$oldWidget=h.$oldWidget;break}d=d.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:h.row}}}),this.$updateRows()},w.prototype.getWidgetsAtRow=function(h){for(var d=this.session.lineWidgets,i=d&&d[h],r=[];i;)r.push(i),i=i.$oldWidget;return r},w.prototype.onWidgetChanged=function(h){this.session._changedWidgets.push(h),this.editor&&this.editor.renderer.updateFull()},w.prototype.measureWidgets=function(h,d){var i=this.session._changedWidgets,r=d.layerConfig;if(!(!i||!i.length)){for(var n=1/0,t=0;t<i.length;t++){var o=i[t];if(!(!o||!o.el)&&o.session==this.session){if(!o._inDocument){if(this.session.lineWidgets[o.row]!=o)continue;o._inDocument=!0,d.container.appendChild(o.el)}o.h=o.el.offsetHeight,o.fixedWidth||(o.w=o.el.offsetWidth,o.screenWidth=Math.ceil(o.w/r.characterWidth));var l=o.h/r.lineHeight;o.coverLine&&(l-=this.session.getRowLineCount(o.row),l<0&&(l=0)),o.rowCount!=l&&(o.rowCount=l,o.row<n&&(n=o.row))}}n!=1/0&&(this.session._emit("changeFold",{data:{start:{row:n}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},w.prototype.renderWidgets=function(h,d){var i=d.layerConfig,r=this.session.lineWidgets;if(r){for(var n=Math.min(this.firstRow,i.firstRow),t=Math.max(this.lastRow,i.lastRow,r.length);n>0&&!r[n];)n--;this.firstRow=i.firstRow,this.lastRow=i.lastRow,d.$cursorLayer.config=i;for(var o=n;o<=t;o++){var l=r[o];if(!(!l||!l.el)){if(l.hidden){l.el.style.top=-100-(l.pixelHeight||0)+"px";continue}l._inDocument||(l._inDocument=!0,d.container.appendChild(l.el));var p=d.$cursorLayer.getPixelPosition({row:o,column:0},!0).top;l.coverLine||(p+=i.lineHeight*this.session.getRowLineCount(l.row)),l.el.style.top=p-i.offset+"px";var v=l.coverGutter?0:d.gutterWidth;l.fixedWidth||(v-=d.scrollLeft),l.el.style.left=v+"px",l.fullWidth&&l.screenWidth&&(l.el.style.minWidth=i.width+2*i.padding+"px"),l.fixedWidth?l.el.style.right=d.scrollBar.getWidth()+"px":l.el.style.right=""}}}},w}();f.LineWidgets=$}),ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(s,f,C){var b=s("../lib/keys"),$=s("../mouse/default_gutter_handler").GutterTooltip,w=function(){function d(i){this.editor=i,this.gutterLayer=i.renderer.$gutterLayer,this.element=i.renderer.$gutter,this.lines=i.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new $(this.editor)}return d.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},d.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},d.prototype.$onGutterKeyDown=function(i){if(this.annotationTooltip.isOpen){i.preventDefault(),i.keyCode===b.escape&&this.annotationTooltip.hideTooltip();return}if(i.target===this.element){if(i.keyCode!=b.enter)return;i.preventDefault();var r=this.editor.getCursorPosition().row;this.editor.isRowVisible(r)||this.editor.scrollToLine(r,!0,!0),setTimeout((function(){var n=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),t=this.$findNearestFoldWidget(n),o=this.$findNearestAnnotation(n);if(!(t===null&&o===null)){if(t===null&&o!==null){this.activeRowIndex=o,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}if(t!==null&&o===null){this.activeRowIndex=t,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}if(Math.abs(o-n)<Math.abs(t-n)){this.activeRowIndex=o,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}else{this.activeRowIndex=t,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}}}).bind(this),10);return}this.$handleGutterKeyboardInteraction(i),setTimeout((function(){this.editor._signal("gutterkeydown",new h(i,this))}).bind(this),10)},d.prototype.$handleGutterKeyboardInteraction=function(i){if(i.keyCode===b.tab){i.preventDefault();return}if(i.keyCode===b.escape){i.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(i.keyCode===b.up){switch(i.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(i.keyCode===b.down){switch(i.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(i.keyCode===b.left){i.preventDefault(),this.$switchLane("annotation");return}if(i.keyCode===b.right){i.preventDefault(),this.$switchLane("fold");return}if(i.keyCode===b.enter||i.keyCode===b.space){switch(i.preventDefault(),this.activeLane){case"fold":if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="start"){var r=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),i),setTimeout((function(){this.$rowIndexToRow(this.activeRowIndex)!==r&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(r),this.$focusFoldWidget(this.activeRowIndex))}).bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var n=this.lines.cells[this.activeRowIndex].element.childNodes[2],t=n.getBoundingClientRect(),o=this.annotationTooltip.getElement().style;o.left=t.right+"px",o.top=t.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},d.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},d.prototype.$isFoldWidgetVisible=function(i){var r=this.editor.isRowFullyVisible(this.$rowIndexToRow(i)),n=this.$getFoldWidget(i).style.display!=="none";return r&&n},d.prototype.$isAnnotationVisible=function(i){var r=this.editor.isRowFullyVisible(this.$rowIndexToRow(i)),n=this.$getAnnotation(i).style.display!=="none";return r&&n},d.prototype.$getFoldWidget=function(i){var r=this.lines.get(i),n=r.element;return n.childNodes[1]},d.prototype.$getAnnotation=function(i){var r=this.lines.get(i),n=r.element;return n.childNodes[2]},d.prototype.$findNearestFoldWidget=function(i){if(this.$isFoldWidgetVisible(i))return i;for(var r=0;i-r>0||i+r<this.lines.getLength()-1;){if(r++,i-r>=0&&this.$isFoldWidgetVisible(i-r))return i-r;if(i+r<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(i+r))return i+r}return null},d.prototype.$findNearestAnnotation=function(i){if(this.$isAnnotationVisible(i))return i;for(var r=0;i-r>0||i+r<this.lines.getLength()-1;){if(r++,i-r>=0&&this.$isAnnotationVisible(i-r))return i-r;if(i+r<=this.lines.getLength()-1&&this.$isAnnotationVisible(i+r))return i+r}return null},d.prototype.$focusFoldWidget=function(i){if(i!=null){var r=this.$getFoldWidget(i);r.classList.add(this.editor.renderer.keyboardFocusClassName),r.focus()}},d.prototype.$focusAnnotation=function(i){if(i!=null){var r=this.$getAnnotation(i);r.classList.add(this.editor.renderer.keyboardFocusClassName),r.focus()}},d.prototype.$blurFoldWidget=function(i){var r=this.$getFoldWidget(i);r.classList.remove(this.editor.renderer.keyboardFocusClassName),r.blur()},d.prototype.$blurAnnotation=function(i){var r=this.$getAnnotation(i);r.classList.remove(this.editor.renderer.keyboardFocusClassName),r.blur()},d.prototype.$moveFoldWidgetUp=function(){for(var i=this.activeRowIndex;i>0;)if(i--,this.$isFoldWidgetVisible(i)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=i,this.$focusFoldWidget(this.activeRowIndex);return}},d.prototype.$moveFoldWidgetDown=function(){for(var i=this.activeRowIndex;i<this.lines.getLength()-1;)if(i++,this.$isFoldWidgetVisible(i)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=i,this.$focusFoldWidget(this.activeRowIndex);return}},d.prototype.$moveAnnotationUp=function(){for(var i=this.activeRowIndex;i>0;)if(i--,this.$isAnnotationVisible(i)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=i,this.$focusAnnotation(this.activeRowIndex);return}},d.prototype.$moveAnnotationDown=function(){for(var i=this.activeRowIndex;i<this.lines.getLength()-1;)if(i++,this.$isAnnotationVisible(i)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=i,this.$focusAnnotation(this.activeRowIndex);return}},d.prototype.$switchLane=function(i){switch(i){case"annotation":if(this.activeLane==="annotation")break;var r=this.$findNearestAnnotation(this.activeRowIndex);if(r==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=r,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var n=this.$findNearestFoldWidget(this.activeRowIndex);if(n==null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=n,this.$focusFoldWidget(this.activeRowIndex);break}},d.prototype.$rowIndexToRow=function(i){var r=this.lines.get(i);return r?r.row:null},d.prototype.$rowToRowIndex=function(i){for(var r=0;r<this.lines.getLength();r++){var n=this.lines.get(r);if(n.row==i)return r}return null},d}();f.GutterKeyboardHandler=w;var h=function(){function d(i,r){this.gutterKeyboardHandler=r,this.domEvent=i}return d.prototype.getKey=function(){return b.keyCodeToString(this.domEvent.keyCode)},d.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},d.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},d.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},d}();f.GutterKeyboardEvent=h}),ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/line_widgets","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],function(s,f,C){var b=this&&this.__values||function(L){var S=typeof Symbol=="function"&&Symbol.iterator,E=S&&L[S],T=0;if(E)return E.call(L);if(L&&typeof L.length=="number")return{next:function(){return L&&T>=L.length&&(L=void 0),{value:L&&L[T++],done:!L}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")},$=s("./lib/oop"),w=s("./lib/dom"),h=s("./lib/lang"),d=s("./lib/useragent"),i=s("./keyboard/textinput").TextInput,r=s("./mouse/mouse_handler").MouseHandler,n=s("./mouse/fold_handler").FoldHandler,t=s("./keyboard/keybinding").KeyBinding,o=s("./edit_session").EditSession,l=s("./search").Search,p=s("./range").Range,v=s("./lib/event_emitter").EventEmitter,k=s("./commands/command_manager").CommandManager,D=s("./commands/default_commands").commands,_=s("./config"),M=s("./token_iterator").TokenIterator,A=s("./line_widgets").LineWidgets,F=s("./keyboard/gutter_handler").GutterKeyboardHandler,N=s("./config").nls,O=s("./clipboard"),H=s("./lib/keys"),R=function(){function L(S,E,T){this.$toDestroy=[];var B=S.getContainerElement();this.container=B,this.renderer=S,this.id="editor"+ ++L.$uid,this.commands=new k(d.isMac?"mac":"win",D),typeof document=="object"&&(this.textInput=new i(S.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new r(this),new n(this)),this.keyBinding=new t(this),this.$search=new l().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=h.delayedCall((function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}).bind(this)),this.on("change",function(P,W){W._$emitInputEvent.schedule(31)}),this.setSession(E||T&&T.session||new o("")),_.resetOptions(this),T&&this.setOptions(T),_._signal("editor",this)}return L.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=h.delayedCall(this.endOperation.bind(this,!0)),this.on("change",(function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}).bind(this),!0),this.on("changeSelection",(function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}).bind(this),!0)},L.prototype.startOperation=function(S){if(this.curOp){if(!S||this.curOp.command)return;this.prevOp=this.curOp}S||(this.previousCommand=null,S={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:S.command||{},args:S.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},L.prototype.endOperation=function(S){if(this.curOp&&this.session){if(S&&S.returnValue===!1||!this.session)return this.curOp=null;if(S==!0&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var E=this.curOp.command,T=E&&E.scrollIntoView;if(T){switch(T){case"center-animate":T="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var B=this.selection.getRange(),P=this.renderer.layerConfig;(B.start.row>=P.lastRow||B.end.row<=P.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break}T=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var W=this.selection.toJSON();this.curOp.selectionAfter=W,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(W),this.prevOp=this.curOp,this.curOp=null}},L.prototype.$historyTracker=function(S){if(this.$mergeUndoDeltas){var E=this.prevOp,T=this.$mergeableCommands,B=E.command&&S.command.name==E.command.name;if(S.command.name=="insertstring"){var P=S.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),B=B&&this.mergeNextCommand&&(!/\s/.test(P)||/\s/.test(E.args)),this.mergeNextCommand=!0}else B=B&&T.indexOf(S.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(B=!1),B?this.session.mergeUndoDeltas=!0:T.indexOf(S.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},L.prototype.setKeyboardHandler=function(S,E){if(S&&typeof S=="string"&&S!="ace"){this.$keybindingId=S;var T=this;_.loadModule(["keybinding",S],function(B){T.$keybindingId==S&&T.keyBinding.setKeyboardHandler(B&&B.handler),E&&E()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(S),E&&E()},L.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},L.prototype.setSession=function(S){if(this.session!=S){this.curOp&&this.endOperation(),this.curOp={};var E=this.session;if(E){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var T=this.session.getSelection();T.off("changeCursor",this.$onCursorChange),T.off("changeSelection",this.$onSelectionChange)}this.session=S,S?(this.$onDocumentChange=this.onDocumentChange.bind(this),S.on("change",this.$onDocumentChange),this.renderer.setSession(S),this.$onChangeMode=this.onChangeMode.bind(this),S.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),S.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),S.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),S.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),S.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),S.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=S.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(S)),this._signal("changeSession",{session:S,oldSession:E}),this.curOp=null,E&&E._signal("changeEditor",{oldEditor:this}),S&&S._signal("changeEditor",{editor:this}),S&&!S.destroyed&&S.bgTokenizer.scheduleStart()}},L.prototype.getSession=function(){return this.session},L.prototype.setValue=function(S,E){return this.session.doc.setValue(S),E?E==1?this.navigateFileEnd():E==-1&&this.navigateFileStart():this.selectAll(),S},L.prototype.getValue=function(){return this.session.getValue()},L.prototype.getSelection=function(){return this.selection},L.prototype.resize=function(S){this.renderer.onResize(S)},L.prototype.setTheme=function(S,E){this.renderer.setTheme(S,E)},L.prototype.getTheme=function(){return this.renderer.getTheme()},L.prototype.setStyle=function(S){this.renderer.setStyle(S)},L.prototype.unsetStyle=function(S){this.renderer.unsetStyle(S)},L.prototype.getFontSize=function(){return this.getOption("fontSize")||w.computedStyle(this.container).fontSize},L.prototype.setFontSize=function(S){this.setOption("fontSize",S)},L.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var S=this;this.$highlightPending=!0,setTimeout(function(){S.$highlightPending=!1;var E=S.session;if(!(!E||E.destroyed)){E.$bracketHighlight&&(E.$bracketHighlight.markerIds.forEach(function(G){E.removeMarker(G)}),E.$bracketHighlight=null);var T=S.getCursorPosition(),B=S.getKeyboardHandler(),P=B&&B.$getDirectionForHighlight&&B.$getDirectionForHighlight(S),W=E.getMatchingBracketRanges(T,P);if(!W){var z=new M(E,T.row,T.column),U=z.getCurrentToken();if(U&&/\b(?:tag-open|tag-name)/.test(U.type)){var j=E.getMatchingTags(T);j&&(W=[j.openTagName,j.closeTagName])}}if(!W&&E.$mode.getMatching&&(W=E.$mode.getMatching(S.session)),!W){S.getHighlightIndentGuides()&&S.renderer.$textLayer.$highlightIndentGuide();return}var V="ace_bracket";Array.isArray(W)?W.length==1&&(V="ace_error_bracket"):W=[W],W.length==2&&(p.comparePoints(W[0].end,W[1].start)==0?W=[p.fromPoints(W[0].start,W[1].end)]:p.comparePoints(W[0].start,W[1].end)==0&&(W=[p.fromPoints(W[1].start,W[0].end)])),E.$bracketHighlight={ranges:W,markerIds:W.map(function(G){return E.addMarker(G,V,"text")})},S.getHighlightIndentGuides()&&S.renderer.$textLayer.$highlightIndentGuide()}},50)}},L.prototype.focus=function(){this.textInput.focus()},L.prototype.isFocused=function(){return this.textInput.isFocused()},L.prototype.blur=function(){this.textInput.blur()},L.prototype.onFocus=function(S){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",S))},L.prototype.onBlur=function(S){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",S))},L.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},L.prototype.onDocumentChange=function(S){var E=this.session.$useWrapMode,T=S.start.row==S.end.row?S.end.row:1/0;this.renderer.updateLines(S.start.row,T,E),this._signal("change",S),this.$cursorChange()},L.prototype.onTokenizerUpdate=function(S){var E=S.data;this.renderer.updateLines(E.first,E.last)},L.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},L.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},L.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},L.prototype.$updateHighlightActiveLine=function(){var S=this.getSession(),E;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(E=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(E=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(E=!1)),S.$highlightLineMarker&&!E)S.removeMarker(S.$highlightLineMarker.id),S.$highlightLineMarker=null;else if(!S.$highlightLineMarker&&E){var T=new p(E.row,E.column,E.row,1/0);T.id=S.addMarker(T,"ace_active-line","screenLine"),S.$highlightLineMarker=T}else E&&(S.$highlightLineMarker.start.row=E.row,S.$highlightLineMarker.end.row=E.row,S.$highlightLineMarker.start.column=E.column,S._signal("changeBackMarker"))},L.prototype.onSelectionChange=function(S){var E=this.session;if(E.$selectionMarker&&E.removeMarker(E.$selectionMarker),E.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var T=this.selection.getRange(),B=this.getSelectionStyle();E.$selectionMarker=E.addMarker(T,"ace_selection",B)}var P=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(P),this._signal("changeSelection")},L.prototype.$getSelectionHighLightRegexp=function(){var S=this.session,E=this.getSelectionRange();if(!(E.isEmpty()||E.isMultiLine())){var T=E.start.column,B=E.end.column,P=S.getLine(E.start.row),W=P.substring(T,B);if(!(W.length>5e3||!/[\w\d]/.test(W))){var z=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:W}),U=P.substring(T-1,B+1);if(z.test(U))return z}}},L.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},L.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},L.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},L.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},L.prototype.onChangeMode=function(S){this.renderer.updateText(),this._emit("changeMode",S)},L.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},L.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},L.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},L.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},L.prototype.getCopyText=function(){var S=this.getSelectedText(),E=this.session.doc.getNewLineCharacter(),T=!1;if(!S&&this.$copyWithEmptySelection){T=!0;for(var B=this.selection.getAllRanges(),P=0;P<B.length;P++){var W=B[P];P&&B[P-1].start.row==W.start.row||(S+=this.session.getLine(W.start.row)+E)}}var z={text:S};return this._signal("copy",z),O.lineMode=T?z.text:!1,z.text},L.prototype.onCopy=function(){this.commands.exec("copy",this)},L.prototype.onCut=function(){this.commands.exec("cut",this)},L.prototype.onPaste=function(S,E){var T={text:S,event:E};this.commands.exec("paste",this,T)},L.prototype.$handlePaste=function(S){typeof S=="string"&&(S={text:S}),this._signal("paste",S);var E=S.text,T=E===O.lineMode,B=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)T?B.insert({row:this.selection.lead.row,column:0},E):this.insert(E);else if(T)this.selection.rangeList.ranges.forEach(function(V){B.insert({row:V.start.row,column:0},E)});else{var P=E.split(/\r\n|\r|\n/),W=this.selection.rangeList.ranges,z=P.length==2&&(!P[0]||!P[1]);if(P.length!=W.length||z)return this.commands.exec("insertstring",this,E);for(var U=W.length;U--;){var j=W[U];j.isEmpty()||B.remove(j),B.insert(j.start,P[U])}}},L.prototype.execCommand=function(S,E){return this.commands.exec(S,this,E)},L.prototype.insert=function(S,E){var T=this.session,B=T.getMode(),P=this.getCursorPosition();if(this.getBehavioursEnabled()&&!E){var W=B.transformAction(T.getState(P.row),"insertion",this,T,S);W&&(S!==W.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),S=W.text)}if(S=="	"&&(S=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&S.indexOf(`
`)==-1){var z=new p.fromPoints(P,P);z.end.column+=S.length,this.session.remove(z)}}else{var z=this.getSelectionRange();P=this.session.remove(z),this.clearSelection()}if(S==`
`||S==`\r
`){var G=T.getLine(P.row);if(P.column>G.search(/\S|$/)){var U=G.substr(P.column).search(/\S|$/);T.doc.removeInLine(P.row,P.column,P.column+U)}}this.clearSelection();var j=P.column,V=T.getState(P.row),G=T.getLine(P.row),K=B.checkOutdent(V,G,S);if(T.insert(P,S),W&&W.selection&&(W.selection.length==2?this.selection.setSelectionRange(new p(P.row,j+W.selection[0],P.row,j+W.selection[1])):this.selection.setSelectionRange(new p(P.row+W.selection[0],W.selection[1],P.row+W.selection[2],W.selection[3]))),this.$enableAutoIndent){if(T.getDocument().isNewLine(S)){var Y=B.getNextLineIndent(V,G.slice(0,P.column),T.getTabString());T.insert({row:P.row+1,column:0},Y)}K&&B.autoOutdent(V,T,P.row)}},L.prototype.autoIndent=function(){var S=this.session,E=S.getMode(),T,B;if(this.selection.isEmpty())T=0,B=S.doc.getLength()-1;else{var P=this.getSelectionRange();T=P.start.row,B=P.end.row}for(var W="",z="",U="",j,V,G,K=S.getTabString(),Y=T;Y<=B;Y++)Y>0&&(W=S.getState(Y-1),z=S.getLine(Y-1),U=E.getNextLineIndent(W,z,K)),j=S.getLine(Y),V=E.$getIndent(j),U!==V&&(V.length>0&&(G=new p(Y,0,Y,V.length),S.remove(G)),U.length>0&&S.insert({row:Y,column:0},U)),E.autoOutdent(W,S,Y)},L.prototype.onTextInput=function(S,E){if(!E)return this.keyBinding.onTextInput(S);this.startOperation({command:{name:"insertstring"}});var T=this.applyComposition.bind(this,S,E);this.selection.rangeCount?this.forEachSelection(T):T(),this.endOperation()},L.prototype.applyComposition=function(S,E){if(E.extendLeft||E.extendRight){var T=this.selection.getRange();T.start.column-=E.extendLeft,T.end.column+=E.extendRight,T.start.column<0&&(T.start.row--,T.start.column+=this.session.getLine(T.start.row).length+1),this.selection.setRange(T),!S&&!T.isEmpty()&&this.remove()}if((S||!this.selection.isEmpty())&&this.insert(S,!0),E.restoreStart||E.restoreEnd){var T=this.selection.getRange();T.start.column-=E.restoreStart,T.end.column-=E.restoreEnd,this.selection.setRange(T)}},L.prototype.onCommandKey=function(S,E,T){return this.keyBinding.onCommandKey(S,E,T)},L.prototype.setOverwrite=function(S){this.session.setOverwrite(S)},L.prototype.getOverwrite=function(){return this.session.getOverwrite()},L.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},L.prototype.setScrollSpeed=function(S){this.setOption("scrollSpeed",S)},L.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},L.prototype.setDragDelay=function(S){this.setOption("dragDelay",S)},L.prototype.getDragDelay=function(){return this.getOption("dragDelay")},L.prototype.setSelectionStyle=function(S){this.setOption("selectionStyle",S)},L.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},L.prototype.setHighlightActiveLine=function(S){this.setOption("highlightActiveLine",S)},L.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},L.prototype.setHighlightGutterLine=function(S){this.setOption("highlightGutterLine",S)},L.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},L.prototype.setHighlightSelectedWord=function(S){this.setOption("highlightSelectedWord",S)},L.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},L.prototype.setAnimatedScroll=function(S){this.renderer.setAnimatedScroll(S)},L.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},L.prototype.setShowInvisibles=function(S){this.renderer.setShowInvisibles(S)},L.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},L.prototype.setDisplayIndentGuides=function(S){this.renderer.setDisplayIndentGuides(S)},L.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},L.prototype.setHighlightIndentGuides=function(S){this.renderer.setHighlightIndentGuides(S)},L.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},L.prototype.setShowPrintMargin=function(S){this.renderer.setShowPrintMargin(S)},L.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},L.prototype.setPrintMarginColumn=function(S){this.renderer.setPrintMarginColumn(S)},L.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},L.prototype.setReadOnly=function(S){this.setOption("readOnly",S)},L.prototype.getReadOnly=function(){return this.getOption("readOnly")},L.prototype.setBehavioursEnabled=function(S){this.setOption("behavioursEnabled",S)},L.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},L.prototype.setWrapBehavioursEnabled=function(S){this.setOption("wrapBehavioursEnabled",S)},L.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},L.prototype.setShowFoldWidgets=function(S){this.setOption("showFoldWidgets",S)},L.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},L.prototype.setFadeFoldWidgets=function(S){this.setOption("fadeFoldWidgets",S)},L.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},L.prototype.remove=function(S){this.selection.isEmpty()&&(S=="left"?this.selection.selectLeft():this.selection.selectRight());var E=this.getSelectionRange();if(this.getBehavioursEnabled()){var T=this.session,B=T.getState(E.start.row),P=T.getMode().transformAction(B,"deletion",this,T,E);if(E.end.column===0){var W=T.getTextRange(E);if(W[W.length-1]==`
`){var z=T.getLine(E.end.row);/^\s+$/.test(z)&&(E.end.column=z.length)}}P&&(E=P)}this.session.remove(E),this.clearSelection()},L.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},L.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},L.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},L.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var S=this.getSelectionRange();S.start.column==S.end.column&&S.start.row==S.end.row&&(S.end.column=0,S.end.row++),this.session.remove(S),this.clearSelection()},L.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var S=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(S)},L.prototype.setGhostText=function(S,E){this.session.widgetManager||(this.session.widgetManager=new A(this.session),this.session.widgetManager.attach(this)),this.renderer.setGhostText(S,E)},L.prototype.removeGhostText=function(){this.session.widgetManager&&this.renderer.removeGhostText()},L.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var S=this.getCursorPosition(),E=S.column;if(E!==0){var T=this.session.getLine(S.row),B,P;E<T.length?(B=T.charAt(E)+T.charAt(E-1),P=new p(S.row,E-1,S.row,E+1)):(B=T.charAt(E-1)+T.charAt(E-2),P=new p(S.row,E-2,S.row,E)),this.session.replace(P,B),this.session.selection.moveToPosition(P.end)}}},L.prototype.toLowerCase=function(){var S=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var E=this.getSelectionRange(),T=this.session.getTextRange(E);this.session.replace(E,T.toLowerCase()),this.selection.setSelectionRange(S)},L.prototype.toUpperCase=function(){var S=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var E=this.getSelectionRange(),T=this.session.getTextRange(E);this.session.replace(E,T.toUpperCase()),this.selection.setSelectionRange(S)},L.prototype.indent=function(){var S=this.session,E=this.getSelectionRange();if(E.start.row<E.end.row){var T=this.$getSelectedRows();S.indentRows(T.first,T.last,"	");return}else if(E.start.column<E.end.column){var B=S.getTextRange(E);if(!/^\s+$/.test(B)){var T=this.$getSelectedRows();S.indentRows(T.first,T.last,"	");return}}var P=S.getLine(E.start.row),W=E.start,z=S.getTabSize(),U=S.documentToScreenColumn(W.row,W.column);if(this.session.getUseSoftTabs())var j=z-U%z,V=h.stringRepeat(" ",j);else{for(var j=U%z;P[E.start.column-1]==" "&&j;)E.start.column--,j--;this.selection.setSelectionRange(E),V="	"}return this.insert(V)},L.prototype.blockIndent=function(){var S=this.$getSelectedRows();this.session.indentRows(S.first,S.last,"	")},L.prototype.blockOutdent=function(){var S=this.session.getSelection();this.session.outdentRows(S.getRange())},L.prototype.sortLines=function(){for(var S=this.$getSelectedRows(),E=this.session,T=[],B=S.first;B<=S.last;B++)T.push(E.getLine(B));T.sort(function(z,U){return z.toLowerCase()<U.toLowerCase()?-1:z.toLowerCase()>U.toLowerCase()?1:0});for(var P=new p(0,0,0,0),B=S.first;B<=S.last;B++){var W=E.getLine(B);P.start.row=B,P.end.row=B,P.end.column=W.length,E.replace(P,T[B-S.first])}},L.prototype.toggleCommentLines=function(){var S=this.session.getState(this.getCursorPosition().row),E=this.$getSelectedRows();this.session.getMode().toggleCommentLines(S,this.session,E.first,E.last)},L.prototype.toggleBlockComment=function(){var S=this.getCursorPosition(),E=this.session.getState(S.row),T=this.getSelectionRange();this.session.getMode().toggleBlockComment(E,this.session,T,S)},L.prototype.getNumberAt=function(S,E){var T=/[\-]?[0-9]+(?:\.[0-9]+)?/g;T.lastIndex=0;for(var B=this.session.getLine(S);T.lastIndex<E;){var P=T.exec(B);if(P.index<=E&&P.index+P[0].length>=E){var W={value:P[0],start:P.index,end:P.index+P[0].length};return W}}return null},L.prototype.modifyNumber=function(S){var E=this.selection.getCursor().row,T=this.selection.getCursor().column,B=new p(E,T-1,E,T),P=this.session.getTextRange(B);if(!isNaN(parseFloat(P))&&isFinite(P)){var W=this.getNumberAt(E,T);if(W){var z=W.value.indexOf(".")>=0?W.start+W.value.indexOf(".")+1:W.end,U=W.start+W.value.length-z,j=parseFloat(W.value);j*=Math.pow(10,U),z!==W.end&&T<z?S*=Math.pow(10,W.end-T-1):S*=Math.pow(10,W.end-T),j+=S,j/=Math.pow(10,U);var V=j.toFixed(U),G=new p(E,W.start,E,W.end);this.session.replace(G,V),this.moveCursorTo(E,Math.max(W.start+1,T+V.length-W.value.length))}}else this.toggleWord()},L.prototype.toggleWord=function(){var S=this.selection.getCursor().row,E=this.selection.getCursor().column;this.selection.selectWord();var T=this.getSelectedText(),B=this.selection.getWordRange().start.column,P=T.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),W=E-B-1;W<0&&(W=0);var z=0,U=0,j=this;T.match(/[A-Za-z0-9_]+/)&&P.forEach(function(ne,se){U=z+ne.length,W>=z&&W<=U&&(T=ne,j.selection.clearSelection(),j.moveCursorTo(S,z+B),j.selection.selectTo(S,U+B)),z=U});for(var V=this.$toggleWordPairs,G,K=0;K<V.length;K++)for(var Y=V[K],Q=0;Q<=1;Q++){var Z=+!Q,J=T.match(new RegExp("^\\s?_?("+h.escapeRegExp(Y[Q])+")\\s?$","i"));if(J){var q=T.match(new RegExp("([_]|^|\\s)("+h.escapeRegExp(J[1])+")($|\\s)","g"));q&&(G=T.replace(new RegExp(h.escapeRegExp(Y[Q]),"i"),function(ne){var se=Y[Z];return ne.toUpperCase()==ne?se=se.toUpperCase():ne.charAt(0).toUpperCase()==ne.charAt(0)&&(se=se.substr(0,0)+Y[Z].charAt(0).toUpperCase()+se.substr(1)),se}),this.insert(G),G="")}}},L.prototype.findLinkAt=function(S,E){var T,B,P=this.session.getLine(S),W=P.split(/((?:https?|ftp):\/\/[\S]+)/),z=E;z<0&&(z=0);var U=0,j=0,V;try{for(var G=b(W),K=G.next();!K.done;K=G.next()){var Y=K.value;if(j=U+Y.length,z>=U&&z<=j&&Y.match(/((?:https?|ftp):\/\/[\S]+)/)){V=Y.replace(/[\s:.,'";}\]]+$/,"");break}U=j}}catch(Q){T={error:Q}}finally{try{K&&!K.done&&(B=G.return)&&B.call(G)}finally{if(T)throw T.error}}return V},L.prototype.openLink=function(){var S=this.selection.getCursor(),E=this.findLinkAt(S.row,S.column);return E&&window.open(E,"_blank"),E!=null},L.prototype.removeLines=function(){var S=this.$getSelectedRows();this.session.removeFullLines(S.first,S.last),this.clearSelection()},L.prototype.duplicateSelection=function(){var S=this.selection,E=this.session,T=S.getRange(),B=S.isBackwards();if(T.isEmpty()){var P=T.start.row;E.duplicateLines(P,P)}else{var W=B?T.start:T.end,z=E.insert(W,E.getTextRange(T),!1);T.start=W,T.end=z,S.setSelectionRange(T,B)}},L.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},L.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},L.prototype.moveText=function(S,E,T){return this.session.moveText(S,E,T)},L.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},L.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},L.prototype.$moveLines=function(S,E){var T,B,P=this.selection;if(!P.inMultiSelectMode||this.inVirtualSelectionMode){var W=P.toOrientedRange();T=this.$getSelectedRows(W),B=this.session.$moveLines(T.first,T.last,E?0:S),E&&S==-1&&(B=0),W.moveBy(B,0),P.fromOrientedRange(W)}else{var z=P.rangeList.ranges;P.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var U=0,j=0,V=z.length,G=0;G<V;G++){var K=G;z[G].moveBy(U,0),T=this.$getSelectedRows(z[G]);for(var Y=T.first,Q=T.last;++G<V;){j&&z[G].moveBy(j,0);var Z=this.$getSelectedRows(z[G]);if(E&&Z.first!=Q)break;if(!E&&Z.first>Q+1)break;Q=Z.last}for(G--,U=this.session.$moveLines(Y,Q,E?0:S),E&&S==-1&&(K=G+1);K<=G;)z[K].moveBy(U,0),K++;E||(U=0),j+=U}P.fromOrientedRange(P.ranges[0]),P.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},L.prototype.$getSelectedRows=function(S){return S=(S||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(S.start.row),last:this.session.getRowFoldEnd(S.end.row)}},L.prototype.onCompositionStart=function(S){this.renderer.showComposition(S)},L.prototype.onCompositionUpdate=function(S){this.renderer.setCompositionText(S)},L.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},L.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},L.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},L.prototype.isRowVisible=function(S){return S>=this.getFirstVisibleRow()&&S<=this.getLastVisibleRow()},L.prototype.isRowFullyVisible=function(S){return S>=this.renderer.getFirstFullyVisibleRow()&&S<=this.renderer.getLastFullyVisibleRow()},L.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},L.prototype.$moveByPage=function(S,E){var T=this.renderer,B=this.renderer.layerConfig,P=S*Math.floor(B.height/B.lineHeight);E===!0?this.selection.$moveSelection(function(){this.moveCursorBy(P,0)}):E===!1&&(this.selection.moveCursorBy(P,0),this.selection.clearSelection());var W=T.scrollTop;T.scrollBy(0,P*B.lineHeight),E!=null&&T.scrollCursorIntoView(null,.5),T.animateScrolling(W)},L.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},L.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},L.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},L.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},L.prototype.scrollPageDown=function(){this.$moveByPage(1)},L.prototype.scrollPageUp=function(){this.$moveByPage(-1)},L.prototype.scrollToRow=function(S){this.renderer.scrollToRow(S)},L.prototype.scrollToLine=function(S,E,T,B){this.renderer.scrollToLine(S,E,T,B)},L.prototype.centerSelection=function(){var S=this.getSelectionRange(),E={row:Math.floor(S.start.row+(S.end.row-S.start.row)/2),column:Math.floor(S.start.column+(S.end.column-S.start.column)/2)};this.renderer.alignCursor(E,.5)},L.prototype.getCursorPosition=function(){return this.selection.getCursor()},L.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},L.prototype.getSelectionRange=function(){return this.selection.getRange()},L.prototype.selectAll=function(){this.selection.selectAll()},L.prototype.clearSelection=function(){this.selection.clearSelection()},L.prototype.moveCursorTo=function(S,E){this.selection.moveCursorTo(S,E)},L.prototype.moveCursorToPosition=function(S){this.selection.moveCursorToPosition(S)},L.prototype.jumpToMatching=function(S,E){var T=this.getCursorPosition(),B=new M(this.session,T.row,T.column),P=B.getCurrentToken(),W=0;P&&P.type.indexOf("tag-name")!==-1&&(P=B.stepBackward());var z=P||B.stepForward();if(z){var U,j=!1,V={},G=T.column-z.start,K,Y={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(z.value.match(/[{}()\[\]]/g)){for(;G<z.value.length&&!j;G++)if(Y[z.value[G]])switch(K=Y[z.value[G]]+"."+z.type.replace("rparen","lparen"),isNaN(V[K])&&(V[K]=0),z.value[G]){case"(":case"[":case"{":V[K]++;break;case")":case"]":case"}":V[K]--,V[K]===-1&&(U="bracket",j=!0);break}}else z.type.indexOf("tag-name")!==-1&&(isNaN(V[z.value])&&(V[z.value]=0),P.value==="<"&&W>1?V[z.value]++:P.value==="</"&&V[z.value]--,V[z.value]===-1&&(U="tag",j=!0));j||(P=z,W++,z=B.stepForward(),G=0)}while(z&&!j);if(U){var Q,Z;if(U==="bracket")Q=this.session.getBracketRange(T),Q||(Q=new p(B.getCurrentTokenRow(),B.getCurrentTokenColumn()+G-1,B.getCurrentTokenRow(),B.getCurrentTokenColumn()+G-1),Z=Q.start,(E||Z.row===T.row&&Math.abs(Z.column-T.column)<2)&&(Q=this.session.getBracketRange(Z)));else if(U==="tag"){if(!z||z.type.indexOf("tag-name")===-1)return;if(Q=new p(B.getCurrentTokenRow(),B.getCurrentTokenColumn()-2,B.getCurrentTokenRow(),B.getCurrentTokenColumn()-2),Q.compare(T.row,T.column)===0){var J=this.session.getMatchingTags(T);J&&(J.openTag.contains(T.row,T.column)?(Q=J.closeTag,Z=Q.start):(Q=J.openTag,J.closeTag.start.row===T.row&&J.closeTag.start.column===T.column?Z=Q.end:Z=Q.start))}Z=Z||Q.start}Z=Q&&Q.cursor||Z,Z&&(S?Q&&E?this.selection.setRange(Q):Q&&Q.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(Z.row,Z.column):this.selection.moveTo(Z.row,Z.column))}}},L.prototype.gotoLine=function(S,E,T){this.selection.clearSelection(),this.session.unfold({row:S-1,column:E||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(S-1,E||0),this.isRowFullyVisible(S-1)||this.scrollToLine(S-1,!0,T)},L.prototype.navigateTo=function(S,E){this.selection.moveTo(S,E)},L.prototype.navigateUp=function(S){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var E=this.selection.anchor.getPosition();return this.moveCursorToPosition(E)}this.selection.clearSelection(),this.selection.moveCursorBy(-S||-1,0)},L.prototype.navigateDown=function(S){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var E=this.selection.anchor.getPosition();return this.moveCursorToPosition(E)}this.selection.clearSelection(),this.selection.moveCursorBy(S||1,0)},L.prototype.navigateLeft=function(S){if(this.selection.isEmpty())for(S=S||1;S--;)this.selection.moveCursorLeft();else{var E=this.getSelectionRange().start;this.moveCursorToPosition(E)}this.clearSelection()},L.prototype.navigateRight=function(S){if(this.selection.isEmpty())for(S=S||1;S--;)this.selection.moveCursorRight();else{var E=this.getSelectionRange().end;this.moveCursorToPosition(E)}this.clearSelection()},L.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},L.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},L.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},L.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},L.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},L.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},L.prototype.replace=function(S,E){E&&this.$search.set(E);var T=this.$search.find(this.session),B=0;return T&&(this.$tryReplace(T,S)&&(B=1),this.selection.setSelectionRange(T),this.renderer.scrollSelectionIntoView(T.start,T.end)),B},L.prototype.replaceAll=function(S,E){E&&this.$search.set(E);var T=this.$search.findAll(this.session),B=0;if(!T.length)return B;var P=this.getSelectionRange();this.selection.moveTo(0,0);for(var W=T.length-1;W>=0;--W)this.$tryReplace(T[W],S)&&B++;return this.selection.setSelectionRange(P),B},L.prototype.$tryReplace=function(S,E){var T=this.session.getTextRange(S);return E=this.$search.replace(T,E),E!==null?(S.end=this.session.replace(S,E),S):null},L.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},L.prototype.find=function(S,E,T){E||(E={}),typeof S=="string"||S instanceof RegExp?E.needle=S:typeof S=="object"&&$.mixin(E,S);var B=this.selection.getRange();E.needle==null&&(S=this.session.getTextRange(B)||this.$search.$options.needle,S||(B=this.session.getWordRange(B.start.row,B.start.column),S=this.session.getTextRange(B)),this.$search.set({needle:S})),this.$search.set(E),E.start||this.$search.set({start:B});var P=this.$search.find(this.session);if(E.preventScroll)return P;if(P)return this.revealRange(P,T),P;E.backwards?B.start=B.end:B.end=B.start,this.selection.setRange(B)},L.prototype.findNext=function(S,E){this.find({skipCurrent:!0,backwards:!1},S,E)},L.prototype.findPrevious=function(S,E){this.find(S,{skipCurrent:!0,backwards:!0},E)},L.prototype.revealRange=function(S,E){this.session.unfold(S),this.selection.setSelectionRange(S);var T=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(S.start,S.end,.5),E!==!1&&this.renderer.animateScrolling(T)},L.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},L.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},L.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(S){S.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},L.prototype.setAutoScrollEditorIntoView=function(S){if(S){var E,T=this,B=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var P=this.$scrollAnchor;P.style.cssText="position:absolute",this.container.insertBefore(P,this.container.firstChild);var W=this.on("changeSelection",function(){B=!0}),z=this.renderer.on("beforeRender",function(){B&&(E=T.renderer.container.getBoundingClientRect())}),U=this.renderer.on("afterRender",function(){if(B&&E&&(T.isFocused()||T.searchBox&&T.searchBox.isFocused())){var j=T.renderer,V=j.$cursorLayer.$pixelPos,G=j.layerConfig,K=V.top-G.offset;V.top>=0&&K+E.top<0?B=!0:V.top<G.height&&V.top+E.top+G.lineHeight>window.innerHeight?B=!1:B=null,B!=null&&(P.style.top=K+"px",P.style.left=V.left+"px",P.style.height=G.lineHeight+"px",P.scrollIntoView(B)),B=E=null}});this.setAutoScrollEditorIntoView=function(j){j||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",W),this.renderer.off("afterRender",U),this.renderer.off("beforeRender",z))}}},L.prototype.$resetCursorStyle=function(){var S=this.$cursorStyle||"ace",E=this.renderer.$cursorLayer;E&&(E.setSmoothBlinking(/smooth/.test(S)),E.isBlinking=!this.$readOnly&&S!="wide",w.setCssClass(E.element,"ace_slim-cursors",/slim/.test(S)))},L.prototype.prompt=function(S,E,T){var B=this;_.loadModule("ace/ext/prompt",function(P){P.prompt(B,S,E,T)})},L}();R.$uid=0,R.prototype.curOp=null,R.prototype.prevOp={},R.prototype.$mergeableCommands=["backspace","del","insertstring"],R.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],$.implement(R.prototype,v),_.defineOptions(R.prototype,"editor",{selectionStyle:{set:function(L){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:L})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(L){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(L){this.textInput.setReadOnly(L),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(L){this.textInput.setCopyWithEmptySelection(L)},initialValue:!1},cursorStyle:{set:function(L){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(L){this.setAutoScrollEditorIntoView(L)}},keyboardHandler:{set:function(L){this.setKeyboardHandler(L)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(L){this.session.setValue(L)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(L){this.setSession(L)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(L){this.renderer.$gutterLayer.setShowLineNumbers(L),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),L&&this.$relativeLineNumbers?I.attach(this):I.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(L){this.$showLineNumbers&&L?I.attach(this):I.detach(this)}},placeholder:{set:function(L){this.$updatePlaceholder||(this.$updatePlaceholder=(function(){var S=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(S&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),w.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!S&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),w.addCssClass(this.container,"ace_hasPlaceholder");var E=w.createElement("div");E.className="ace_placeholder",E.textContent=this.$placeholder||"",this.renderer.placeholderNode=E,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!S&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}).bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(L){var S={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(B){B.blur(),B.renderer.scroller.focus()},readOnly:!0},E=function(B){if(B.target==this.renderer.scroller&&B.keyCode===H.enter){B.preventDefault();var P=this.getCursorPosition().row;this.isRowVisible(P)||this.scrollToLine(P,!0,!0),this.focus()}},T;L?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(d.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",N("editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",N("Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",E.bind(this)),this.commands.addCommand(S),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",N("editor")),this.renderer.$gutter.setAttribute("aria-label",N("Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),T||(T=new F(this)),T.addListener()):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",E.bind(this)),this.commands.removeCommand(S),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),T&&T.removeListener())},initialValue:!1},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var I={getText:function(L,S){return(Math.abs(L.selection.lead.row-S)||S+1+(S<9?"·":""))+""},getWidth:function(L,S,E){return Math.max(S.toString().length,(E.lastRow+1).toString().length,2)*E.characterWidth},update:function(L,S){S.renderer.$loop.schedule(S.renderer.CHANGE_GUTTER)},attach:function(L){L.renderer.$gutterLayer.$renderer=this,L.on("changeSelection",this.update),this.update(null,L)},detach:function(L){L.renderer.$gutterLayer.$renderer==this&&(L.renderer.$gutterLayer.$renderer=null),L.off("changeSelection",this.update),this.update(null,L)}};f.Editor=R}),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(s,f,C){var b=s("../lib/dom"),$=function(){function w(h,d){this.element=h,this.canvasHeight=d||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return w.prototype.moveContainer=function(h){b.translate(this.element,0,-(h.firstRowScreen*h.lineHeight%this.canvasHeight)-h.offset*this.$offsetCoefficient)},w.prototype.pageChanged=function(h,d){return Math.floor(h.firstRowScreen*h.lineHeight/this.canvasHeight)!==Math.floor(d.firstRowScreen*d.lineHeight/this.canvasHeight)},w.prototype.computeLineTop=function(h,d,i){var r=d.firstRowScreen*d.lineHeight,n=Math.floor(r/this.canvasHeight),t=i.documentToScreenRow(h,0)*d.lineHeight;return t-n*this.canvasHeight},w.prototype.computeLineHeight=function(h,d,i){return d.lineHeight*i.getRowLineCount(h)},w.prototype.getLength=function(){return this.cells.length},w.prototype.get=function(h){return this.cells[h]},w.prototype.shift=function(){this.$cacheCell(this.cells.shift())},w.prototype.pop=function(){this.$cacheCell(this.cells.pop())},w.prototype.push=function(h){if(Array.isArray(h)){this.cells.push.apply(this.cells,h);for(var d=b.createFragment(this.element),i=0;i<h.length;i++)d.appendChild(h[i].element);this.element.appendChild(d)}else this.cells.push(h),this.element.appendChild(h.element)},w.prototype.unshift=function(h){if(Array.isArray(h)){this.cells.unshift.apply(this.cells,h);for(var d=b.createFragment(this.element),i=0;i<h.length;i++)d.appendChild(h[i].element);this.element.firstChild?this.element.insertBefore(d,this.element.firstChild):this.element.appendChild(d)}else this.cells.unshift(h),this.element.insertAdjacentElement("afterbegin",h.element)},w.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},w.prototype.$cacheCell=function(h){h&&(h.element.remove(),this.cellCache.push(h))},w.prototype.createCell=function(h,d,i,r){var n=this.cellCache.pop();if(!n){var t=b.createElement("div");r&&r(t),this.element.appendChild(t),n={element:t,text:"",row:h}}return n.row=h,n},w}();f.Lines=$}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(s,f,C){var b=s("../lib/dom"),$=s("../lib/oop"),w=s("../lib/lang"),h=s("../lib/event_emitter").EventEmitter,d=s("./lines").Lines,i=s("../config").nls,r=function(){function t(o){this.element=b.createElement("div"),this.element.className="ace_layer ace_gutter-layer",o.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new d(this.element),this.$lines.$offsetCoefficient=1}return t.prototype.setSession=function(o){this.session&&this.session.off("change",this.$updateAnnotations),this.session=o,o&&o.on("change",this.$updateAnnotations)},t.prototype.addGutterDecoration=function(o,l){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(o,l)},t.prototype.removeGutterDecoration=function(o,l){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(o,l)},t.prototype.setAnnotations=function(o){this.$annotations=[];for(var l=0;l<o.length;l++){var p=o[l],v=p.row,k=this.$annotations[v];k||(k=this.$annotations[v]={text:[],type:[]});var D=p.text,_=p.type;D=D?w.escapeHTML(D):p.html||"",k.text.indexOf(D)===-1&&(k.text.push(D),k.type.push(_));var M=p.className;M?k.className=M:_=="error"?k.className=" ace_error":_=="warning"&&k.className!=" ace_error"?k.className=" ace_warning":_=="info"&&!k.className&&(k.className=" ace_info")}},t.prototype.$updateAnnotations=function(o){if(this.$annotations.length){var l=o.start.row,p=o.end.row-l;if(p!==0)if(o.action=="remove")this.$annotations.splice(l,p+1,null);else{var v=new Array(p+1);v.unshift(l,1),this.$annotations.splice.apply(this.$annotations,v)}}},t.prototype.update=function(o){this.config=o;var l=this.session,p=o.firstRow,v=Math.min(o.lastRow+o.gutterOffset,l.getLength()-1);this.oldLastRow=v,this.config=o,this.$lines.moveContainer(o),this.$updateCursorRow();for(var k=l.getNextFoldLine(p),D=k?k.start.row:1/0,_=null,M=-1,A=p;;){if(A>D&&(A=k.end.row+1,k=l.getNextFoldLine(A,k),D=k?k.start.row:1/0),A>v){for(;this.$lines.getLength()>M+1;)this.$lines.pop();break}_=this.$lines.get(++M),_?_.row=A:(_=this.$lines.createCell(A,o,this.session,n),this.$lines.push(_)),this.$renderCell(_,o,k,A),A++}this._signal("afterRender"),this.$updateGutterWidth(o)},t.prototype.$updateGutterWidth=function(o){var l=this.session,p=l.gutterRenderer||this.$renderer,v=l.$firstLineNumber,k=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||l.$useWrapMode)&&(k=l.getLength()+v-1);var D=p?p.getWidth(l,k,o):k.toString().length*o.characterWidth,_=this.$padding||this.$computePadding();D+=_.left+_.right,D!==this.gutterWidth&&!isNaN(D)&&(this.gutterWidth=D,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",D))},t.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var o=this.session.selection.getCursor();this.$cursorRow!==o.row&&(this.$cursorRow=o.row)}},t.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var o=this.session.selection.cursor.row;if(this.$cursorRow=o,!(this.$cursorCell&&this.$cursorCell.row==o)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var l=this.$lines.cells;this.$cursorCell=null;for(var p=0;p<l.length;p++){var v=l[p];if(v.row>=this.$cursorRow){if(v.row>this.$cursorRow){var k=this.session.getFoldLine(this.$cursorRow);if(p>0&&k&&k.start.row==l[p-1].row)v=l[p-1];else break}v.element.className="ace_gutter-active-line "+v.element.className,this.$cursorCell=v;break}}}}},t.prototype.scrollLines=function(o){var l=this.config;if(this.config=o,this.$updateCursorRow(),this.$lines.pageChanged(l,o))return this.update(o);this.$lines.moveContainer(o);var p=Math.min(o.lastRow+o.gutterOffset,this.session.getLength()-1),v=this.oldLastRow;if(this.oldLastRow=p,!l||v<o.firstRow)return this.update(o);if(p<l.firstRow)return this.update(o);if(l.firstRow<o.firstRow)for(var k=this.session.getFoldedRowCount(l.firstRow,o.firstRow-1);k>0;k--)this.$lines.shift();if(v>p)for(var k=this.session.getFoldedRowCount(p+1,v);k>0;k--)this.$lines.pop();o.firstRow<l.firstRow&&this.$lines.unshift(this.$renderLines(o,o.firstRow,l.firstRow-1)),p>v&&this.$lines.push(this.$renderLines(o,v+1,p)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(o)},t.prototype.$renderLines=function(o,l,p){for(var v=[],k=l,D=this.session.getNextFoldLine(k),_=D?D.start.row:1/0;k>_&&(k=D.end.row+1,D=this.session.getNextFoldLine(k,D),_=D?D.start.row:1/0),!(k>p);){var M=this.$lines.createCell(k,o,this.session,n);this.$renderCell(M,o,D,k),v.push(M),k++}return v},t.prototype.$renderCell=function(o,l,p,v){var k=o.element,D=this.session,_=k.childNodes[0],M=k.childNodes[1],A=k.childNodes[2],F=A.firstChild,N=D.$firstLineNumber,O=D.$breakpoints,H=D.$decorations,R=D.gutterRenderer||this.$renderer,I=this.$showFoldWidgets&&D.foldWidgets,L=p?p.start.row:Number.MAX_VALUE,S=l.lineHeight+"px",E=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",T=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",B=(R?R.getText(D,v):v+N).toString();if(this.$highlightGutterLine&&(v==this.$cursorRow||p&&v<this.$cursorRow&&v>=L&&this.$cursorRow<=p.end.row)&&(E+="ace_gutter-active-line ",this.$cursorCell!=o&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=o)),O[v]&&(E+=O[v]),H[v]&&(E+=H[v]),this.$annotations[v]&&v!==L&&(E+=this.$annotations[v].className),I){var P=I[v];P==null&&(P=I[v]=D.getFoldWidget(v))}if(P){var W="ace_fold-widget ace_"+P,z=P=="start"&&v==L&&v<p.end.row;if(z){W+=" ace_closed";for(var U="",j=!1,V=v+1;V<=p.end.row;V++)if(this.$annotations[V]){if(this.$annotations[V].className===" ace_error"){j=!0,U=" ace_error_fold";break}if(this.$annotations[V].className===" ace_warning"){j=!0,U=" ace_warning_fold";continue}}E+=U}else W+=" ace_open";M.className!=W&&(M.className=W),b.setStyle(M.style,"height",S),b.setStyle(M.style,"display","inline-block"),M.setAttribute("role","button"),M.setAttribute("tabindex","-1");var G=D.getFoldWidgetRange(v);G?M.setAttribute("aria-label",i("Toggle code folding, rows $0 through $1",[G.start.row+1,G.end.row+1])):p?M.setAttribute("aria-label",i("Toggle code folding, rows $0 through $1",[p.start.row+1,p.end.row+1])):M.setAttribute("aria-label",i("Toggle code folding, row $0",[v+1])),z?(M.setAttribute("aria-expanded","false"),M.setAttribute("title",i("Unfold code"))):(M.setAttribute("aria-expanded","true"),M.setAttribute("title",i("Fold code")))}else M&&(b.setStyle(M.style,"display","none"),M.setAttribute("tabindex","0"),M.removeAttribute("role"),M.removeAttribute("aria-label"));return j&&this.$showFoldedAnnotations?(A.className="ace_gutter_annotation",F.className=T,F.className+=U,b.setStyle(F.style,"height",S),b.setStyle(A.style,"display","block"),b.setStyle(A.style,"height",S),A.setAttribute("aria-label",i("Read annotations row $0",[B])),A.setAttribute("tabindex","-1"),A.setAttribute("role","button")):this.$annotations[v]?(A.className="ace_gutter_annotation",F.className=T,this.$useSvgGutterIcons?F.className+=this.$annotations[v].className:k.classList.add(this.$annotations[v].className.replace(" ","")),b.setStyle(F.style,"height",S),b.setStyle(A.style,"display","block"),b.setStyle(A.style,"height",S),A.setAttribute("aria-label",i("Read annotations row $0",[B])),A.setAttribute("tabindex","-1"),A.setAttribute("role","button")):(b.setStyle(A.style,"display","none"),A.removeAttribute("aria-label"),A.removeAttribute("role"),A.setAttribute("tabindex","0")),B!==_.data&&(_.data=B),k.className!=E&&(k.className=E),b.setStyle(o.element.style,"height",this.$lines.computeLineHeight(v,l,D)+"px"),b.setStyle(o.element.style,"top",this.$lines.computeLineTop(v,l,D)+"px"),o.text=B,A.style.display==="none"&&M.style.display==="none"?o.element.setAttribute("aria-hidden",!0):o.element.setAttribute("aria-hidden",!1),o},t.prototype.setHighlightGutterLine=function(o){this.$highlightGutterLine=o},t.prototype.setShowLineNumbers=function(o){this.$renderer=!o&&{getWidth:function(){return 0},getText:function(){return""}}},t.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},t.prototype.setShowFoldWidgets=function(o){o?b.addCssClass(this.element,"ace_folding-enabled"):b.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=o,this.$padding=null},t.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},t.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var o=b.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(o.borderLeftWidth)||0)+(parseInt(o.paddingLeft)||0)+1,this.$padding.right=(parseInt(o.borderRightWidth)||0)+(parseInt(o.paddingRight)||0),this.$padding},t.prototype.getRegion=function(o){var l=this.$padding||this.$computePadding(),p=this.element.getBoundingClientRect();if(o.x<l.left+p.left)return"markers";if(this.$showFoldWidgets&&o.x>p.right-l.right)return"foldWidgets"},t}();r.prototype.$fixedWidth=!1,r.prototype.$highlightGutterLine=!0,r.prototype.$renderer="",r.prototype.$showLineNumbers=!0,r.prototype.$showFoldWidgets=!0,$.implement(r.prototype,h);function n(t){var o=document.createTextNode("");t.appendChild(o);var l=b.createElement("span");t.appendChild(l);var p=b.createElement("span");t.appendChild(p);var v=b.createElement("span");return p.appendChild(v),t}f.Gutter=r}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(s,f,C){var b=s("../range").Range,$=s("../lib/dom"),w=function(){function d(i){this.element=$.createElement("div"),this.element.className="ace_layer ace_marker-layer",i.appendChild(this.element)}return d.prototype.setPadding=function(i){this.$padding=i},d.prototype.setSession=function(i){this.session=i},d.prototype.setMarkers=function(i){this.markers=i},d.prototype.elt=function(i,r){var n=this.i!=-1&&this.element.childNodes[this.i];n?this.i++:(n=document.createElement("div"),this.element.appendChild(n),this.i=-1),n.style.cssText=r,n.className=i},d.prototype.update=function(i){if(i){this.config=i,this.i=0;var r;for(var n in this.markers){var t=this.markers[n];if(!t.range){t.update(r,this,this.session,i);continue}var o=t.range.clipRows(i.firstRow,i.lastRow);if(!o.isEmpty())if(o=o.toScreenRange(this.session),t.renderer){var l=this.$getTop(o.start.row,i),p=this.$padding+o.start.column*i.characterWidth;t.renderer(r,o,p,l,i)}else t.type=="fullLine"?this.drawFullLineMarker(r,o,t.clazz,i):t.type=="screenLine"?this.drawScreenLineMarker(r,o,t.clazz,i):o.isMultiLine()?t.type=="text"?this.drawTextMarker(r,o,t.clazz,i):this.drawMultiLineMarker(r,o,t.clazz,i):this.drawSingleLineMarker(r,o,t.clazz+" ace_start ace_br15",i)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},d.prototype.$getTop=function(i,r){return(i-r.firstRowScreen)*r.lineHeight},d.prototype.drawTextMarker=function(i,r,n,t,o){for(var l=this.session,p=r.start.row,v=r.end.row,k=p,D=0,_=0,M=l.getScreenLastRowColumn(k),A=new b(k,r.start.column,k,_);k<=v;k++)A.start.row=A.end.row=k,A.start.column=k==p?r.start.column:l.getRowWrapIndent(k),A.end.column=M,D=_,_=M,M=k+1<v?l.getScreenLastRowColumn(k+1):k==v?0:r.end.column,this.drawSingleLineMarker(i,A,n+(k==p?" ace_start":"")+" ace_br"+h(k==p||k==p+1&&r.start.column,D<_,_>M,k==v),t,k==v?0:1,o)},d.prototype.drawMultiLineMarker=function(i,r,n,t,o){var l=this.$padding,p=t.lineHeight,v=this.$getTop(r.start.row,t),k=l+r.start.column*t.characterWidth;if(o=o||"",this.session.$bidiHandler.isBidiRow(r.start.row)){var D=r.clone();D.end.row=D.start.row,D.end.column=this.session.getLine(D.start.row).length,this.drawBidiSingleLineMarker(i,D,n+" ace_br1 ace_start",t,null,o)}else this.elt(n+" ace_br1 ace_start","height:"+p+"px;right:0;top:"+v+"px;left:"+k+"px;"+(o||""));if(this.session.$bidiHandler.isBidiRow(r.end.row)){var D=r.clone();D.start.row=D.end.row,D.start.column=0,this.drawBidiSingleLineMarker(i,D,n+" ace_br12",t,null,o)}else{v=this.$getTop(r.end.row,t);var _=r.end.column*t.characterWidth;this.elt(n+" ace_br12","height:"+p+"px;width:"+_+"px;top:"+v+"px;left:"+l+"px;"+(o||""))}if(p=(r.end.row-r.start.row-1)*t.lineHeight,!(p<=0)){v=this.$getTop(r.start.row+1,t);var M=(r.start.column?1:0)|(r.end.column?0:8);this.elt(n+(M?" ace_br"+M:""),"height:"+p+"px;right:0;top:"+v+"px;left:"+l+"px;"+(o||""))}},d.prototype.drawSingleLineMarker=function(i,r,n,t,o,l){if(this.session.$bidiHandler.isBidiRow(r.start.row))return this.drawBidiSingleLineMarker(i,r,n,t,o,l);var p=t.lineHeight,v=(r.end.column+(o||0)-r.start.column)*t.characterWidth,k=this.$getTop(r.start.row,t),D=this.$padding+r.start.column*t.characterWidth;this.elt(n,"height:"+p+"px;width:"+v+"px;top:"+k+"px;left:"+D+"px;"+(l||""))},d.prototype.drawBidiSingleLineMarker=function(i,r,n,t,o,l){var p=t.lineHeight,v=this.$getTop(r.start.row,t),k=this.$padding,D=this.session.$bidiHandler.getSelections(r.start.column,r.end.column);D.forEach(function(_){this.elt(n,"height:"+p+"px;width:"+(_.width+(o||0))+"px;top:"+v+"px;left:"+(k+_.left)+"px;"+(l||""))},this)},d.prototype.drawFullLineMarker=function(i,r,n,t,o){var l=this.$getTop(r.start.row,t),p=t.lineHeight;r.start.row!=r.end.row&&(p+=this.$getTop(r.end.row,t)-l),this.elt(n,"height:"+p+"px;top:"+l+"px;left:0;right:0;"+(o||""))},d.prototype.drawScreenLineMarker=function(i,r,n,t,o){var l=this.$getTop(r.start.row,t),p=t.lineHeight;this.elt(n,"height:"+p+"px;top:"+l+"px;left:0;right:0;"+(o||""))},d}();w.prototype.$padding=0;function h(d,i,r,n){return(d?1:0)|(i?2:0)|(r?4:0)|(n?8:0)}f.Marker=w}),ace.define("ace/layer/text_util",["require","exports","module"],function(s,f,C){var b=new Set(["text","rparen","lparen"]);f.isTextToken=function($){return b.has($)}}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(s,f,C){var b=s("../lib/oop"),$=s("../lib/dom"),w=s("../lib/lang"),h=s("./lines").Lines,d=s("../lib/event_emitter").EventEmitter,i=s("../config").nls,r=s("./text_util").isTextToken,n=function(){function t(o){this.dom=$,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",o.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new h(this.element)}return t.prototype.$updateEolChar=function(){var o=this.session.doc,l=o.getNewLineCharacter()==`
`&&o.getNewLineMode()!="windows",p=l?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=p)return this.EOL_CHAR=p,!0},t.prototype.setPadding=function(o){this.$padding=o,this.element.style.margin="0 "+o+"px"},t.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},t.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},t.prototype.$setFontMetrics=function(o){this.$fontMetrics=o,this.$fontMetrics.on("changeCharacterSize",(function(l){this._signal("changeCharacterSize",l)}).bind(this)),this.$pollSizeChanges()},t.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},t.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},t.prototype.setSession=function(o){this.session=o,o&&this.$computeTabString()},t.prototype.setShowInvisibles=function(o){return this.showInvisibles==o?!1:(this.showInvisibles=o,typeof o=="string"?(this.showSpaces=/tab/i.test(o),this.showTabs=/space/i.test(o),this.showEOL=/eol/i.test(o)):this.showSpaces=this.showTabs=this.showEOL=o,this.$computeTabString(),!0)},t.prototype.setDisplayIndentGuides=function(o){return this.displayIndentGuides==o?!1:(this.displayIndentGuides=o,this.$computeTabString(),!0)},t.prototype.setHighlightIndentGuides=function(o){return this.$highlightIndentGuides===o?!1:(this.$highlightIndentGuides=o,o)},t.prototype.$computeTabString=function(){var o=this.session.getTabSize();this.tabSize=o;for(var l=this.$tabStrings=[0],p=1;p<o+1;p++)if(this.showTabs){var v=this.dom.createElement("span");v.className="ace_invisible ace_invisible_tab",v.textContent=w.stringRepeat(this.TAB_CHAR,p),l.push(v)}else l.push(this.dom.createTextNode(w.stringRepeat(" ",p),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var k="ace_indent-guide",D=this.showSpaces?" ace_invisible ace_invisible_space":"",_=this.showSpaces?w.stringRepeat(this.SPACE_CHAR,this.tabSize):w.stringRepeat(" ",this.tabSize),M=this.showTabs?" ace_invisible ace_invisible_tab":"",A=this.showTabs?w.stringRepeat(this.TAB_CHAR,this.tabSize):_,v=this.dom.createElement("span");v.className=k+D,v.textContent=_,this.$tabStrings[" "]=v;var v=this.dom.createElement("span");v.className=k+M,v.textContent=A,this.$tabStrings["	"]=v}},t.prototype.updateLines=function(o,l,p){if(this.config.lastRow!=o.lastRow||this.config.firstRow!=o.firstRow)return this.update(o);this.config=o;for(var v=Math.max(l,o.firstRow),k=Math.min(p,o.lastRow),D=this.element.childNodes,_=0,A=o.firstRow;A<v;A++){var F=this.session.getFoldLine(A);if(F)if(F.containsRow(v)){v=F.start.row;break}else A=F.end.row;_++}for(var M=!1,A=v,F=this.session.getNextFoldLine(A),N=F?F.start.row:1/0;A>N&&(A=F.end.row+1,F=this.session.getNextFoldLine(A,F),N=F?F.start.row:1/0),!(A>k);){var O=D[_++];if(O){this.dom.removeChildren(O),this.$renderLine(O,A,A==N?F:!1),M&&(O.style.top=this.$lines.computeLineTop(A,o,this.session)+"px");var H=o.lineHeight*this.session.getRowLength(A)+"px";O.style.height!=H&&(M=!0,O.style.height=H)}A++}if(M)for(;_<this.$lines.cells.length;){var R=this.$lines.cells[_++];R.element.style.top=this.$lines.computeLineTop(R.row,o,this.session)+"px"}},t.prototype.scrollLines=function(o){var l=this.config;if(this.config=o,this.$lines.pageChanged(l,o))return this.update(o);this.$lines.moveContainer(o);var p=o.lastRow,v=l?l.lastRow:-1;if(!l||v<o.firstRow)return this.update(o);if(p<l.firstRow)return this.update(o);if(!l||l.lastRow<o.firstRow)return this.update(o);if(o.lastRow<l.firstRow)return this.update(o);if(l.firstRow<o.firstRow)for(var k=this.session.getFoldedRowCount(l.firstRow,o.firstRow-1);k>0;k--)this.$lines.shift();if(l.lastRow>o.lastRow)for(var k=this.session.getFoldedRowCount(o.lastRow+1,l.lastRow);k>0;k--)this.$lines.pop();o.firstRow<l.firstRow&&this.$lines.unshift(this.$renderLinesFragment(o,o.firstRow,l.firstRow-1)),o.lastRow>l.lastRow&&this.$lines.push(this.$renderLinesFragment(o,l.lastRow+1,o.lastRow)),this.$highlightIndentGuide()},t.prototype.$renderLinesFragment=function(o,l,p){for(var v=[],k=l,D=this.session.getNextFoldLine(k),_=D?D.start.row:1/0;k>_&&(k=D.end.row+1,D=this.session.getNextFoldLine(k,D),_=D?D.start.row:1/0),!(k>p);){var M=this.$lines.createCell(k,o,this.session),A=M.element;this.dom.removeChildren(A),$.setStyle(A.style,"height",this.$lines.computeLineHeight(k,o,this.session)+"px"),$.setStyle(A.style,"top",this.$lines.computeLineTop(k,o,this.session)+"px"),this.$renderLine(A,k,k==_?D:!1),this.$useLineGroups()?A.className="ace_line_group":A.className="ace_line",v.push(M),k++}return v},t.prototype.update=function(o){this.$lines.moveContainer(o),this.config=o;for(var l=o.firstRow,p=o.lastRow,v=this.$lines;v.getLength();)v.pop();v.push(this.$renderLinesFragment(o,l,p))},t.prototype.$renderToken=function(o,l,p,v){for(var k=this,D=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,_=this.dom.createFragment(this.element),M,A=0;M=D.exec(v);){var F=M[1],N=M[2],O=M[3],H=M[4],R=M[5];if(!(!k.showSpaces&&N)){var I=A!=M.index?v.slice(A,M.index):"";if(A=M.index+M[0].length,I&&_.appendChild(this.dom.createTextNode(I,this.element)),F){var L=k.session.getScreenTabSize(l+M.index);_.appendChild(k.$tabStrings[L].cloneNode(!0)),l+=L-1}else if(N)if(k.showSpaces){var S=this.dom.createElement("span");S.className="ace_invisible ace_invisible_space",S.textContent=w.stringRepeat(k.SPACE_CHAR,N.length),_.appendChild(S)}else _.appendChild(this.dom.createTextNode(N,this.element));else if(O){var S=this.dom.createElement("span");S.className="ace_invisible ace_invisible_space ace_invalid",S.textContent=w.stringRepeat(k.SPACE_CHAR,O.length),_.appendChild(S)}else if(H){l+=1;var S=this.dom.createElement("span");S.style.width=k.config.characterWidth*2+"px",S.className=k.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",S.textContent=k.showSpaces?k.SPACE_CHAR:H,_.appendChild(S)}else if(R){l+=1;var S=this.dom.createElement("span");S.style.width=k.config.characterWidth*2+"px",S.className="ace_cjk",S.textContent=R,_.appendChild(S)}}}if(_.appendChild(this.dom.createTextNode(A?v.slice(A):v,this.element)),r(p.type))o.appendChild(_);else{var E="ace_"+p.type.replace(/\./g," ace_"),S=this.dom.createElement("span");p.type=="fold"&&(S.style.width=p.value.length*this.config.characterWidth+"px",S.setAttribute("title",i("Unfold code"))),S.className=E,S.appendChild(_),o.appendChild(S)}return l+v.length},t.prototype.renderIndentGuide=function(o,l,p){var v=l.search(this.$indentGuideRe);if(v<=0||v>=p)return l;if(l[0]==" "){v-=v%this.tabSize;for(var k=v/this.tabSize,D=0;D<k;D++)o.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),l.substr(v)}else if(l[0]=="	"){for(var D=0;D<v;D++)o.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),l.substr(v)}return this.$highlightIndentGuide(),l},t.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var o=this.session.doc.$lines;if(o){var l=this.session.selection.getCursor(),p=/^\s*/.exec(this.session.doc.getLine(l.row))[0].length,v=Math.floor(p/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:v,start:l.row};var k=this.session.$bracketHighlight;if(k){for(var D=this.session.$bracketHighlight.ranges,_=0;_<D.length;_++)if(l.row!==D[_].start.row){this.$highlightIndentGuideMarker.end=D[_].start.row,l.row>D[_].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&o[l.row]!==""&&l.column===o[l.row].length){this.$highlightIndentGuideMarker.dir=1;for(var _=l.row+1;_<o.length;_++){var M=o[_],A=/^\s*/.exec(M)[0].length;if(M!==""&&(this.$highlightIndentGuideMarker.end=_,A<=p))break}}this.$renderHighlightIndentGuide()}}},t.prototype.$clearActiveIndentGuide=function(){for(var o=this.$lines.cells,l=0;l<o.length;l++){var p=o[l],v=p.element.childNodes;if(v.length>0){for(var k=0;k<v.length;k++)if(v[k].classList&&v[k].classList.contains("ace_indent-guide-active")){v[k].classList.remove("ace_indent-guide-active");break}}}},t.prototype.$setIndentGuideActive=function(o,l){var p=this.session.doc.getLine(o.row);if(p!==""){var v=o.element.childNodes;if(v){var k=v[l-1];k&&k.classList&&k.classList.contains("ace_indent-guide")&&k.classList.add("ace_indent-guide-active")}}},t.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var o=this.$lines.cells;this.$clearActiveIndentGuide();var l=this.$highlightIndentGuideMarker.indentLevel;if(l!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var p=0;p<o.length;p++){var v=o[p];if(this.$highlightIndentGuideMarker.end&&v.row>=this.$highlightIndentGuideMarker.start+1){if(v.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(v,l)}}else for(var p=o.length-1;p>=0;p--){var v=o[p];if(this.$highlightIndentGuideMarker.end&&v.row<this.$highlightIndentGuideMarker.start){if(v.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(v,l)}}}},t.prototype.$createLineElement=function(o){var l=this.dom.createElement("div");return l.className="ace_line",l.style.height=this.config.lineHeight+"px",l},t.prototype.$renderWrappedLine=function(o,l,p){var v=0,k=0,D=p[0],_=0,M=this.$createLineElement();o.appendChild(M);for(var A=0;A<l.length;A++){var F=l[A],N=F.value;if(A==0&&this.displayIndentGuides){if(v=N.length,N=this.renderIndentGuide(M,N,D),!N)continue;v-=N.length}if(v+N.length<D)_=this.$renderToken(M,_,F,N),v+=N.length;else{for(;v+N.length>=D;)_=this.$renderToken(M,_,F,N.substring(0,D-v)),N=N.substring(D-v),v=D,M=this.$createLineElement(),o.appendChild(M),M.appendChild(this.dom.createTextNode(w.stringRepeat(" ",p.indent),this.element)),k++,_=0,D=p[k]||Number.MAX_VALUE;N.length!=0&&(v+=N.length,_=this.$renderToken(M,_,F,N))}}p[p.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(M,_,null,"",!0)},t.prototype.$renderSimpleLine=function(o,l){for(var p=0,v=0;v<l.length;v++){var k=l[v],D=k.value;if(!(v==0&&this.displayIndentGuides&&(D=this.renderIndentGuide(o,D),!D))){if(p+D.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(o,p,k,D);p=this.$renderToken(o,p,k,D)}}},t.prototype.$renderOverflowMessage=function(o,l,p,v,k){p&&this.$renderToken(o,l,p,v.slice(0,this.MAX_LINE_LENGTH-l));var D=this.dom.createElement("span");D.className="ace_inline_button ace_keyword ace_toggle_wrap",D.textContent=k?"<hide>":"<click to see more...>",o.appendChild(D)},t.prototype.$renderLine=function(o,l,p){if(!p&&p!=!1&&(p=this.session.getFoldLine(l)),p)var v=this.$getFoldLineTokens(l,p);else var v=this.session.getTokens(l);var k=o;if(v.length){var D=this.session.getRowSplitData(l);if(D&&D.length){this.$renderWrappedLine(o,v,D);var k=o.lastChild}else{var k=o;this.$useLineGroups()&&(k=this.$createLineElement(),o.appendChild(k)),this.$renderSimpleLine(k,v)}}else this.$useLineGroups()&&(k=this.$createLineElement(),o.appendChild(k));if(this.showEOL&&k){p&&(l=p.end.row);var _=this.dom.createElement("span");_.className="ace_invisible ace_invisible_eol",_.textContent=l==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,k.appendChild(_)}},t.prototype.$getFoldLineTokens=function(o,l){var p=this.session,v=[];function k(_,M,A){for(var F=0,N=0;N+_[F].value.length<M;)if(N+=_[F].value.length,F++,F==_.length)return;if(N!=M){var O=_[F].value.substring(M-N);O.length>A-M&&(O=O.substring(0,A-M)),v.push({type:_[F].type,value:O}),N=M+O.length,F+=1}for(;N<A&&F<_.length;){var O=_[F].value;O.length+N>A?v.push({type:_[F].type,value:O.substring(0,A-N)}):v.push(_[F]),N+=O.length,F+=1}}var D=p.getTokens(o);return l.walk(function(_,M,A,F,N){_!=null?v.push({type:"fold",value:_}):(N&&(D=p.getTokens(M)),D.length&&k(D,F,A))},l.end.row,this.session.getLine(l.end.row).length),v},t.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},t}();n.prototype.EOF_CHAR="¶",n.prototype.EOL_CHAR_LF="¬",n.prototype.EOL_CHAR_CRLF="¤",n.prototype.EOL_CHAR=n.prototype.EOL_CHAR_LF,n.prototype.TAB_CHAR="—",n.prototype.SPACE_CHAR="·",n.prototype.$padding=0,n.prototype.MAX_LINE_LENGTH=1e4,n.prototype.showInvisibles=!1,n.prototype.showSpaces=!1,n.prototype.showTabs=!1,n.prototype.showEOL=!1,n.prototype.displayIndentGuides=!0,n.prototype.$highlightIndentGuides=!0,n.prototype.$tabStrings=[],n.prototype.destroy={},n.prototype.onChangeTabSize=n.prototype.$computeTabString,b.implement(n.prototype,d),f.Text=n}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(s,f,C){var b=s("../lib/dom"),$=function(){function w(h){this.element=b.createElement("div"),this.element.className="ace_layer ace_cursor-layer",h.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),b.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return w.prototype.$updateOpacity=function(h){for(var d=this.cursors,i=d.length;i--;)b.setStyle(d[i].style,"opacity",h?"":"0")},w.prototype.$startCssAnimation=function(){for(var h=this.cursors,d=h.length;d--;)h[d].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout((function(){this.$isAnimating&&b.addCssClass(this.element,"ace_animate-blinking")}).bind(this))},w.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,b.removeCssClass(this.element,"ace_animate-blinking")},w.prototype.setPadding=function(h){this.$padding=h},w.prototype.setSession=function(h){this.session=h},w.prototype.setBlinking=function(h){h!=this.isBlinking&&(this.isBlinking=h,this.restartTimer())},w.prototype.setBlinkInterval=function(h){h!=this.blinkInterval&&(this.blinkInterval=h,this.restartTimer())},w.prototype.setSmoothBlinking=function(h){h!=this.smoothBlinking&&(this.smoothBlinking=h,b.setCssClass(this.element,"ace_smooth-blinking",h),this.$updateCursors(!0),this.restartTimer())},w.prototype.addCursor=function(){var h=b.createElement("div");return h.className="ace_cursor",this.element.appendChild(h),this.cursors.push(h),h},w.prototype.removeCursor=function(){if(this.cursors.length>1){var h=this.cursors.pop();return h.parentNode.removeChild(h),h}},w.prototype.hideCursor=function(){this.isVisible=!1,b.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},w.prototype.showCursor=function(){this.isVisible=!0,b.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},w.prototype.restartTimer=function(){var h=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,b.removeCssClass(this.element,"ace_smooth-blinking")),h(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout((function(){this.$isSmoothBlinking&&b.addCssClass(this.element,"ace_smooth-blinking")}).bind(this))),b.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var d=(function(){this.timeoutId=setTimeout(function(){h(!1)},.6*this.blinkInterval)}).bind(this);this.intervalId=setInterval(function(){h(!0),d()},this.blinkInterval),d()}},w.prototype.getPixelPosition=function(h,d){if(!this.config||!this.session)return{left:0,top:0};h||(h=this.session.selection.getCursor());var i=this.session.documentToScreenPosition(h),r=this.$padding+(this.session.$bidiHandler.isBidiRow(i.row,h.row)?this.session.$bidiHandler.getPosLeft(i.column):i.column*this.config.characterWidth),n=(i.row-(d?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:r,top:n}},w.prototype.isCursorInView=function(h,d){return h.top>=0&&h.top<d.maxHeight},w.prototype.update=function(h){this.config=h;var d=this.session.$selectionMarkers,i=0,r=0;(d===void 0||d.length===0)&&(d=[{cursor:null}]);for(var i=0,n=d.length;i<n;i++){var t=this.getPixelPosition(d[i].cursor,!0);if(!((t.top>h.height+h.offset||t.top<0)&&i>1)){var o=this.cursors[r++]||this.addCursor(),l=o.style;this.drawCursor?this.drawCursor(o,t,h,d[i],this.session):this.isCursorInView(t,h)?(b.setStyle(l,"display","block"),b.translate(o,t.left,t.top),b.setStyle(l,"width",Math.round(h.characterWidth)+"px"),b.setStyle(l,"height",h.lineHeight+"px")):b.setStyle(l,"display","none")}}for(;this.cursors.length>r;)this.removeCursor();var p=this.session.getOverwrite();this.$setOverwrite(p),this.$pixelPos=t,this.restartTimer()},w.prototype.$setOverwrite=function(h){h!=this.overwrite&&(this.overwrite=h,h?b.addCssClass(this.element,"ace_overwrite-cursors"):b.removeCssClass(this.element,"ace_overwrite-cursors"))},w.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},w}();$.prototype.$padding=0,$.prototype.drawCursor=null,f.Cursor=$}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(s,f,C){var b=this&&this.__extends||function(){var o=function(l,p){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,k){v.__proto__=k}||function(v,k){for(var D in k)Object.prototype.hasOwnProperty.call(k,D)&&(v[D]=k[D])},o(l,p)};return function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");o(l,p);function v(){this.constructor=l}l.prototype=p===null?Object.create(p):(v.prototype=p.prototype,new v)}}(),$=s("./lib/oop"),w=s("./lib/dom"),h=s("./lib/event"),d=s("./lib/event_emitter").EventEmitter,i=32768,r=function(){function o(l,p){this.element=w.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+p,this.inner=w.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent=" ",this.element.appendChild(this.inner),l.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,h.addListener(this.element,"scroll",this.onScroll.bind(this)),h.addListener(this.element,"mousedown",h.preventDefault)}return o.prototype.setVisible=function(l){this.element.style.display=l?"":"none",this.isVisible=l,this.coeff=1},o}();$.implement(r.prototype,d);var n=function(o){b(l,o);function l(p,v){var k=o.call(this,p,"-v")||this;return k.scrollTop=0,k.scrollHeight=0,v.$scrollbarWidth=k.width=w.scrollbarWidth(p.ownerDocument),k.inner.style.width=k.element.style.width=(k.width||15)+5+"px",k.$minWidth=0,k}return l.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var p=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-p)/(this.coeff-p)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},l.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},l.prototype.setHeight=function(p){this.element.style.height=p+"px"},l.prototype.setScrollHeight=function(p){this.scrollHeight=p,p>i?(this.coeff=i/p,p=i):this.coeff!=1&&(this.coeff=1),this.inner.style.height=p+"px"},l.prototype.setScrollTop=function(p){this.scrollTop!=p&&(this.skipEvent=!0,this.scrollTop=p,this.element.scrollTop=p*this.coeff)},l}(r);n.prototype.setInnerHeight=n.prototype.setScrollHeight;var t=function(o){b(l,o);function l(p,v){var k=o.call(this,p,"-h")||this;return k.scrollLeft=0,k.height=v.$scrollbarWidth,k.inner.style.height=k.element.style.height=(k.height||15)+5+"px",k}return l.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},l.prototype.getHeight=function(){return this.isVisible?this.height:0},l.prototype.setWidth=function(p){this.element.style.width=p+"px"},l.prototype.setInnerWidth=function(p){this.inner.style.width=p+"px"},l.prototype.setScrollWidth=function(p){this.inner.style.width=p+"px"},l.prototype.setScrollLeft=function(p){this.scrollLeft!=p&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=p)},l}(r);f.ScrollBar=n,f.ScrollBarV=n,f.ScrollBarH=t,f.VScrollBar=n,f.HScrollBar=t}),ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(s,f,C){var b=this&&this.__extends||function(){var t=function(o,l){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,v){p.__proto__=v}||function(p,v){for(var k in v)Object.prototype.hasOwnProperty.call(v,k)&&(p[k]=v[k])},t(o,l)};return function(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");t(o,l);function p(){this.constructor=o}o.prototype=l===null?Object.create(l):(p.prototype=l.prototype,new p)}}(),$=s("./lib/oop"),w=s("./lib/dom"),h=s("./lib/event"),d=s("./lib/event_emitter").EventEmitter;w.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var i=function(){function t(o,l){this.element=w.createElement("div"),this.element.className="ace_sb"+l,this.inner=w.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,o.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,h.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return t.prototype.setVisible=function(o){this.element.style.display=o?"":"none",this.isVisible=o,this.coeff=1},t}();$.implement(i.prototype,d);var r=function(t){b(o,t);function o(l,p){var v=t.call(this,l,"-v")||this;return v.scrollTop=0,v.scrollHeight=0,v.parent=l,v.width=v.VScrollWidth,v.renderer=p,v.inner.style.width=v.element.style.width=(v.width||15)+"px",v.$minWidth=0,v}return o.prototype.onMouseDown=function(l,p){if(l==="mousedown"&&!(h.getButton(p)!==0||p.detail===2)){if(p.target===this.inner){var v=this,k=p.clientY,D=function(H){k=H.clientY},_=function(){clearInterval(N)},M=p.clientY,A=this.thumbTop,F=function(){if(k!==void 0){var H=v.scrollTopFromThumbTop(A+k-M);H!==v.scrollTop&&v._emit("scroll",{data:H})}};h.capture(this.inner,D,_);var N=setInterval(F,20);return h.preventDefault(p)}var O=p.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(O)}),h.preventDefault(p)}},o.prototype.getHeight=function(){return this.height},o.prototype.scrollTopFromThumbTop=function(l){var p=l*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return p=p>>0,p<0?p=0:p>this.pageHeight-this.viewHeight&&(p=this.pageHeight-this.viewHeight),p},o.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},o.prototype.setHeight=function(l){this.height=Math.max(0,l),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},o.prototype.setScrollHeight=function(l,p){this.pageHeight===l&&!p||(this.pageHeight=l,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},o.prototype.setScrollTop=function(l){this.scrollTop=l,l<0&&(l=0),this.thumbTop=l*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},o}(i);r.prototype.setInnerHeight=r.prototype.setScrollHeight;var n=function(t){b(o,t);function o(l,p){var v=t.call(this,l,"-h")||this;return v.scrollLeft=0,v.scrollWidth=0,v.height=v.HScrollHeight,v.inner.style.height=v.element.style.height=(v.height||12)+"px",v.renderer=p,v}return o.prototype.onMouseDown=function(l,p){if(l==="mousedown"&&!(h.getButton(p)!==0||p.detail===2)){if(p.target===this.inner){var v=this,k=p.clientX,D=function(H){k=H.clientX},_=function(){clearInterval(N)},M=p.clientX,A=this.thumbLeft,F=function(){if(k!==void 0){var H=v.scrollLeftFromThumbLeft(A+k-M);H!==v.scrollLeft&&v._emit("scroll",{data:H})}};h.capture(this.inner,D,_);var N=setInterval(F,20);return h.preventDefault(p)}var O=p.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(O)}),h.preventDefault(p)}},o.prototype.getHeight=function(){return this.isVisible?this.height:0},o.prototype.scrollLeftFromThumbLeft=function(l){var p=l*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return p=p>>0,p<0?p=0:p>this.pageWidth-this.viewWidth&&(p=this.pageWidth-this.viewWidth),p},o.prototype.setWidth=function(l){this.width=Math.max(0,l),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},o.prototype.setScrollWidth=function(l,p){this.pageWidth===l&&!p||(this.pageWidth=l,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},o.prototype.setScrollLeft=function(l){this.scrollLeft=l,l<0&&(l=0),this.thumbLeft=l*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},o}(i);n.prototype.setInnerWidth=n.prototype.setScrollWidth,f.ScrollBar=r,f.ScrollBarV=r,f.ScrollBarH=n,f.VScrollBar=r,f.HScrollBar=n}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(s,f,C){var b=s("./lib/event"),$=function(){function w(h,d){this.onRender=h,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=d||window;var i=this;this._flush=function(r){i.pending=!1;var n=i.changes;if(n&&(b.blockIdle(100),i.changes=0,i.onRender(n)),i.changes){if(i.$recursionLimit--<0)return;i.schedule()}else i.$recursionLimit=2}}return w.prototype.schedule=function(h){this.changes=this.changes|h,this.changes&&!this.pending&&(b.nextFrame(this._flush),this.pending=!0)},w.prototype.clear=function(h){var d=this.changes;return this.changes=0,d},w}();f.RenderLoop=$}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(s,f,C){var b=s("../lib/oop"),$=s("../lib/dom"),w=s("../lib/lang"),h=s("../lib/event"),d=s("../lib/useragent"),i=s("../lib/event_emitter").EventEmitter,r=512,n=typeof ResizeObserver=="function",t=200,o=function(){function l(p){this.el=$.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=$.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=$.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),p.appendChild(this.el),this.$measureNode.textContent=w.stringRepeat("X",r),this.$characterSize={width:0,height:0},n?this.$addObserver():this.checkForSizeChanges()}return l.prototype.$setMeasureNodeStyles=function(p,v){p.width=p.height="auto",p.left=p.top="0px",p.visibility="hidden",p.position="absolute",p.whiteSpace="pre",d.isIE<8?p["font-family"]="inherit":p.font="inherit",p.overflow=v?"hidden":"visible"},l.prototype.checkForSizeChanges=function(p){if(p===void 0&&(p=this.$measureSizes()),p&&(this.$characterSize.width!==p.width||this.$characterSize.height!==p.height)){this.$measureNode.style.fontWeight="bold";var v=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=p,this.charSizes=Object.create(null),this.allowBoldFonts=v&&v.width===p.width&&v.height===p.height,this._emit("changeCharacterSize",{data:p})}},l.prototype.$addObserver=function(){var p=this;this.$observer=new window.ResizeObserver(function(v){p.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},l.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var p=this;return this.$pollSizeChangesTimer=h.onIdle(function v(){p.checkForSizeChanges(),h.onIdle(v,500)},500)},l.prototype.setPolling=function(p){p?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},l.prototype.$measureSizes=function(p){var v={height:(p||this.$measureNode).clientHeight,width:(p||this.$measureNode).clientWidth/r};return v.width===0||v.height===0?null:v},l.prototype.$measureCharWidth=function(p){this.$main.textContent=w.stringRepeat(p,r);var v=this.$main.getBoundingClientRect();return v.width/r},l.prototype.getCharacterWidth=function(p){var v=this.charSizes[p];return v===void 0&&(v=this.charSizes[p]=this.$measureCharWidth(p)/this.$characterSize.width),v},l.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},l.prototype.$getZoom=function(p){return!p||!p.parentElement?1:(window.getComputedStyle(p).zoom||1)*this.$getZoom(p.parentElement)},l.prototype.$initTransformMeasureNodes=function(){var p=function(v,k){return["div",{style:"position: absolute;top:"+v+"px;left:"+k+"px;"}]};this.els=$.buildDom([p(0,0),p(t,0),p(0,t),p(t,t)],this.el)},l.prototype.transformCoordinates=function(p,v){if(p){var k=this.$getZoom(this.el);p=A(1/k,p)}function D(z,U,j){var V=z[1]*U[0]-z[0]*U[1];return[(-U[1]*j[0]+U[0]*j[1])/V,(+z[1]*j[0]-z[0]*j[1])/V]}function _(z,U){return[z[0]-U[0],z[1]-U[1]]}function M(z,U){return[z[0]+U[0],z[1]+U[1]]}function A(z,U){return[z*U[0],z*U[1]]}this.els||this.$initTransformMeasureNodes();function F(z){var U=z.getBoundingClientRect();return[U.left,U.top]}var N=F(this.els[0]),O=F(this.els[1]),H=F(this.els[2]),R=F(this.els[3]),I=D(_(R,O),_(R,H),_(M(O,H),M(R,N))),L=A(1+I[0],_(O,N)),S=A(1+I[1],_(H,N));if(v){var E=v,T=I[0]*E[0]/t+I[1]*E[1]/t+1,B=M(A(E[0],L),A(E[1],S));return M(A(1/T/t,B),N)}var P=_(p,N),W=D(_(L,A(I[0],P)),_(S,A(I[1],P)),P);return A(t,W)},l}();o.prototype.$characterSize={width:0,height:0},b.implement(o.prototype,i),f.FontMetrics=o}),ace.define("ace/css/editor-css",["require","exports","module"],function(s,f,C){C.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}
.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
    white-space: pre;
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}`}),ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(s,f,C){var b=s("../lib/dom"),$=s("../lib/oop"),w=s("../lib/event_emitter").EventEmitter,h=function(){function d(i,r){this.canvas=b.createElement("canvas"),this.renderer=r,this.pixelRatio=1,this.maxHeight=r.layerConfig.maxHeight,this.lineHeight=r.layerConfig.lineHeight,this.canvasHeight=i.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=i.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},i.element.appendChild(this.canvas)}return d.prototype.$updateDecorators=function(i){var r=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(i){this.maxHeight=i.maxHeight,this.lineHeight=i.lineHeight,this.canvasHeight=i.height;var n=(i.lastRow+1)*this.lineHeight;n<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var t=this.canvas.getContext("2d");function o(R,I){return R.priority<I.priority?-1:R.priority>I.priority?1:0}var l=this.renderer.session.$annotations;if(t.clearRect(0,0,this.canvas.width,this.canvas.height),l){var p={info:1,warning:2,error:3};l.forEach(function(R){R.priority=p[R.type]||null}),l=l.sort(o);for(var v=this.renderer.session.$foldData,k=0;k<l.length;k++){var D=l[k].row,_=this.compensateFoldRows(D,v),M=Math.round((D-_)*this.lineHeight*this.heightRatio),A=Math.round((D-_)*this.lineHeight*this.heightRatio),F=Math.round(((D-_)*this.lineHeight+this.lineHeight)*this.heightRatio),N=F-A;if(N<this.minDecorationHeight){var O=(A+F)/2|0;O<this.halfMinDecorationHeight?O=this.halfMinDecorationHeight:O+this.halfMinDecorationHeight>this.canvasHeight&&(O=this.canvasHeight-this.halfMinDecorationHeight),A=Math.round(O-this.halfMinDecorationHeight),F=Math.round(O+this.halfMinDecorationHeight)}t.fillStyle=r[l[k].type]||null,t.fillRect(0,M,this.canvasWidth,F-A)}}var H=this.renderer.session.selection.getCursor();if(H){var _=this.compensateFoldRows(H.row,v),M=Math.round((H.row-_)*this.lineHeight*this.heightRatio);t.fillStyle="rgba(0, 0, 0, 0.5)",t.fillRect(0,M,this.canvasWidth,2)}},d.prototype.compensateFoldRows=function(i,r){var n=0;if(r&&r.length>0)for(var t=0;t<r.length;t++)i>r[t].start.row&&i<r[t].end.row?n+=i-r[t].start.row:i>=r[t].end.row&&(n+=r[t].end.row-r[t].start.row);return n},d}();$.implement(h.prototype,w),f.Decorator=h}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent"],function(s,f,C){var b=s("./lib/oop"),$=s("./lib/dom"),w=s("./lib/lang"),h=s("./config"),d=s("./layer/gutter").Gutter,i=s("./layer/marker").Marker,r=s("./layer/text").Text,n=s("./layer/cursor").Cursor,t=s("./scrollbar").HScrollBar,o=s("./scrollbar").VScrollBar,l=s("./scrollbar_custom").HScrollBar,p=s("./scrollbar_custom").VScrollBar,v=s("./renderloop").RenderLoop,k=s("./layer/font_metrics").FontMetrics,D=s("./lib/event_emitter").EventEmitter,_=s("./css/editor-css"),M=s("./layer/decorators").Decorator,A=s("./lib/useragent");$.importCssString(_,"ace_editor.css",!1);var F=function(){function N(O,H){var R=this;this.container=O||$.createElement("div"),$.addCssClass(this.container,"ace_editor"),$.HI_DPI&&$.addCssClass(this.container,"ace_hidpi"),this.setTheme(H),h.get("useStrictCSP")==null&&h.set("useStrictCSP",!1),this.$gutter=$.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=$.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=$.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new d(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new i(this.content);var I=this.$textLayer=new r(this.content);this.canvas=I.element,this.$markerFront=new i(this.content),this.$cursorLayer=new n(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new o(this.container,this),this.scrollBarH=new t(this.container,this),this.scrollBarV.on("scroll",function(L){R.$scrollAnimation||R.session.setScrollTop(L.data-R.scrollMargin.top)}),this.scrollBarH.on("scroll",function(L){R.$scrollAnimation||R.session.setScrollLeft(L.data-R.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new k(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(L){R.updateCharacterSize(),R.onResize(!0,R.gutterWidth,R.$size.width,R.$size.height),R._signal("changeCharacterSize",L)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!A.isIOS,this.$loop=new v(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),h.resetOptions(this),h._signal("renderer",this)}return N.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),$.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},N.prototype.setSession=function(O){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=O,O&&this.scrollMargin.top&&O.getScrollTop()<=0&&O.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(O),this.$markerBack.setSession(O),this.$markerFront.setSession(O),this.$gutterLayer.setSession(O),this.$textLayer.setSession(O),O&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},N.prototype.updateLines=function(O,H,R){if(H===void 0&&(H=1/0),this.$changedLines?(this.$changedLines.firstRow>O&&(this.$changedLines.firstRow=O),this.$changedLines.lastRow<H&&(this.$changedLines.lastRow=H)):this.$changedLines={firstRow:O,lastRow:H},this.$changedLines.lastRow<this.layerConfig.firstRow)if(R)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},N.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},N.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},N.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},N.prototype.updateFull=function(O){O?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},N.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},N.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},N.prototype.onResize=function(O,H,R,I){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=O?1:0;var L=this.container;I||(I=L.clientHeight||L.scrollHeight),R||(R=L.clientWidth||L.scrollWidth);var S=this.$updateCachedSize(O,H,R,I);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!R&&!I)return this.resizing=0;O&&(this.$gutterLayer.$padding=null),O?this.$renderChanges(S|this.$changes,!0):this.$loop.schedule(S|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},N.prototype.$updateCachedSize=function(O,H,R,I){I-=this.$extraHeight||0;var L=0,S=this.$size,E={width:S.width,height:S.height,scrollerHeight:S.scrollerHeight,scrollerWidth:S.scrollerWidth};if(I&&(O||S.height!=I)&&(S.height=I,L|=this.CHANGE_SIZE,S.scrollerHeight=S.height,this.$horizScroll&&(S.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(S.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",L=L|this.CHANGE_SCROLL),R&&(O||S.width!=R)){L|=this.CHANGE_SIZE,S.width=R,H==null&&(H=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=H,$.setStyle(this.scrollBarH.element.style,"left",H+"px"),$.setStyle(this.scroller.style,"left",H+this.margin.left+"px"),S.scrollerWidth=Math.max(0,R-H-this.scrollBarV.getWidth()-this.margin.h),$.setStyle(this.$gutter.style,"left",this.margin.left+"px");var T=this.scrollBarV.getWidth()+"px";$.setStyle(this.scrollBarH.element.style,"right",T),$.setStyle(this.scroller.style,"right",T),$.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(S.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||O)&&(L|=this.CHANGE_FULL)}return S.$dirty=!R||!I,L&&this._signal("resize",E),L},N.prototype.onGutterResize=function(O){var H=this.$showGutter?O:0;H!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,H,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},N.prototype.adjustWrapLimit=function(){var O=this.$size.scrollerWidth-this.$padding*2,H=Math.floor(O/this.characterWidth);return this.session.adjustWrapLimit(H,this.$showPrintMargin&&this.$printMarginColumn)},N.prototype.setAnimatedScroll=function(O){this.setOption("animatedScroll",O)},N.prototype.getAnimatedScroll=function(){return this.$animatedScroll},N.prototype.setShowInvisibles=function(O){this.setOption("showInvisibles",O),this.session.$bidiHandler.setShowInvisibles(O)},N.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},N.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},N.prototype.setDisplayIndentGuides=function(O){this.setOption("displayIndentGuides",O)},N.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},N.prototype.setHighlightIndentGuides=function(O){this.setOption("highlightIndentGuides",O)},N.prototype.setShowPrintMargin=function(O){this.setOption("showPrintMargin",O)},N.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},N.prototype.setPrintMarginColumn=function(O){this.setOption("printMarginColumn",O)},N.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},N.prototype.getShowGutter=function(){return this.getOption("showGutter")},N.prototype.setShowGutter=function(O){return this.setOption("showGutter",O)},N.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},N.prototype.setFadeFoldWidgets=function(O){this.setOption("fadeFoldWidgets",O)},N.prototype.setHighlightGutterLine=function(O){this.setOption("highlightGutterLine",O)},N.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},N.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var O=$.createElement("div");O.className="ace_layer ace_print-margin-layer",this.$printMarginEl=$.createElement("div"),this.$printMarginEl.className="ace_print-margin",O.appendChild(this.$printMarginEl),this.content.insertBefore(O,this.content.firstChild)}var H=this.$printMarginEl.style;H.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",H.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},N.prototype.getContainerElement=function(){return this.container},N.prototype.getMouseEventTarget=function(){return this.scroller},N.prototype.getTextAreaContainer=function(){return this.container},N.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var O=this.textarea.style,H=this.$composition;if(!this.$keepTextAreaAtCursor&&!H){$.translate(this.textarea,-100,0);return}var R=this.$cursorLayer.$pixelPos;if(R){H&&H.markerRange&&(R=this.$cursorLayer.getPixelPosition(H.markerRange.start,!0));var I=this.layerConfig,L=R.top,S=R.left;L-=I.offset;var E=H&&H.useTextareaForIME||A.isMobile?this.lineHeight:1;if(L<0||L>I.height-E){$.translate(this.textarea,0,0);return}var T=1,B=this.$size.height-E;if(!H)L+=this.lineHeight;else if(H.useTextareaForIME){var P=this.textarea.value;T=this.characterWidth*this.session.$getStringScreenWidth(P)[0]}else L+=this.lineHeight+2;S-=this.scrollLeft,S>this.$size.scrollerWidth-T&&(S=this.$size.scrollerWidth-T),S+=this.gutterWidth+this.margin.left,$.setStyle(O,"height",E+"px"),$.setStyle(O,"width",T+"px"),$.translate(this.textarea,Math.min(S,this.$size.scrollerWidth-T),Math.min(L,B))}}},N.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},N.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},N.prototype.getLastFullyVisibleRow=function(){var O=this.layerConfig,H=O.lastRow,R=this.session.documentToScreenRow(H,0)*O.lineHeight;return R-this.session.getScrollTop()>O.height-O.lineHeight?H-1:H},N.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},N.prototype.setPadding=function(O){this.$padding=O,this.$textLayer.setPadding(O),this.$cursorLayer.setPadding(O),this.$markerFront.setPadding(O),this.$markerBack.setPadding(O),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},N.prototype.setScrollMargin=function(O,H,R,I){var L=this.scrollMargin;L.top=O|0,L.bottom=H|0,L.right=I|0,L.left=R|0,L.v=L.top+L.bottom,L.h=L.left+L.right,L.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-L.top),this.updateFull()},N.prototype.setMargin=function(O,H,R,I){var L=this.margin;L.top=O|0,L.bottom=H|0,L.right=I|0,L.left=R|0,L.v=L.top+L.bottom,L.h=L.left+L.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},N.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},N.prototype.setHScrollBarAlwaysVisible=function(O){this.setOption("hScrollBarAlwaysVisible",O)},N.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},N.prototype.setVScrollBarAlwaysVisible=function(O){this.setOption("vScrollBarAlwaysVisible",O)},N.prototype.$updateScrollBarV=function(){var O=this.layerConfig.maxHeight,H=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(O-=(H-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>O-H&&(O=this.scrollTop+H,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(O+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},N.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},N.prototype.freeze=function(){this.$frozen=!0},N.prototype.unfreeze=function(){this.$frozen=!1},N.prototype.$renderChanges=function(O,H){if(this.$changes&&(O|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!O&&!H){this.$changes|=O;return}if(this.$size.$dirty)return this.$changes|=O,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",O),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var R=this.layerConfig;if(O&this.CHANGE_FULL||O&this.CHANGE_SIZE||O&this.CHANGE_TEXT||O&this.CHANGE_LINES||O&this.CHANGE_SCROLL||O&this.CHANGE_H_SCROLL){if(O|=this.$computeLayerConfig()|this.$loop.clear(),R.firstRow!=this.layerConfig.firstRow&&R.firstRowScreen==this.layerConfig.firstRowScreen){var I=this.scrollTop+(R.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;I>0&&(this.scrollTop=I,O=O|this.CHANGE_SCROLL,O|=this.$computeLayerConfig()|this.$loop.clear())}R=this.layerConfig,this.$updateScrollBarV(),O&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),$.translate(this.content,-this.scrollLeft,-R.offset);var L=R.width+2*this.$padding+"px",S=R.minHeight+"px";$.setStyle(this.content.style,"width",L),$.setStyle(this.content.style,"height",S)}if(O&this.CHANGE_H_SCROLL&&($.translate(this.content,-this.scrollLeft,-R.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),O&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(R),this.$showGutter&&this.$gutterLayer.update(R),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(R),this.$markerBack.update(R),this.$markerFront.update(R),this.$cursorLayer.update(R),this.$moveTextAreaToCursor(),this._signal("afterRender",O);return}if(O&this.CHANGE_SCROLL){this.$changedLines=null,O&this.CHANGE_TEXT||O&this.CHANGE_LINES?this.$textLayer.update(R):this.$textLayer.scrollLines(R),this.$showGutter&&(O&this.CHANGE_GUTTER||O&this.CHANGE_LINES?this.$gutterLayer.update(R):this.$gutterLayer.scrollLines(R)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(R),this.$markerBack.update(R),this.$markerFront.update(R),this.$cursorLayer.update(R),this.$moveTextAreaToCursor(),this._signal("afterRender",O);return}O&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(R),this.$showGutter&&this.$gutterLayer.update(R),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(R)):O&this.CHANGE_LINES?((this.$updateLines()||O&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(R),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(R)):O&this.CHANGE_TEXT||O&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(R),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(R)):O&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(R),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(R)),O&this.CHANGE_CURSOR&&(this.$cursorLayer.update(R),this.$moveTextAreaToCursor()),O&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(R),O&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(R),this._signal("afterRender",O)},N.prototype.$autosize=function(){var O=this.session.getScreenLength()*this.lineHeight,H=this.$maxLines*this.lineHeight,R=Math.min(H,Math.max((this.$minLines||1)*this.lineHeight,O))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(R+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&R>this.$maxPixelHeight&&(R=this.$maxPixelHeight);var I=R<=2*this.lineHeight,L=!I&&O>H;if(R!=this.desiredHeight||this.$size.height!=this.desiredHeight||L!=this.$vScroll){L!=this.$vScroll&&(this.$vScroll=L,this.scrollBarV.setVisible(L));var S=this.container.clientWidth;this.container.style.height=R+"px",this.$updateCachedSize(!0,this.$gutterWidth,S,R),this.desiredHeight=R,this._signal("autosize")}},N.prototype.$computeLayerConfig=function(){var O=this.session,H=this.$size,R=H.height<=2*this.lineHeight,I=this.session.getScreenLength(),L=I*this.lineHeight,S=this.$getLongestLine(),E=!R&&(this.$hScrollBarAlwaysVisible||H.scrollerWidth-S-2*this.$padding<0),T=this.$horizScroll!==E;T&&(this.$horizScroll=E,this.scrollBarH.setVisible(E));var B=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var P=H.scrollerHeight+this.lineHeight,W=!this.$maxLines&&this.$scrollPastEnd?(H.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;L+=W;var z=this.scrollMargin;this.session.setScrollTop(Math.max(-z.top,Math.min(this.scrollTop,L-H.scrollerHeight+z.bottom))),this.session.setScrollLeft(Math.max(-z.left,Math.min(this.scrollLeft,S+2*this.$padding-H.scrollerWidth+z.right)));var U=!R&&(this.$vScrollBarAlwaysVisible||H.scrollerHeight-L+W<0||this.scrollTop>z.top),j=B!==U;j&&(this.$vScroll=U,this.scrollBarV.setVisible(U));var V=this.scrollTop%this.lineHeight,G=Math.ceil(P/this.lineHeight)-1,K=Math.max(0,Math.round((this.scrollTop-V)/this.lineHeight)),Y=K+G,Q,Z,J=this.lineHeight;K=O.screenToDocumentRow(K,0);var q=O.getFoldLine(K);q&&(K=q.start.row),Q=O.documentToScreenRow(K,0),Z=O.getRowLength(K)*J,Y=Math.min(O.screenToDocumentRow(Y,0),O.getLength()-1),P=H.scrollerHeight+O.getRowLength(Y)*J+Z,V=this.scrollTop-Q*J;var ne=0;return(this.layerConfig.width!=S||T)&&(ne=this.CHANGE_H_SCROLL),(T||j)&&(ne|=this.$updateCachedSize(!0,this.gutterWidth,H.width,H.height),this._signal("scrollbarVisibilityChanged"),j&&(S=this.$getLongestLine())),this.layerConfig={width:S,padding:this.$padding,firstRow:K,firstRowScreen:Q,lastRow:Y,lineHeight:J,characterWidth:this.characterWidth,minHeight:P,maxHeight:L,offset:V,gutterOffset:J?Math.max(0,Math.ceil((V+H.height-H.scrollerHeight)/J)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(S-this.$padding),ne},N.prototype.$updateLines=function(){if(this.$changedLines){var O=this.$changedLines.firstRow,H=this.$changedLines.lastRow;this.$changedLines=null;var R=this.layerConfig;if(!(O>R.lastRow+1)&&!(H<R.firstRow)){if(H===1/0){this.$showGutter&&this.$gutterLayer.update(R),this.$textLayer.update(R);return}return this.$textLayer.updateLines(R,O,H),!0}}},N.prototype.$getLongestLine=function(){var O=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(O+=1),this.$textLayer&&O>this.$textLayer.MAX_LINE_LENGTH&&(O=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(O*this.characterWidth))},N.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},N.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},N.prototype.addGutterDecoration=function(O,H){this.$gutterLayer.addGutterDecoration(O,H)},N.prototype.removeGutterDecoration=function(O,H){this.$gutterLayer.removeGutterDecoration(O,H)},N.prototype.updateBreakpoints=function(O){this.$loop.schedule(this.CHANGE_GUTTER)},N.prototype.setAnnotations=function(O){this.$gutterLayer.setAnnotations(O),this.$loop.schedule(this.CHANGE_GUTTER)},N.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},N.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},N.prototype.showCursor=function(){this.$cursorLayer.showCursor()},N.prototype.scrollSelectionIntoView=function(O,H,R){this.scrollCursorIntoView(O,R),this.scrollCursorIntoView(H,R)},N.prototype.scrollCursorIntoView=function(O,H,R){if(this.$size.scrollerHeight!==0){var I=this.$cursorLayer.getPixelPosition(O),L=I.left,S=I.top,E=R&&R.top||0,T=R&&R.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var B=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;B+E>S?(H&&B+E>S+this.lineHeight&&(S-=H*this.$size.scrollerHeight),S===0&&(S=-this.scrollMargin.top),this.session.setScrollTop(S)):B+this.$size.scrollerHeight-T<S+this.lineHeight&&(H&&B+this.$size.scrollerHeight-T<S-this.lineHeight&&(S+=H*this.$size.scrollerHeight),this.session.setScrollTop(S+this.lineHeight+T-this.$size.scrollerHeight));var P=this.scrollLeft,W=2*this.layerConfig.characterWidth;L-W<P?(L-=W,L<this.$padding+W&&(L=-this.scrollMargin.left),this.session.setScrollLeft(L)):(L+=W,P+this.$size.scrollerWidth<L+this.characterWidth?this.session.setScrollLeft(Math.round(L+this.characterWidth-this.$size.scrollerWidth)):P<=this.$padding&&L-P<this.characterWidth&&this.session.setScrollLeft(0))}},N.prototype.getScrollTop=function(){return this.session.getScrollTop()},N.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},N.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},N.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},N.prototype.scrollToRow=function(O){this.session.setScrollTop(O*this.lineHeight)},N.prototype.alignCursor=function(O,H){typeof O=="number"&&(O={row:O,column:0});var R=this.$cursorLayer.getPixelPosition(O),I=this.$size.scrollerHeight-this.lineHeight,L=R.top-I*(H||0);return this.session.setScrollTop(L),L},N.prototype.$calcSteps=function(O,H){var R=0,I=this.STEPS,L=[],S=function(E,T,B){return B*(Math.pow(E-1,3)+1)+T};for(R=0;R<I;++R)L.push(S(R/this.STEPS,O,H-O));return L},N.prototype.scrollToLine=function(O,H,R,I){var L=this.$cursorLayer.getPixelPosition({row:O,column:0}),S=L.top;H&&(S-=this.$size.scrollerHeight/2);var E=this.scrollTop;this.session.setScrollTop(S),R!==!1&&this.animateScrolling(E,I)},N.prototype.animateScrolling=function(O,H){var R=this.scrollTop;if(!this.$animatedScroll)return;var I=this;if(O==R)return;if(this.$scrollAnimation){var L=this.$scrollAnimation.steps;if(L.length&&(O=L[0],O==R))return}var S=I.$calcSteps(O,R);this.$scrollAnimation={from:O,to:R,steps:S},clearInterval(this.$timer),I.session.setScrollTop(S.shift()),I.session.$scrollTop=R;function E(){I.$timer=clearInterval(I.$timer),I.$scrollAnimation=null,I.$stopAnimation=!1,H&&H()}this.$timer=setInterval(function(){if(I.$stopAnimation){E();return}if(!I.session)return clearInterval(I.$timer);S.length?(I.session.setScrollTop(S.shift()),I.session.$scrollTop=R):R!=null?(I.session.$scrollTop=-1,I.session.setScrollTop(R),R=null):E()},10)},N.prototype.scrollToY=function(O){this.scrollTop!==O&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=O)},N.prototype.scrollToX=function(O){this.scrollLeft!==O&&(this.scrollLeft=O),this.$loop.schedule(this.CHANGE_H_SCROLL)},N.prototype.scrollTo=function(O,H){this.session.setScrollTop(H),this.session.setScrollLeft(O)},N.prototype.scrollBy=function(O,H){H&&this.session.setScrollTop(this.session.getScrollTop()+H),O&&this.session.setScrollLeft(this.session.getScrollLeft()+O)},N.prototype.isScrollableBy=function(O,H){if(H<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||H>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||O<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||O>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},N.prototype.pixelToScreenCoordinates=function(O,H){var R;if(this.$hasCssTransforms){R={top:0,left:0};var I=this.$fontMetrics.transformCoordinates([O,H]);O=I[1]-this.gutterWidth-this.margin.left,H=I[0]}else R=this.scroller.getBoundingClientRect();var L=O+this.scrollLeft-R.left-this.$padding,S=L/this.characterWidth,E=Math.floor((H+this.scrollTop-R.top)/this.lineHeight),T=this.$blockCursor?Math.floor(S):Math.round(S);return{row:E,column:T,side:S-T>0?1:-1,offsetX:L}},N.prototype.screenToTextCoordinates=function(O,H){var R;if(this.$hasCssTransforms){R={top:0,left:0};var I=this.$fontMetrics.transformCoordinates([O,H]);O=I[1]-this.gutterWidth-this.margin.left,H=I[0]}else R=this.scroller.getBoundingClientRect();var L=O+this.scrollLeft-R.left-this.$padding,S=L/this.characterWidth,E=this.$blockCursor?Math.floor(S):Math.round(S),T=Math.floor((H+this.scrollTop-R.top)/this.lineHeight);return this.session.screenToDocumentPosition(T,Math.max(E,0),L)},N.prototype.textToScreenCoordinates=function(O,H){var R=this.scroller.getBoundingClientRect(),I=this.session.documentToScreenPosition(O,H),L=this.$padding+(this.session.$bidiHandler.isBidiRow(I.row,O)?this.session.$bidiHandler.getPosLeft(I.column):Math.round(I.column*this.characterWidth)),S=I.row*this.lineHeight;return{pageX:R.left+L-this.scrollLeft,pageY:R.top+S-this.scrollTop}},N.prototype.visualizeFocus=function(){$.addCssClass(this.container,"ace_focus")},N.prototype.visualizeBlur=function(){$.removeCssClass(this.container,"ace_focus")},N.prototype.showComposition=function(O){this.$composition=O,O.cssText||(O.cssText=this.textarea.style.cssText),O.useTextareaForIME==null&&(O.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?($.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):O.markerId=this.session.addMarker(O.markerRange,"ace_composition_marker","text")},N.prototype.setCompositionText=function(O){var H=this.session.selection.cursor;this.addToken(O,"composition_placeholder",H.row,H.column),this.$moveTextAreaToCursor()},N.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),$.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var O=this.session.selection.cursor;this.removeExtraToken(O.row,O.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},N.prototype.setGhostText=function(O,H){var R=this.session.selection.cursor,I=H||{row:R.row,column:R.column};this.removeGhostText();var L=O.split(`
`);this.addToken(L[0],"ghost_text",I.row,I.column),this.$ghostText={text:O,position:{row:I.row,column:I.column}},L.length>1&&(this.$ghostTextWidget={text:L.slice(1).join(`
`),row:I.row,column:I.column,className:"ace_ghost_text"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget))},N.prototype.removeGhostText=function(){if(this.$ghostText){var O=this.$ghostText.position;this.removeExtraToken(O.row,O.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},N.prototype.addToken=function(O,H,R,I){var L=this.session;L.bgTokenizer.lines[R]=null;var S={type:H,value:O},E=L.getTokens(R);if(I==null||!E.length)E.push(S);else for(var T=0,B=0;B<E.length;B++){var P=E[B];if(T+=P.value.length,I<=T){var W=P.value.length-(T-I),z=P.value.slice(0,W),U=P.value.slice(W);E.splice(B,1,{type:P.type,value:z},S,{type:P.type,value:U});break}}this.updateLines(R,R)},N.prototype.removeExtraToken=function(O,H){this.session.bgTokenizer.lines[O]=null,this.updateLines(O,O)},N.prototype.setTheme=function(O,H){var R=this;if(this.$themeId=O,R._dispatchEvent("themeChange",{theme:O}),!O||typeof O=="string"){var I=O||this.$options.theme.initialValue;h.loadModule(["theme",I],L)}else L(O);function L(S){if(R.$themeId!=O)return H&&H();if(!S||!S.cssClass)throw new Error("couldn't load module "+O+" or it didn't call define");S.$id&&(R.$themeId=S.$id),$.importCssString(S.cssText,S.cssClass,R.container),R.theme&&$.removeCssClass(R.container,R.theme.cssClass);var E="padding"in S?S.padding:"padding"in(R.theme||{})?4:R.$padding;R.$padding&&E!=R.$padding&&R.setPadding(E),R.$theme=S.cssClass,R.theme=S,$.addCssClass(R.container,S.cssClass),$.setCssClass(R.container,"ace_dark",S.isDark),R.$size&&(R.$size.width=0,R.$updateSizeAsync()),R._dispatchEvent("themeLoaded",{theme:S}),H&&H()}},N.prototype.getTheme=function(){return this.$themeId},N.prototype.setStyle=function(O,H){$.setCssClass(this.container,O,H!==!1)},N.prototype.unsetStyle=function(O){$.removeCssClass(this.container,O)},N.prototype.setCursorStyle=function(O){$.setStyle(this.scroller.style,"cursor",O)},N.prototype.setMouseCursor=function(O){$.setStyle(this.scroller.style,"cursor",O)},N.prototype.attachToShadowRoot=function(){$.importCssString(_,"ace_editor.css",this.container)},N.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},N.prototype.$updateCustomScrollbar=function(O){var H=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,O===!0?(this.scrollBarV=new p(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(R){H.$scrollAnimation||H.session.setScrollTop(R.data-H.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(R){H.$scrollAnimation||H.session.setScrollLeft(R.data-H.scrollMargin.left)}),this.$scrollDecorator=new M(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new o(this.container,this),this.scrollBarH=new t(this.container,this),this.scrollBarV.addEventListener("scroll",function(R){H.$scrollAnimation||H.session.setScrollTop(R.data-H.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(R){H.$scrollAnimation||H.session.setScrollLeft(R.data-H.scrollMargin.left)}))},N.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var O=this;this.$resizeTimer=w.delayedCall(function(){O.destroyed||O.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(H){var R=H[0].contentRect.width,I=H[0].contentRect.height;Math.abs(O.$size.width-R)>1||Math.abs(O.$size.height-I)>1?O.$resizeTimer.delay():O.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},N}();F.prototype.CHANGE_CURSOR=1,F.prototype.CHANGE_MARKER=2,F.prototype.CHANGE_GUTTER=4,F.prototype.CHANGE_SCROLL=8,F.prototype.CHANGE_LINES=16,F.prototype.CHANGE_TEXT=32,F.prototype.CHANGE_SIZE=64,F.prototype.CHANGE_MARKER_BACK=128,F.prototype.CHANGE_MARKER_FRONT=256,F.prototype.CHANGE_FULL=512,F.prototype.CHANGE_H_SCROLL=1024,F.prototype.$changes=0,F.prototype.$padding=null,F.prototype.$frozen=!1,F.prototype.STEPS=8,b.implement(F.prototype,D),h.defineOptions(F.prototype,"renderer",{useResizeObserver:{set:function(N){!N&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):N&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function(N){this.$textLayer.setShowInvisibles(N)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(N){typeof N=="number"&&(this.$printMarginColumn=N),this.$showPrintMargin=!!N,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(N){this.$gutter.style.display=N?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function(N){this.$gutterLayer.$useSvgGutterIcons=N},initialValue:!1},showFoldedAnnotations:{set:function(N){this.$gutterLayer.$showFoldedAnnotations=N},initialValue:!1},fadeFoldWidgets:{set:function(N){$.setCssClass(this.$gutter,"ace_fade-fold-widgets",N)},initialValue:!1},showFoldWidgets:{set:function(N){this.$gutterLayer.setShowFoldWidgets(N),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(N){this.$textLayer.setDisplayIndentGuides(N)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(N){this.$textLayer.setHighlightIndentGuides(N)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(N){this.$gutterLayer.setHighlightGutterLine(N),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(N){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(N){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(N){typeof N=="number"&&(N=N+"px"),this.container.style.fontSize=N,this.updateFontSize()},initialValue:12},fontFamily:{set:function(N){this.container.style.fontFamily=N,this.updateFontSize()}},maxLines:{set:function(N){this.updateFull()}},minLines:{set:function(N){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(N){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(N){N=+N||0,this.$scrollPastEnd!=N&&(this.$scrollPastEnd=N,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(N){this.$gutterLayer.$fixedWidth=!!N,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(N){this.$updateCustomScrollbar(N)},initialValue:!1},theme:{set:function(N){this.setTheme(N)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!A.isMobile&&!A.isIE}}),f.VirtualRenderer=F}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(s,f,C){var b=s("../lib/oop"),$=s("../lib/net"),w=s("../lib/event_emitter").EventEmitter,h=s("../config");function d(t){var o="importScripts('"+$.qualifyURL(t)+"');";try{return new Blob([o],{type:"application/javascript"})}catch{var l=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,p=new l;return p.append(o),p.getBlob("application/javascript")}}function i(t){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(h.get("loadWorkerFromBlob")){var o=d(t),l=window.URL||window.webkitURL,p=l.createObjectURL(o);return new Worker(p)}return new Worker(t)}var r=function(t){t.postMessage||(t=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=t,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){b.implement(this,w),this.$createWorkerFromOldConfig=function(t,o,l,p,v){if(s.nameToUrl&&!s.toUrl&&(s.toUrl=s.nameToUrl),h.get("packaged")||!s.toUrl)p=p||h.moduleUrl(o,"worker");else{var k=this.$normalizePath;p=p||k(s.toUrl("ace/worker/worker.js",null,"_"));var D={};t.forEach(function(_){D[_]=k(s.toUrl(_,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=i(p),v&&this.send("importScripts",v),this.$worker.postMessage({init:!0,tlns:D,module:o,classname:l}),this.$worker},this.onMessage=function(t){var o=t.data;switch(o.type){case"event":this._signal(o.name,{data:o.data});break;case"call":var l=this.callbacks[o.id];l&&(l(o.data),delete this.callbacks[o.id]);break;case"error":this.reportError(o.data);break;case"log":window.console&&console.log&&console.log.apply(console,o.data);break}},this.reportError=function(t){window.console&&console.error&&console.error(t)},this.$normalizePath=function(t){return $.qualifyURL(t)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(t){t.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(t,o){this.$worker.postMessage({command:t,args:o})},this.call=function(t,o,l){if(l){var p=this.callbackId++;this.callbacks[p]=l,o.push(p)}this.send(t,o)},this.emit=function(t,o){try{o.data&&o.data.err&&(o.data.err={message:o.data.err.message,stack:o.data.err.stack,code:o.data.err.code}),this.$worker&&this.$worker.postMessage({event:t,data:{data:o.data}})}catch(l){console.error(l.stack)}},this.attachToDocument=function(t){this.$doc&&this.terminate(),this.$doc=t,this.call("setValue",[t.getValue()]),t.on("change",this.changeListener,!0)},this.changeListener=function(t){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),t.action=="insert"?this.deltaQueue.push(t.start,t.lines):this.deltaQueue.push(t.start,t.end)},this.$sendDeltaQueue=function(){var t=this.deltaQueue;t&&(this.deltaQueue=null,t.length>50&&t.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:t}))}}).call(r.prototype);var n=function(t,o,l){var p=null,v=!1,k=Object.create(w),D=[],_=new r({messageBuffer:D,terminate:function(){},postMessage:function(A){D.push(A),p&&(v?setTimeout(M):M())}});_.setEmitSync=function(A){v=A};var M=function(){var A=D.shift();A.command?p[A.command].apply(p,A.args):A.event&&k._signal(A.event,A.data)};return k.postMessage=function(A){_.onMessage({data:A})},k.callback=function(A,F){this.postMessage({type:"call",id:F,data:A})},k.emit=function(A,F){this.postMessage({type:"event",name:A,data:F})},h.loadModule(["worker",o],function(A){for(p=new A[l](k);D.length;)M()}),_};f.UIWorkerClient=n,f.WorkerClient=r,f.createWorker=i}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(s,f,C){var b=s("./range").Range,$=s("./lib/event_emitter").EventEmitter,w=s("./lib/oop"),h=function(){function d(i,r,n,t,o,l){var p=this;this.length=r,this.session=i,this.doc=i.getDocument(),this.mainClass=o,this.othersClass=l,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=t,this.$onCursorChange=function(){setTimeout(function(){p.onCursorChange()})},this.$pos=n;var v=i.getUndoManager().$undoStack||i.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=v.length,this.setup(),i.selection.on("changeCursor",this.$onCursorChange)}return d.prototype.setup=function(){var i=this,r=this.doc,n=this.session;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=r.createAnchor(this.$pos.row,this.$pos.column);var t=this.pos;t.$insertRight=!0,t.detach(),t.markerId=n.addMarker(new b(t.row,t.column,t.row,t.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(o){var l=r.createAnchor(o.row,o.column);l.$insertRight=!0,l.detach(),i.others.push(l)}),n.setUndoSelect(!1)},d.prototype.showOtherMarkers=function(){if(!this.othersActive){var i=this.session,r=this;this.othersActive=!0,this.others.forEach(function(n){n.markerId=i.addMarker(new b(n.row,n.column,n.row,n.column+r.length),r.othersClass,null,!1)})}},d.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var i=0;i<this.others.length;i++)this.session.removeMarker(this.others[i].markerId)}},d.prototype.onUpdate=function(i){if(this.$updating)return this.updateAnchors(i);var r=i;if(r.start.row===r.end.row&&r.start.row===this.pos.row){this.$updating=!0;var n=i.action==="insert"?r.end.column-r.start.column:r.start.column-r.end.column,t=r.start.column>=this.pos.column&&r.start.column<=this.pos.column+this.length+1,o=r.start.column-this.pos.column;if(this.updateAnchors(i),t&&(this.length+=n),t&&!this.session.$fromUndo){if(i.action==="insert")for(var l=this.others.length-1;l>=0;l--){var p=this.others[l],v={row:p.row,column:p.column+o};this.doc.insertMergedLines(v,i.lines)}else if(i.action==="remove")for(var l=this.others.length-1;l>=0;l--){var p=this.others[l],v={row:p.row,column:p.column+o};this.doc.remove(new b(v.row,v.column,v.row,v.column-n))}}this.$updating=!1,this.updateMarkers()}},d.prototype.updateAnchors=function(i){this.pos.onChange(i);for(var r=this.others.length;r--;)this.others[r].onChange(i);this.updateMarkers()},d.prototype.updateMarkers=function(){if(!this.$updating){var i=this,r=this.session,n=function(o,l){r.removeMarker(o.markerId),o.markerId=r.addMarker(new b(o.row,o.column,o.row,o.column+i.length),l,null,!1)};n(this.pos,this.mainClass);for(var t=this.others.length;t--;)n(this.others[t],this.othersClass)}},d.prototype.onCursorChange=function(i){if(!(this.$updating||!this.session)){var r=this.session.selection.getCursor();r.row===this.pos.row&&r.column>=this.pos.column&&r.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",i)):(this.hideOtherMarkers(),this._emit("cursorLeave",i))}},d.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},d.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var i=this.session.getUndoManager(),r=(i.$undoStack||i.$undostack).length-this.$undoStackDepth,n=0;n<r;n++)i.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},d}();w.implement(h.prototype,$),f.PlaceHolder=h}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(s,f,C){var b=s("../lib/event"),$=s("../lib/useragent");function w(d,i){return d.row==i.row&&d.column==i.column}function h(d){var i=d.domEvent,r=i.altKey,n=i.shiftKey,t=i.ctrlKey,o=d.getAccelKey(),l=d.getButton();if(t&&$.isMac&&(l=i.button),d.editor.inMultiSelectMode&&l==2){d.editor.textInput.onContextMenu(d.domEvent);return}if(!t&&!r&&!o){l===0&&d.editor.inMultiSelectMode&&d.editor.exitMultiSelectMode();return}if(l===0){var p=d.editor,v=p.selection,k=p.inMultiSelectMode,D=d.getDocumentPosition(),_=v.getCursor(),M=d.inSelection()||v.isEmpty()&&w(D,_),A=d.x,F=d.y,N=function(U){A=U.clientX,F=U.clientY},O=p.session,H=p.renderer.pixelToScreenCoordinates(A,F),R=H,I;if(p.$mouseHandler.$enableJumpToDef)t&&r||o&&r?I=n?"block":"add":r&&p.$blockSelectEnabled&&(I="block");else if(o&&!r){if(I="add",!k&&n)return}else r&&p.$blockSelectEnabled&&(I="block");if(I&&$.isMac&&i.ctrlKey&&p.$mouseHandler.cancelContextMenu(),I=="add"){if(!k&&M)return;if(!k){var L=v.toOrientedRange();p.addSelectionMarker(L)}var S=v.rangeList.rangeAtPoint(D);p.inVirtualSelectionMode=!0,n&&(S=null,L=v.ranges[0]||L,p.removeSelectionMarker(L)),p.once("mouseup",function(){var U=v.toOrientedRange();S&&U.isEmpty()&&w(S.cursor,U.cursor)?v.substractPoint(U.cursor):(n?v.substractPoint(L.cursor):L&&(p.removeSelectionMarker(L),v.addRange(L)),v.addRange(U)),p.inVirtualSelectionMode=!1})}else if(I=="block"){d.stop(),p.inVirtualSelectionMode=!0;var E,T=[],B=function(){var U=p.renderer.pixelToScreenCoordinates(A,F),j=O.screenToDocumentPosition(U.row,U.column,U.offsetX);w(R,U)&&w(j,v.lead)||(R=U,p.selection.moveToPosition(j),p.renderer.scrollCursorIntoView(),p.removeSelectionMarkers(T),T=v.rectangularRangeBlock(R,H),p.$mouseHandler.$clickSelection&&T.length==1&&T[0].isEmpty()&&(T[0]=p.$mouseHandler.$clickSelection.clone()),T.forEach(p.addSelectionMarker,p),p.updateSelectionMarkers())};k&&!o?v.toSingleRange():!k&&o&&(E=v.toOrientedRange(),p.addSelectionMarker(E)),n?H=O.documentToScreenPosition(v.lead):v.moveToPosition(D),R={row:-1,column:-1};var P=function(U){B(),clearInterval(z),p.removeSelectionMarkers(T),T.length||(T=[v.toOrientedRange()]),E&&(p.removeSelectionMarker(E),v.toSingleRange(E));for(var j=0;j<T.length;j++)v.addRange(T[j]);p.inVirtualSelectionMode=!1,p.$mouseHandler.$clickSelection=null},W=B;b.capture(p.container,N,P);var z=setInterval(function(){W()},20);return d.preventDefault()}}}f.onMouseDown=h}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(s,f,C){f.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function($){$.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function($){$.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function($){$.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function($){$.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function($){$.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function($){$.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function($){$.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function($){$.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function($){$.multiSelect.rangeCount>1?$.multiSelect.joinSelections():$.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function($){$.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function($){$.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function($){$.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],f.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function($){$.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function($){return $&&$.inMultiSelectMode}}];var b=s("../keyboard/hash_handler").HashHandler;f.keyboardHandler=new b(f.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(s,f,C){var b=s("./range_list").RangeList,$=s("./range").Range,w=s("./selection").Selection,h=s("./mouse/multi_select_handler").onMouseDown,d=s("./lib/event"),i=s("./lib/lang"),r=s("./commands/multi_select_commands");f.commands=r.defaultCommands.concat(r.multiSelectCommands);var n=s("./search").Search,t=new n;function o(_,M,A){return t.$options.wrap=!0,t.$options.needle=M,t.$options.backwards=A==-1,t.find(_)}var l=s("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(l.prototype),(function(){this.ranges=null,this.rangeList=null,this.addRange=function(_,M){if(_){if(!this.inMultiSelectMode&&this.rangeCount===0){var A=this.toOrientedRange();if(this.rangeList.add(A),this.rangeList.add(_),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),M||this.fromOrientedRange(_);this.rangeList.removeAll(),this.rangeList.add(A),this.$onAddRange(A)}_.cursor||(_.cursor=_.end);var F=this.rangeList.add(_);return this.$onAddRange(_),F.length&&this.$onRemoveRange(F),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),M||this.fromOrientedRange(_)}},this.toSingleRange=function(_){_=_||this.ranges[0];var M=this.rangeList.removeAll();M.length&&this.$onRemoveRange(M),_&&this.fromOrientedRange(_)},this.substractPoint=function(_){var M=this.rangeList.substractPoint(_);if(M)return this.$onRemoveRange(M),M[0]},this.mergeOverlappingRanges=function(){var _=this.rangeList.merge();_.length&&this.$onRemoveRange(_)},this.$onAddRange=function(_){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(_),this._signal("addRange",{range:_})},this.$onRemoveRange=function(_){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var M=this.rangeList.ranges.pop();_.push(M),this.rangeCount=0}for(var A=_.length;A--;){var F=this.ranges.indexOf(_[A]);this.ranges.splice(F,1)}this._signal("removeRange",{ranges:_}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),M=M||this.ranges[0],M&&!M.isEqual(this.getRange())&&this.fromOrientedRange(M)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new b,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var _=this.ranges.length?this.ranges:[this.getRange()],M=[],A=0;A<_.length;A++){var F=_[A],N=F.start.row,O=F.end.row;if(N===O)M.push(F.clone());else{for(M.push(new $(N,F.start.column,N,this.session.getLine(N).length));++N<O;)M.push(this.getLineRange(N,!0));M.push(new $(O,0,O,F.end.column))}A==0&&!this.isBackwards()&&(M=M.reverse())}this.toSingleRange();for(var A=M.length;A--;)this.addRange(M[A])},this.joinSelections=function(){var _=this.rangeList.ranges,M=_[_.length-1],A=$.fromPoints(_[0].start,M.end);this.toSingleRange(),this.setSelectionRange(A,M.cursor==M.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var _=this.rangeList.ranges,M=_[_.length-1],A=$.fromPoints(_[0].start,M.end);this.toSingleRange(),this.setSelectionRange(A,M.cursor==M.start)}else{var F=this.session.documentToScreenPosition(this.cursor),N=this.session.documentToScreenPosition(this.anchor),O=this.rectangularRangeBlock(F,N);O.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(_,M,A){var F=[],N=_.column<M.column;if(N)var O=_.column,H=M.column,R=_.offsetX,I=M.offsetX;else var O=M.column,H=_.column,R=M.offsetX,I=_.offsetX;var L=_.row<M.row;if(L)var S=_.row,E=M.row;else var S=M.row,E=_.row;O<0&&(O=0),S<0&&(S=0),S==E&&(A=!0);for(var T,B=S;B<=E;B++){var P=$.fromPoints(this.session.screenToDocumentPosition(B,O,R),this.session.screenToDocumentPosition(B,H,I));if(P.isEmpty()){if(T&&v(P.end,T))break;T=P.end}P.cursor=N?P.start:P.end,F.push(P)}if(L&&F.reverse(),!A){for(var W=F.length-1;F[W].isEmpty()&&W>0;)W--;if(W>0)for(var z=0;F[z].isEmpty();)z++;for(var U=W;U>=z;U--)F[U].isEmpty()&&F.splice(U,1)}return F}}).call(w.prototype);var p=s("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(_){_.cursor||(_.cursor=_.end);var M=this.getSelectionStyle();return _.marker=this.session.addMarker(_,"ace_selection",M),this.session.$selectionMarkers.push(_),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,_},this.removeSelectionMarker=function(_){if(_.marker){this.session.removeMarker(_.marker);var M=this.session.$selectionMarkers.indexOf(_);M!=-1&&this.session.$selectionMarkers.splice(M,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(_){for(var M=this.session.$selectionMarkers,A=_.length;A--;){var F=_[A];if(F.marker){this.session.removeMarker(F.marker);var N=M.indexOf(F);N!=-1&&M.splice(N,1)}}this.session.selectionMarkerCount=M.length},this.$onAddRange=function(_){this.addSelectionMarker(_.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(_){this.removeSelectionMarkers(_.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(_){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(r.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(_){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(r.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(_){var M=_.command,A=_.editor;if(A.multiSelect){if(M.multiSelectAction)M.multiSelectAction=="forEach"?F=A.forEachSelection(M,_.args):M.multiSelectAction=="forEachLine"?F=A.forEachSelection(M,_.args,!0):M.multiSelectAction=="single"?(A.exitMultiSelectMode(),F=M.exec(A,_.args||{})):F=M.multiSelectAction(A,_.args||{});else{var F=M.exec(A,_.args||{});A.multiSelect.addRange(A.multiSelect.toOrientedRange()),A.multiSelect.mergeOverlappingRanges()}return F}},this.forEachSelection=function(_,M,A){if(!this.inVirtualSelectionMode){var F=A&&A.keepOrder,N=A==!0||A&&A.$byLines,O=this.session,H=this.selection,R=H.rangeList,I=(F?H:R).ranges,L;if(!I.length)return _.exec?_.exec(this,M||{}):_(this,M||{});var S=H._eventRegistry;H._eventRegistry={};var E=new w(O);this.inVirtualSelectionMode=!0;for(var T=I.length;T--;){if(N)for(;T>0&&I[T].start.row==I[T-1].end.row;)T--;E.fromOrientedRange(I[T]),E.index=T,this.selection=O.selection=E;var B=_.exec?_.exec(this,M||{}):_(this,M||{});!L&&B!==void 0&&(L=B),E.toOrientedRange(I[T])}E.detach(),this.selection=O.selection=H,this.inVirtualSelectionMode=!1,H._eventRegistry=S,H.mergeOverlappingRanges(),H.ranges[0]&&H.fromOrientedRange(H.ranges[0]);var P=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),P&&P.from==P.to&&this.renderer.animateScrolling(P.from),L}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var _="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var M=this.multiSelect.rangeList.ranges,A=[],F=0;F<M.length;F++)A.push(this.session.getTextRange(M[F]));var N=this.session.getDocument().getNewLineCharacter();_=A.join(N),_.length==(A.length-1)*N.length&&(_="")}else this.selection.isEmpty()||(_=this.session.getTextRange(this.getSelectionRange()));return _},this.$checkMultiselectChange=function(_,M){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var A=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&M==this.multiSelect.anchor)return;var F=M==this.multiSelect.anchor?A.cursor==A.start?A.end:A.start:A.cursor;F.row!=M.row||this.session.$clipPositionToDocument(F.row,F.column).column!=M.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(_,M,A){if(M=M||{},M.needle=_||M.needle,M.needle==null){var F=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();M.needle=this.session.getTextRange(F)}this.$search.set(M);var N=this.$search.findAll(this.session);if(!N.length)return 0;var O=this.multiSelect;A||O.toSingleRange(N[0]);for(var H=N.length;H--;)O.addRange(N[H],!0);return F&&O.rangeList.rangeAtPoint(F.start)&&O.addRange(F,!0),N.length},this.selectMoreLines=function(_,M){var A=this.selection.toOrientedRange(),F=A.cursor==A.end,N=this.session.documentToScreenPosition(A.cursor);this.selection.$desiredColumn&&(N.column=this.selection.$desiredColumn);var O=this.session.screenToDocumentPosition(N.row+_,N.column);if(A.isEmpty())var R=O;else var H=this.session.documentToScreenPosition(F?A.end:A.start),R=this.session.screenToDocumentPosition(H.row+_,H.column);if(F){var I=$.fromPoints(O,R);I.cursor=I.start}else{var I=$.fromPoints(R,O);I.cursor=I.end}if(I.desiredColumn=N.column,!this.selection.inMultiSelectMode)this.selection.addRange(A);else if(M)var L=A.cursor;this.selection.addRange(I),L&&this.selection.substractPoint(L)},this.transposeSelections=function(_){for(var M=this.session,A=M.multiSelect,F=A.ranges,N=F.length;N--;){var O=F[N];if(O.isEmpty()){var H=M.getWordRange(O.start.row,O.start.column);O.start.row=H.start.row,O.start.column=H.start.column,O.end.row=H.end.row,O.end.column=H.end.column}}A.mergeOverlappingRanges();for(var R=[],N=F.length;N--;){var O=F[N];R.unshift(M.getTextRange(O))}_<0?R.unshift(R.pop()):R.push(R.shift());for(var N=F.length;N--;){var O=F[N],H=O.clone();M.replace(O,R[N]),O.start.row=H.start.row,O.start.column=H.start.column}A.fromOrientedRange(A.ranges[0])},this.selectMore=function(_,M,A){var F=this.session,N=F.multiSelect,O=N.toOrientedRange();if(!(O.isEmpty()&&(O=F.getWordRange(O.start.row,O.start.column),O.cursor=_==-1?O.start:O.end,this.multiSelect.addRange(O),A))){var H=F.getTextRange(O),R=o(F,H,_);R&&(R.cursor=_==-1?R.start:R.end,this.session.unfold(R),this.multiSelect.addRange(R),this.renderer.scrollCursorIntoView(null,.5)),M&&this.multiSelect.substractPoint(O.cursor)}},this.alignCursors=function(){var _=this.session,M=_.multiSelect,A=M.ranges,F=-1,N=A.filter(function(W){if(W.cursor.row==F)return!0;F=W.cursor.row});if(!A.length||N.length==A.length-1){var O=this.selection.getRange(),H=O.start.row,R=O.end.row,I=H==R;if(I){var L=this.session.getLength(),S;do S=this.session.getLine(R);while(/[=:]/.test(S)&&++R<L);do S=this.session.getLine(H);while(/[=:]/.test(S)&&--H>0);H<0&&(H=0),R>=L&&(R=L-1)}var E=this.session.removeFullLines(H,R);E=this.$reAlignText(E,I),this.session.insert({row:H,column:0},E.join(`
`)+`
`),I||(O.start.column=0,O.end.column=E[E.length-1].length),this.selection.setRange(O)}else{N.forEach(function(W){M.substractPoint(W.cursor)});var T=0,B=1/0,P=A.map(function(W){var z=W.cursor,U=_.getLine(z.row),j=U.substr(z.column).search(/\S/g);return j==-1&&(j=0),z.column>T&&(T=z.column),j<B&&(B=j),j});A.forEach(function(W,z){var U=W.cursor,j=T-U.column,V=P[z]-B;j>V?_.insert(U,i.stringRepeat(" ",j-V)):_.remove(new $(U.row,U.column,U.row,U.column-j+V)),W.start.column=W.end.column=T,W.start.row=W.end.row=U.row,W.cursor=W.end}),M.fromOrientedRange(A[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(_,M){var A=!0,F=!0,N,O,H;return _.map(function(E){var T=E.match(/(\s*)(.*?)(\s*)([=:].*)/);return T?N==null?(N=T[1].length,O=T[2].length,H=T[3].length,T):(N+O+H!=T[1].length+T[2].length+T[3].length&&(F=!1),N!=T[1].length&&(A=!1),N>T[1].length&&(N=T[1].length),O<T[2].length&&(O=T[2].length),H>T[3].length&&(H=T[3].length),T):[E]}).map(M?I:A?F?L:I:S);function R(E){return i.stringRepeat(" ",E)}function I(E){return E[2]?R(N)+E[2]+R(O-E[2].length+H)+E[4].replace(/^([=:])\s+/,"$1 "):E[0]}function L(E){return E[2]?R(N+O-E[2].length)+E[2]+R(H)+E[4].replace(/^([=:])\s+/,"$1 "):E[0]}function S(E){return E[2]?R(N)+E[2]+R(H)+E[4].replace(/^([=:])\s+/,"$1 "):E[0]}}}).call(p.prototype);function v(_,M){return _.row==M.row&&_.column==M.column}f.onSessionChange=function(_){var M=_.session;M&&!M.multiSelect&&(M.$selectionMarkers=[],M.selection.$initRangeList(),M.multiSelect=M.selection),this.multiSelect=M&&M.multiSelect;var A=_.oldSession;A&&(A.multiSelect.off("addRange",this.$onAddRange),A.multiSelect.off("removeRange",this.$onRemoveRange),A.multiSelect.off("multiSelect",this.$onMultiSelect),A.multiSelect.off("singleSelect",this.$onSingleSelect),A.multiSelect.lead.off("change",this.$checkMultiselectChange),A.multiSelect.anchor.off("change",this.$checkMultiselectChange)),M&&(M.multiSelect.on("addRange",this.$onAddRange),M.multiSelect.on("removeRange",this.$onRemoveRange),M.multiSelect.on("multiSelect",this.$onMultiSelect),M.multiSelect.on("singleSelect",this.$onSingleSelect),M.multiSelect.lead.on("change",this.$checkMultiselectChange),M.multiSelect.anchor.on("change",this.$checkMultiselectChange)),M&&this.inMultiSelectMode!=M.selection.inMultiSelectMode&&(M.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function k(_){_.$multiselectOnSessionChange||(_.$onAddRange=_.$onAddRange.bind(_),_.$onRemoveRange=_.$onRemoveRange.bind(_),_.$onMultiSelect=_.$onMultiSelect.bind(_),_.$onSingleSelect=_.$onSingleSelect.bind(_),_.$multiselectOnSessionChange=f.onSessionChange.bind(_),_.$checkMultiselectChange=_.$checkMultiselectChange.bind(_),_.$multiselectOnSessionChange(_),_.on("changeSession",_.$multiselectOnSessionChange),_.on("mousedown",h),_.commands.addCommands(r.defaultCommands),D(_))}function D(_){if(!_.textInput)return;var M=_.textInput.getElement(),A=!1;d.addListener(M,"keydown",function(N){var O=N.keyCode==18&&!(N.ctrlKey||N.shiftKey||N.metaKey);_.$blockSelectEnabled&&O?A||(_.renderer.setMouseCursor("crosshair"),A=!0):A&&F()},_),d.addListener(M,"keyup",F,_),d.addListener(M,"blur",F,_);function F(N){A&&(_.renderer.setMouseCursor(""),A=!1)}}f.MultiSelect=k,s("./config").defineOptions(p.prototype,"editor",{enableMultiselect:{set:function(_){k(this),_?this.on("mousedown",h):this.off("mousedown",h)},value:!0},enableBlockSelect:{set:function(_){this.$blockSelectEnabled=_},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(s,f,C){var b=s("../../range").Range,$=f.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(w,h,d){var i=w.getLine(d);return this.foldingStartMarker.test(i)?"start":h=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(i)?"end":""},this.getFoldWidgetRange=function(w,h,d){return null},this.indentationBlock=function(w,h,d){var i=/\S/,r=w.getLine(h),n=r.search(i);if(n!=-1){for(var t=d||r.length,o=w.getLength(),l=h,p=h;++h<o;){var v=w.getLine(h).search(i);if(v!=-1){if(v<=n){var k=w.getTokenAt(h,0);if(!k||k.type!=="string")break}p=h}}if(p>l){var D=w.getLine(p).length;return new b(l,t,p,D)}}},this.openingBracketBlock=function(w,h,d,i,r){var n={row:d,column:i+1},t=w.$findClosingBracket(h,n,r);if(t){var o=w.foldWidgets[t.row];return o==null&&(o=w.getFoldWidget(t.row)),o=="start"&&t.row>n.row&&(t.row--,t.column=w.getLine(t.row).length),b.fromPoints(n,t)}},this.closingBracketBlock=function(w,h,d,i,r){var n={row:d,column:i},t=w.$findOpeningBracket(h,n);if(t)return t.column++,n.column--,b.fromPoints(t,n)}}).call($.prototype)}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range","ace/config"],function(s,f,C){var b=s("../line_widgets").LineWidgets,$=s("../lib/dom"),w=s("../range").Range,h=s("../config").nls;function d(r,n,t){for(var o=0,l=r.length-1;o<=l;){var p=o+l>>1,v=t(n,r[p]);if(v>0)o=p+1;else if(v<0)l=p-1;else return p}return-(o+1)}function i(r,n,t){var o=r.getAnnotations().sort(w.comparePoints);if(o.length){var l=d(o,{row:n,column:-1},w.comparePoints);l<0&&(l=-l-1),l>=o.length?l=t>0?0:o.length-1:l===0&&t<0&&(l=o.length-1);var p=o[l];if(!(!p||!t)){if(p.row===n){do p=o[l+=t];while(p&&p.row===n);if(!p)return o.slice()}var v=[];n=p.row;do v[t<0?"unshift":"push"](p),p=o[l+=t];while(p&&p.row==n);return v.length&&v}}}f.showErrorMarker=function(r,n){var t=r.session;t.widgetManager||(t.widgetManager=new b(t),t.widgetManager.attach(r));var o=r.getCursorPosition(),l=o.row,p=t.widgetManager.getWidgetsAtRow(l).filter(function(O){return O.type=="errorMarker"})[0];p?p.destroy():l-=n;var v=i(t,l,n),k;if(v){var D=v[0];o.column=(D.pos&&typeof D.column!="number"?D.pos.sc:D.column)||0,o.row=D.row,k=r.renderer.$gutterLayer.$annotations[o.row]}else{if(p)return;k={text:[h("Looks good!")],className:"ace_ok"}}r.session.unfold(o.row),r.selection.moveToPosition(o);var _={row:o.row,fixedWidth:!0,coverGutter:!0,el:$.createElement("div"),type:"errorMarker"},M=_.el.appendChild($.createElement("div")),A=_.el.appendChild($.createElement("div"));A.className="error_widget_arrow "+k.className;var F=r.renderer.$cursorLayer.getPixelPosition(o).left;A.style.left=F+r.renderer.gutterWidth-5+"px",_.el.className="error_widget_wrapper",M.className="error_widget "+k.className,M.innerHTML=k.text.join("<br>"),M.appendChild($.createElement("div"));var N=function(O,H,R){if(H===0&&(R==="esc"||R==="return"))return _.destroy(),{command:"null"}};_.destroy=function(){r.$mouseHandler.isMousePressed||(r.keyBinding.removeKeyboardHandler(N),t.widgetManager.removeLineWidget(_),r.off("changeSelection",_.destroy),r.off("changeSession",_.destroy),r.off("mouseup",_.destroy),r.off("change",_.destroy))},r.keyBinding.addKeyboardHandler(N),r.on("changeSelection",_.destroy),r.on("changeSession",_.destroy),r.on("mouseup",_.destroy),r.on("change",_.destroy),r.session.widgetManager.addLineWidget(_),_.el.onmousedown=r.focus.bind(r),r.renderer.scrollCursorIntoView(null,.5,{bottom:_.el.offsetHeight})},$.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)}),ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(s,f,C){s("./loader_build")(f);var b=s("./lib/dom"),$=s("./range").Range,w=s("./editor").Editor,h=s("./edit_session").EditSession,d=s("./undomanager").UndoManager,i=s("./virtual_renderer").VirtualRenderer;s("./worker/worker_client"),s("./keyboard/hash_handler"),s("./placeholder"),s("./multi_select"),s("./mode/folding/fold_mode"),s("./theme/textmate"),s("./ext/error_marker"),f.config=s("./config"),f.edit=function(r,n){if(typeof r=="string"){var t=r;if(r=document.getElementById(t),!r)throw new Error("ace.edit can't find div #"+t)}if(r&&r.env&&r.env.editor instanceof w)return r.env.editor;var o="";if(r&&/input|textarea/i.test(r.tagName)){var l=r;o=l.value,r=b.createElement("pre"),l.parentNode.replaceChild(r,l)}else r&&(o=r.textContent,r.innerHTML="");var p=f.createEditSession(o),v=new w(new i(r),p,n),k={document:p,editor:v,onResize:v.resize.bind(v,null)};return l&&(k.textarea=l),v.on("destroy",function(){k.editor.container.env=null}),v.container.env=v.env=k,v},f.createEditSession=function(r,n){var t=new h(r,n);return t.setUndoManager(new d),t},f.Range=$,f.Editor=w,f.EditSession=h,f.UndoManager=d,f.VirtualRenderer=i,f.version=f.config.version}),function(){ace.require(["ace/ace"],function(s){s&&(s.config.init(!0),s.define=ace.define);var f=function(){return this}();!f&&typeof window<"u"&&(f=window),!f&&typeof self<"u"&&(f=self),f.ace||(f.ace=s);for(var C in s)s.hasOwnProperty(C)&&(f.ace[C]=s[C]);f.ace.default=f.ace,e&&(e.exports=f.ace)})}()})(ace$2);var aceExports=ace$2.exports;const ace$1=getDefaultExportFromCjs(aceExports);var themeMonokai={exports:{}};(function(e,u){ace.define("ace/theme/monokai-css",["require","exports","module"],function(s,f,C){C.exports=`.ace-monokai .ace_gutter {
  background: #2F3129;
  color: #8F908A
}

.ace-monokai .ace_print-margin {
  width: 1px;
  background: #555651
}

.ace-monokai {
  background-color: #272822;
  color: #F8F8F2
}

.ace-monokai .ace_cursor {
  color: #F8F8F0
}

.ace-monokai .ace_marker-layer .ace_selection {
  background: #49483E
}

.ace-monokai.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px #272822;
}

.ace-monokai .ace_marker-layer .ace_step {
  background: rgb(102, 82, 0)
}

.ace-monokai .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid #49483E
}

.ace-monokai .ace_marker-layer .ace_active-line {
  background: #202020
}

.ace-monokai .ace_gutter-active-line {
  background-color: #272727
}

.ace-monokai .ace_marker-layer .ace_selected-word {
  border: 1px solid #49483E
}

.ace-monokai .ace_invisible {
  color: #52524d
}

.ace-monokai .ace_entity.ace_name.ace_tag,
.ace-monokai .ace_keyword,
.ace-monokai .ace_meta.ace_tag,
.ace-monokai .ace_storage {
  color: #F92672
}

.ace-monokai .ace_punctuation,
.ace-monokai .ace_punctuation.ace_tag {
  color: #fff
}

.ace-monokai .ace_constant.ace_character,
.ace-monokai .ace_constant.ace_language,
.ace-monokai .ace_constant.ace_numeric,
.ace-monokai .ace_constant.ace_other {
  color: #AE81FF
}

.ace-monokai .ace_invalid {
  color: #F8F8F0;
  background-color: #F92672
}

.ace-monokai .ace_invalid.ace_deprecated {
  color: #F8F8F0;
  background-color: #AE81FF
}

.ace-monokai .ace_support.ace_constant,
.ace-monokai .ace_support.ace_function {
  color: #66D9EF
}

.ace-monokai .ace_fold {
  background-color: #A6E22E;
  border-color: #F8F8F2
}

.ace-monokai .ace_storage.ace_type,
.ace-monokai .ace_support.ace_class,
.ace-monokai .ace_support.ace_type {
  font-style: italic;
  color: #66D9EF
}

.ace-monokai .ace_entity.ace_name.ace_function,
.ace-monokai .ace_entity.ace_other,
.ace-monokai .ace_entity.ace_other.ace_attribute-name,
.ace-monokai .ace_variable {
  color: #A6E22E
}

.ace-monokai .ace_variable.ace_parameter {
  font-style: italic;
  color: #FD971F
}

.ace-monokai .ace_string {
  color: #E6DB74
}

.ace-monokai .ace_comment {
  color: #75715E
}

.ace-monokai .ace_indent-guide {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y
}

.ace-monokai .ace_indent-guide-active {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQIW2PQ1dX9zzBz5sz/ABCcBFFentLlAAAAAElFTkSuQmCC) right repeat-y;
}
`}),ace.define("ace/theme/monokai",["require","exports","module","ace/theme/monokai-css","ace/lib/dom"],function(s,f,C){f.isDark=!0,f.cssClass="ace-monokai",f.cssText=s("./monokai-css");var b=s("../lib/dom");b.importCssString(f.cssText,f.cssClass,!1)}),function(){ace.require(["ace/theme/monokai"],function(s){e&&(e.exports=s)})}()})(themeMonokai);var modeJavascript={exports:{}};(function(e,u){ace.define("ace/mode/jsdoc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(s,f,C){var b=s("../lib/oop"),$=s("./text_highlight_rules").TextHighlightRules,w=function(){this.$rules={start:[{token:["comment.doc.tag","comment.doc.text","lparen.doc"],regex:"(@(?:param|member|typedef|property|namespace|var|const|callback))(\\s*)({)",push:[{token:"lparen.doc",regex:"{",push:[{include:"doc-syntax"},{token:"rparen.doc",regex:"}|(?=$)",next:"pop"}]},{token:["rparen.doc","text.doc","variable.parameter.doc","lparen.doc","variable.parameter.doc","rparen.doc"],regex:/(})(\s*)(?:([\w=:\/\.]+)|(?:(\[)([\w=:\/\.]+)(\])))/,next:"pop"},{token:"rparen.doc",regex:"}|(?=$)",next:"pop"},{include:"doc-syntax"},{defaultToken:"text.doc"}]},{token:["comment.doc.tag","text.doc","lparen.doc"],regex:"(@(?:returns?|yields|type|this|suppress|public|protected|private|package|modifies|implements|external|exception|throws|enum|define|extends))(\\s*)({)",push:[{token:"lparen.doc",regex:"{",push:[{include:"doc-syntax"},{token:"rparen.doc",regex:"}|(?=$)",next:"pop"}]},{token:"rparen.doc",regex:"}|(?=$)",next:"pop"},{include:"doc-syntax"},{defaultToken:"text.doc"}]},{token:["comment.doc.tag","text.doc","variable.parameter.doc"],regex:'(@(?:alias|memberof|instance|module|name|lends|namespace|external|this|template|requires|param|implements|function|extends|typedef|mixes|constructor|var|memberof\\!|event|listens|exports|class|constructs|interface|emits|fires|throws|const|callback|borrows|augments))(\\s+)(\\w[\\w#.:/~"\\-]*)?'},{token:["comment.doc.tag","text.doc","variable.parameter.doc"],regex:"(@method)(\\s+)(\\w[\\w.\\(\\)]*)"},{token:"comment.doc.tag",regex:"@access\\s+(?:private|public|protected)"},{token:"comment.doc.tag",regex:"@kind\\s+(?:class|constant|event|external|file|function|member|mixin|module|namespace|typedef)"},{token:"comment.doc.tag",regex:"@\\w+(?=\\s|$)"},w.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}],"doc-syntax":[{token:"operator.doc",regex:/[|:]/},{token:"paren.doc",regex:/[\[\]]/}]},this.normalizeRules()};b.inherits(w,$),w.getTagRule=function(h){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},w.getStartRule=function(h){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:h}},w.getEndRule=function(h){return{token:"comment.doc",regex:"\\*\\/",next:h}},f.JsDocCommentHighlightRules=w}),ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/jsdoc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(s,f,C){var b=s("../lib/oop"),$=s("./jsdoc_comment_highlight_rules").JsDocCommentHighlightRules,w=s("./text_highlight_rules").TextHighlightRules,h="[a-zA-Z\\$_¡-￿][a-zA-Z\\d\\$_¡-￿]*",d=function(n){var t=this.createKeywordMapper({"variable.language":"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Symbol|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document",keyword:"const|yield|import|get|set|async|await|break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|of|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|__parent__|__count__|escape|unescape|with|__proto__|class|enum|extends|super|export|implements|private|public|interface|package|protected|static|constructor","storage.type":"const|let|var|function","constant.language":"null|Infinity|NaN|undefined","support.function":"alert","constant.language.boolean":"true|false"},"identifier"),o="case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void",l="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u{[0-9a-fA-F]{1,6}}|[0-2][0-7]{0,2}|3[0-7][0-7]?|[4-7][0-7]?|.)";this.$rules={no_regex:[$.getStartRule("doc-start"),r("no_regex"),{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+h+")(\\.)(prototype)(\\.)("+h+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+h+")(\\.)("+h+")(\\s*)(=)(\\s*)(function\\*?)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+h+")(\\s*)(=)(\\s*)(function\\*?)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+h+")(\\.)("+h+")(\\s*)(=)(\\s*)(function\\*?)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function\\*?)(\\s+)("+h+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+h+")(\\s*)(:)(\\s*)(function\\*?)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function\\*?)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:`from(?=\\s*('|"))`},{token:"keyword",regex:"(?:"+o+")\\b",next:"start"},{token:"support.constant",regex:/that\b/},{token:["storage.type","punctuation.operator","support.function.firebug"],regex:/(console)(\.)(warn|info|log|error|time|trace|timeEnd|assert)\b/},{token:t,regex:h},{token:"punctuation.operator",regex:/[.](?![.])/,next:"property"},{token:"storage.type",regex:/=>/,next:"start"},{token:"keyword.operator",regex:/--|\+\+|\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\|\||\?:|[!$%&*+\-~\/^]=?/,next:"start"},{token:"punctuation.operator",regex:/[?:,;.]/,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"comment",regex:/^#!.*$/}],property:[{token:"text",regex:"\\s+"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+h+")(\\.)("+h+")(\\s*)(=)(\\s*)(function\\*?)(?:(\\s+)(\\w+))?(\\s*)(\\()",next:"function_arguments"},{token:"punctuation.operator",regex:/[.](?![.])/},{token:"support.function",regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|lter|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward|rEach)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:"support.function.dom",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:"support.constant",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:"identifier",regex:h},{regex:"",token:"empty",next:"no_regex"}],start:[$.getStartRule("doc-start"),r("start"),{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.charclass.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],default_parameter:[{token:"string",regex:"'(?=.)",push:[{token:"string",regex:"'|$",next:"pop"},{include:"qstring"}]},{token:"string",regex:'"(?=.)',push:[{token:"string",regex:'"|$',next:"pop"},{include:"qqstring"}]},{token:"constant.language",regex:"null|Infinity|NaN|undefined"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:"punctuation.operator",regex:",",next:"function_arguments"},{token:"text",regex:"\\s+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],function_arguments:[r("function_arguments"),{token:"variable.parameter",regex:h},{token:"punctuation.operator",regex:","},{token:"text",regex:"\\s+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],qqstring:[{token:"constant.language.escape",regex:l},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:l},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]},(!n||!n.noES6)&&(this.$rules.no_regex.unshift({regex:"[{}]",onMatch:function(p,v,k){if(this.next=p=="{"?this.nextState:"",p=="{"&&k.length)k.unshift("start",v);else if(p=="}"&&k.length&&(k.shift(),this.next=k.shift(),this.next.indexOf("string")!=-1||this.next.indexOf("jsx")!=-1))return"paren.quasi.end";return p=="{"?"paren.lparen":"paren.rparen"},nextState:"start"},{token:"string.quasi.start",regex:/`/,push:[{token:"constant.language.escape",regex:l},{token:"paren.quasi.start",regex:/\${/,push:"start"},{token:"string.quasi.end",regex:/`/,next:"pop"},{defaultToken:"string.quasi"}]},{token:["variable.parameter","text"],regex:"("+h+")(\\s*)(?=\\=>)"},{token:"paren.lparen",regex:"(\\()(?=.+\\s*=>)",next:"function_arguments"},{token:"variable.language",regex:"(?:(?:(?:Weak)?(?:Set|Map))|Promise)\\b"}),this.$rules.function_arguments.unshift({token:"keyword.operator",regex:"=",next:"default_parameter"},{token:"keyword.operator",regex:"\\.{3}"}),this.$rules.property.unshift({token:"support.function",regex:"(findIndex|repeat|startsWith|endsWith|includes|isSafeInteger|trunc|cbrt|log2|log10|sign|then|catch|finally|resolve|reject|race|any|all|allSettled|keys|entries|isInteger)\\b(?=\\()"},{token:"constant.language",regex:"(?:MAX_SAFE_INTEGER|MIN_SAFE_INTEGER|EPSILON)\\b"}),(!n||n.jsx!=!1)&&i.call(this)),this.embedRules($,"doc-",[$.getEndRule("no_regex")]),this.normalizeRules()};b.inherits(d,w);function i(){var n=h.replace("\\d","\\d\\-"),t={onMatch:function(l,p,v){var k=l.charAt(1)=="/"?2:1;return k==1?(p!=this.nextState?v.unshift(this.next,this.nextState,0):v.unshift(this.next),v[2]++):k==2&&p==this.nextState&&(v[1]--,(!v[1]||v[1]<0)&&(v.shift(),v.shift())),[{type:"meta.tag.punctuation."+(k==1?"":"end-")+"tag-open.xml",value:l.slice(0,k)},{type:"meta.tag.tag-name.xml",value:l.substr(k)}]},regex:"</?"+n,next:"jsxAttributes",nextState:"jsx"};this.$rules.start.unshift(t);var o={regex:"{",token:"paren.quasi.start",push:"start"};this.$rules.jsx=[o,t,{include:"reference"},{defaultToken:"string"}],this.$rules.jsxAttributes=[{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",onMatch:function(l,p,v){return p==v[0]&&v.shift(),l.length==2&&(v[0]==this.nextState&&v[1]--,(!v[1]||v[1]<0)&&v.splice(0,2)),this.next=v[0]||"start",[{type:this.token,value:l}]},nextState:"jsx"},o,r("jsxAttributes"),{token:"entity.other.attribute-name.xml",regex:n},{token:"keyword.operator.attribute-equals.xml",regex:"="},{token:"text.tag-whitespace.xml",regex:"\\s+"},{token:"string.attribute-value.xml",regex:"'",stateName:"jsx_attr_q",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',stateName:"jsx_attr_qq",push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},t],this.$rules.reference=[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}]}function r(n){return[{token:"comment",regex:/\/\*/,next:[$.getTagRule(),{token:"comment",regex:"\\*\\/",next:n||"pop"},{defaultToken:"comment",caseInsensitive:!0}]},{token:"comment",regex:"\\/\\/",next:[$.getTagRule(),{token:"comment",regex:"$|^",next:n||"pop"},{defaultToken:"comment",caseInsensitive:!0}]}]}f.JavaScriptHighlightRules=d}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(s,f,C){var b=s("../range").Range,$=function(){};(function(){this.checkOutdent=function(w,h){return/^\s+$/.test(w)?/^\s*\}/.test(h):!1},this.autoOutdent=function(w,h){var d=w.getLine(h),i=d.match(/^(\s*\})/);if(!i)return 0;var r=i[1].length,n=w.findMatchingBracket({row:h,column:r});if(!n||n.row==h)return 0;var t=this.$getIndent(w.getLine(n.row));w.replace(new b(h,0,h,r-1),t)},this.$getIndent=function(w){return w.match(/^\s*/)[0]}}).call($.prototype),f.MatchingBraceOutdent=$}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(s,f,C){var b=s("../../lib/oop"),$=s("../../range").Range,w=s("./fold_mode").FoldMode,h=f.FoldMode=function(d){d&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+d.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+d.end)))};b.inherits(h,w),(function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(d,i,r){var n=d.getLine(r);if(this.singleLineBlockCommentRe.test(n)&&!this.startRegionRe.test(n)&&!this.tripleStarBlockCommentRe.test(n))return"";var t=this._getFoldWidgetBase(d,i,r);return!t&&this.startRegionRe.test(n)?"start":t},this.getFoldWidgetRange=function(d,i,r,n){var t=d.getLine(r);if(this.startRegionRe.test(t))return this.getCommentRegionBlock(d,t,r);var p=t.match(this.foldingStartMarker);if(p){var o=p.index;if(p[1])return this.openingBracketBlock(d,p[1],r,o);var l=d.getCommentFoldRange(r,o+p[0].length,1);return l&&!l.isMultiLine()&&(n?l=this.getSectionRange(d,r):i!="all"&&(l=null)),l}if(i!=="markbegin"){var p=t.match(this.foldingStopMarker);if(p){var o=p.index+p[0].length;return p[1]?this.closingBracketBlock(d,p[1],r,o):d.getCommentFoldRange(r,o,-1)}}},this.getSectionRange=function(d,i){var r=d.getLine(i),n=r.search(/\S/),t=i,o=r.length;i=i+1;for(var l=i,p=d.getLength();++i<p;){r=d.getLine(i);var v=r.search(/\S/);if(v!==-1){if(n>v)break;var k=this.getFoldWidgetRange(d,"all",i);if(k){if(k.start.row<=t)break;if(k.isMultiLine())i=k.end.row;else if(n==v)break}l=i}}return new $(t,o,l,d.getLine(l).length)},this.getCommentRegionBlock=function(d,i,r){for(var n=i.search(/\s*$/),t=d.getLength(),o=r,l=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,p=1;++r<t;){i=d.getLine(r);var v=l.exec(i);if(v&&(v[1]?p--:p++,!p))break}var k=r;if(k>o)return new $(o,n,k,i.length)}}).call(h.prototype)}),ace.define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(s,f,C){var b=s("../lib/oop"),$=s("./text").Mode,w=s("./javascript_highlight_rules").JavaScriptHighlightRules,h=s("./matching_brace_outdent").MatchingBraceOutdent,d=s("../worker/worker_client").WorkerClient,i=s("./behaviour/cstyle").CstyleBehaviour,r=s("./folding/cstyle").FoldMode,n=function(){this.HighlightRules=w,this.$outdent=new h,this.$behaviour=new i,this.foldingRules=new r};b.inherits(n,$),(function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.$quotes={'"':'"',"'":"'","`":"`"},this.$pairQuotesAfter={"`":/\w/},this.getNextLineIndent=function(t,o,l){var p=this.$getIndent(o),v=this.getTokenizer().getLineTokens(o,t),k=v.tokens,D=v.state;if(k.length&&k[k.length-1].type=="comment")return p;if(t=="start"||t=="no_regex"){var _=o.match(/^.*(?:\bcase\b.*:|[\{\(\[])\s*$/);_&&(p+=l)}else if(t=="doc-start"){if(D=="start"||D=="no_regex")return"";var _=o.match(/^\s*(\/?)\*/);_&&(_[1]&&(p+=" "),p+="* ")}return p},this.checkOutdent=function(t,o,l){return this.$outdent.checkOutdent(o,l)},this.autoOutdent=function(t,o,l){this.$outdent.autoOutdent(o,l)},this.createWorker=function(t){var o=new d(["ace"],"ace/mode/javascript_worker","JavaScriptWorker");return o.attachToDocument(t.getDocument()),o.on("annotate",function(l){t.setAnnotations(l.data)}),o.on("terminate",function(){t.clearAnnotations()}),o},this.$id="ace/mode/javascript",this.snippetFileId="ace/snippets/javascript"}).call(n.prototype),f.Mode=n}),function(){ace.require(["ace/mode/javascript"],function(s){e&&(e.exports=s)})}()})(modeJavascript);function initializeMapFilterMode(){function hardResetNodes(e){window.spwashi.nodes.length=0,window.spwashi.nodes.push(...e),window.spwashi.links=window.spwashi.links.filter(u=>e.includes(u.source)&&e.includes(u.target)),reinitializeSimulation()}const mapEditor=ace$1.edit("node-mapper"),mapKey="map-nodes-fn",mapValue=window.spwashi.getItem(mapKey)||`d => {
  d.r = (Math.random() * 30) + (Math.random() * 50);
  return d;
}`;mapEditor.setSession(aceExports.createEditSession(mapValue,"ace/mode/javascript")),window.spwashi.callbacks.onMapMode=()=>{const e=document.querySelector("#map-mode-container");e.tabIndex=0,e.focus()};const filterEditor=ace$1.edit("node-filter"),filterKey="filter-nodes-fn",filterValue=window.spwashi.getItem(filterKey)||"d => d.kind === 'nominal'";filterEditor.setSession(aceExports.createEditSession(filterValue,"ace/mode/javascript")),window.spwashi.callbacks.onFilterMode=()=>{const e=document.querySelector("#filter-mode-container");e.tabIndex=0,e.focus()},[filterEditor,mapEditor].forEach(e=>{e.setOptions({useWorker:!1}),e.setTheme("ace/theme/monokai"),e.session.setMode("ace/mode/javascript"),e.commands.bindKey("Tab",null)});const mapSubmit=document.querySelector("#submit-node-mapper");mapSubmit.onclick=submitMapper;const filterSubmit=document.querySelector("#submit-node-filter");filterSubmit.onclick=submitFilter;function submitMapper(){const mapFnString=mapEditor.getValue(),mapFunction=mapFnString?eval(mapFnString):e=>e,nodes=window.spwashi.nodes.map(mapFunction);hardResetNodes(nodes),window.spwashi.setItem(mapKey,mapFnString),setDocumentMode("")}function submitFilter(){const filterFnString=filterEditor.getValue(),filterFunction=filterFnString?eval(filterFnString):e=>!0,nodes=window.spwashi.nodes.filter((e,u)=>!filterFunction(e,u));hardResetNodes(nodes),window.spwashi.setItem(filterKey,filterFnString),setDocumentMode("")}}class TokenFragment{constructor(u,s=void 0,f=!1){this._head=u,this._operator=s,this._isPrefixed=f}operator(u){if(!u)return this._operator;this._operator=u}get parts(){const u=[this._head,this._operator];return this._isPrefixed?u.reverse():u}}class Head extends TokenFragment{}class BodyItem extends TokenFragment{get parts(){return this._isPrefixed?super.parts.reverse():super.parts}}class Body extends TokenFragment{}class Tail extends TokenFragment{}class AstNode{constructor(u){this._seedNode=u,this.fillOperator=getOperatorIterator(u)}get seedNode(){return this._seedNode}initTail(){const u=this.seedNode;if(!u.tail)return;this._trailingOperator;const s=u.tail;return this._tail=new Tail(s),this._tail}initBody(){const u=this.seedNode,s=u==null?void 0:u.body;if(!s)return;const f=[];for(const C of s)this._trailingOperator=this.fillOperator(),f.push(new BodyItem(C,this._trailingOperator,!1));return this._body=new Body(f),this._body}initHead(){const u=this.seedNode;let s=this.fillOperator();return u.head&&(this._head=new Head(u.head,s),s=void 0),this._trailingOperator=s,this._head}*produce(){const u=this.initHead();u&&(yield u);const s=this.initBody();s&&(yield s);const f=this.initTail();f&&(yield f)}}function getOperatorIterator(e){let u=0;return function(){var s;const f=(s=e.operators)===null||s===void 0?void 0:s[u];return u++,f}}class Scope{constructor(u,s=void 0){var f,C;this._generation=((f=u==null?void 0:u._generation)!==null&&f!==void 0?f:-1)+1,this._context=s??u,this._root=(C=u._root)!==null&&C!==void 0?C:u}spawn(u){return new Scope(this,u)}key(u){return u}*loop(u){if(Array.isArray(u)){for(const f of u)yield u;return}if(!u)return;yield*new AstNode(u).produce()}}class Lens{constructor(u=void 0){this.generators=[],this.Cursor=Cursor,this.source=u}getCursor(u){return new this.Cursor({input:u,generators:this.generators})}*locate(u){yield new Scope(u)}}class RecursiveReductionLens extends Lens{reduce(u,s=void 0){if(u instanceof TokenFragment)return this._reduceArray(u.parts,s);if(typeof u>"u"||u===null){this._reduceNothing();return}return Array.isArray(u)?this._reduceArray(u,s):typeof u=="string"?this._reduceString():u.key?this._reduceAtom(u,s):this._reduceNode(u,s)}_reduceNode(u,s){const f=s.spawn(u),C=[];for(const w of f.loop(u)){const h=this.reduce(w,f);h&&C.push(h)}const b=RecursiveReductionLens.doFlatten?C.flat():C;return(RecursiveReductionLens.doFlatten?!1:!s.generation)?{kind:u.kind,key:b}:b}_reduceNothing(){}_reduceAtom(u,s){return s.key(u)}_reduceString(){return null}_reduceArray(u,s){const f=[];for(const C of u){const b=this.reduce(C,s);b&&f.push(b)}return f.length<2?f[0]:f.flat()}}RecursiveReductionLens.doFlatten=!0;class Token{constructor(u){this._kind=[],this.cursor=u}set kind(u){this._kind.push(u)}get kind(){return this._kind.join(" ")}get identity(){const u=[],s=new RecursiveReductionLens(this);for(const C of s.locate(this)){const b=s.reduce(this,C);b&&u.push(b)}this.head,this.body,this.tail,this.kind;function f(C){return C.key?C.key:Array.isArray(C)?C.map(f).join(""):C}return u.reduce((C,b)=>""+C+f(b),"")}toJSON(){return Object.fromEntries(Object.entries({identity:this.identity,kind:[...this._kind].join(Token.kindJunctionStr),head:this.head,body:this.body,tail:this.tail}).filter(([,u])=>!!u))}}Token.kindJunctionStr=" + ";var __classPrivateFieldSet$1=function(e,u,s,f,C){if(f==="m")throw new TypeError("Private method is not writable");if(f==="a"&&!C)throw new TypeError("Private accessor was defined without a setter");if(typeof u=="function"?e!==u||!C:!u.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return f==="a"?C.call(e,s):C?C.value=s:u.set(e,s),s},__classPrivateFieldGet$1=function(e,u,s,f){if(s==="a"&&!f)throw new TypeError("Private accessor was defined without a getter");if(typeof u=="function"?e!==u||!f:!u.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?f:s==="a"?f.call(e):f?f.value:u.get(e)},_Cursor_parent,_Cursor_token;class Cursor{constructor(u,s){var f;_Cursor_parent.set(this,void 0),_Cursor_token.set(this,void 0),this.__log_taken=[],this.offset=(u==null?void 0:u.offset)||0,this.start=(f=s==null?void 0:s.start)!==null&&f!==void 0?f:this.offset,this.input=u==null?void 0:u.input,this.generators=u==null?void 0:u.generators,this.level=typeof(u==null?void 0:u.level)<"u"?u.level+1:0,__classPrivateFieldSet$1(this,_Cursor_parent,s||u||void 0,"f"),__classPrivateFieldSet$1(this,_Cursor_token,null,"f")}spawn(u){const s=this.constructor;return new s(this,u)}get parent(){return __classPrivateFieldGet$1(this,_Cursor_parent,"f")}setOffset(u){this.offset=u.offset}curr(){return this.input[this.offset]}*scan(u=void 0,s){const f=u??this.generators;if(!f)throw new Error("Cannot scan without generators");let C=s;for(const b of f){const $=yield*b(this,C),w=$?$.getToken():!1;w&&(this.setOffset($),w!==(C==null?void 0:C.getToken())&&(yield $),C=$)}return C}*log(u){{const s="	".repeat(this.level);yield`${s}${this}`,yield`${s}	${u.message}`,u.miss&&(yield`${s}		reason: ${u.miss}`)}}*take(){const u=this.pos();return this.__log_taken.push(u),yield u,this.advance(),u}advance(){this.offset=this.offset+1}pos(){return{kind:"pos",offset:this.offset}}getToken(){return __classPrivateFieldGet$1(this,_Cursor_token,"f")}token(u){var s;return u===!1?(__classPrivateFieldSet$1(this,_Cursor_token,u,"f"),this):(__classPrivateFieldSet$1(this,_Cursor_token,(s=__classPrivateFieldGet$1(this,_Cursor_token,"f"))!==null&&s!==void 0?s:new Token(this),"f"),Object.assign(__classPrivateFieldGet$1(this,_Cursor_token,"f"),u),this)}static isCursorPosition(u){return u?typeof u.offset<"u"&&u.kind==="pos":!1}}_Cursor_parent=new WeakMap,_Cursor_token=new WeakMap;class CharacterCursor extends Cursor{static isCharacterCursor(u){return typeof(u==null?void 0:u.start)<"u"}toString(){const u=this.toJSON();return`(line: ${u.start.line}, col: ${u.start.col})`}pos(){return Object.assign(Object.assign({},super.pos()),{key:this.curr()})}toJSON(){var u,s;const f=this.offset-1,C=this.input.slice(0,this.start).split(`
`),b=C.length,$=this.text,w=$.split(`
`);return{level:this.level,start:{line:b,col:(((u=C.pop())===null||u===void 0?void 0:u.length)||1)-1,offset:this.start},end:{line:b+w.length-1,col:(((s=w.pop())===null||s===void 0?void 0:s.length)||1)-1,offset:f},text:$}}get text(){return this.input.slice(this.start,this.offset)}}var __classPrivateFieldSet=function(e,u,s,f,C){if(f==="m")throw new TypeError("Private method is not writable");if(f==="a"&&!C)throw new TypeError("Private accessor was defined without a setter");if(typeof u=="function"?e!==u||!C:!u.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return f==="a"?C.call(e,s):C?C.value=s:u.set(e,s),s},__classPrivateFieldGet=function(e,u,s,f){if(s==="a"&&!f)throw new TypeError("Private accessor was defined without a getter");if(typeof u=="function"?e!==u||!f:!u.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?f:s==="a"?f.call(e):f?f.value:u.get(e)},_a,_Scanner_lens,_Scanner_handleError,_Scanner_handleSuccess,_Scanner_checkCursor;class Scanner{constructor(u){_Scanner_lens.set(this,void 0),__classPrivateFieldSet(this,_Scanner_lens,u,"f")}*scan(u){let s,f,C=__classPrivateFieldGet(this,_Scanner_lens,"f").getCursor(u);for(yield*C.log({message:"beginning loop"});C.curr();){if(C=yield*C.scan(),!C){yield{error:!0,message:"did not generate a token"};break}try{f=yield*__classPrivateFieldGet(Scanner,_a,"m",_Scanner_checkCursor).call(Scanner,C,f)}catch(b){C=!1,s=b;break}}return C?(yield*__classPrivateFieldGet(Scanner,_a,"m",_Scanner_handleSuccess).call(Scanner,C),C.getToken()):(yield*__classPrivateFieldGet(Scanner,_a,"m",_Scanner_handleError).call(Scanner,s),!1)}getCursor(u){return new CharacterCursor({input:u})}}_a=Scanner,_Scanner_lens=new WeakMap,_Scanner_handleError=function*e(u){yield{success:!1,error:!0,message:{error:u}},yield!1},_Scanner_handleSuccess=function*e(u){yield*u.log({success:!0,message:"ending loop"}),yield u.getToken()},_Scanner_checkCursor=function*e(u,s){const f=u?u.getToken():null;if(!f&&s)throw yield*u.log({error:!0,message:"token stream broke",info:{currentToken:f,prevCursor:s}}),new Error("token stream broke");if((s==null?void 0:s.offset)===u.offset)throw yield*u.log({error:!0,message:"cursor did not change positions"}),new Error("token stream broke");return u};function beginsNumeric(e){const u=e.curr();return u?/\d/.test(u):!1}function continuesNumeric(e){const u=e.curr();return u?/\d/.test(u):!1}function*numeric(e,u){const s=e.spawn(u);if(s.token({kind:"numeric"}),u)return yield*s.log({message:"not numeric",miss:"cannot follow prev",cursors:{start:e,prev:u}}),u;const{integral:f,fractional:C}=yield*loop$6(s);if(!(f.length||C.length))return yield*s.log({message:"not numeric",miss:"no integral or fractional components"}),!1;yield*s.log({message:"resolving numeric"});const b=f.length?parseInt(f.join("")):0,$=C.length?parseFloat(`.${C.join()}`):void 0,w={key:b+($??0)};return s.token({head:w,integral:b,fractional:$}),s}function*loop$6(e){const u=[];{let f=beginsNumeric,C;for(;f(e);)!C&&(C=!0)&&(f=continuesNumeric,yield*e.log({message:"beginning numeric",info:{component:"integral"}})),u.push(e.curr()),yield*e.take()}const s=[];if(e.curr()==="."){yield*e.take();let f=!1,C=continuesNumeric;for(;C(e);)!f&&(f=!0)&&(C=continuesNumeric,yield*e.log({message:"continuing numeric",info:{component:"fractional"}})),s.push(e.curr()),yield*e.take()}return{integral:u,fractional:s}}function beginsNominal(e){return e?/[a-zA-Z]/.test(e):!1}function continuesNominal(e){return e?beginsNominal(e)||e==="_":!1}const openConcept$1={name:"conceptual.open",key:"<",opposite:">",kind:"delimiter",open:!0},openLocation$1={name:"locational.open",key:"(",opposite:")",kind:"delimiter",open:!0},openStructure={name:"structural.open",key:"{",opposite:"}",kind:"delimiter",open:!0},openEssence={name:"essential.open",key:"[",opposite:"]",kind:"delimiter",open:!0},closeConcept$1={name:"conceptual.close",key:">",opposite:"<",kind:"delimiter",close:!0},closeLocation$1={name:"locational.close",key:")",opposite:"(",kind:"delimiter",close:!0},closeStructure={name:"structural.close",key:"}",opposite:"{",kind:"delimiter",close:!0},closeEssence={name:"essential.close ",key:"]",opposite:"[",kind:"delimiter",close:!0},openContainerDelimitingOperators={"<":openConcept$1,"(":openLocation$1,"{":openStructure,"[":openEssence,_inverse:{">":openConcept$1,")":openLocation$1,"}":openStructure,"]":openEssence}},closeContainerDelimitingOperators={">":closeConcept$1,")":closeLocation$1,"}":closeStructure,"]":closeEssence,_inverse:{"<":closeConcept$1,"(":closeLocation$1,"{":closeStructure,"[":closeEssence}},containerDelimitingOperators={open:openContainerDelimitingOperators,close:closeContainerDelimitingOperators};function beginsContainer(e){const u=e.curr();return u?!!containerDelimitingOperators.open[u]:!1}function isPhrasalDelimiter(e){return e.curr()===" "}function*takeSpaces(e){const u=[];for(;isPhrasalDelimiter(e);)u.push({key:e.curr()}),yield*e.take();return u}const pragmaticOperators={"*":{name:"salience",key:"*",kind:"pragmatic",kinds:new Set(["pragmatic","nominal"])},"@":{name:"perspective",key:"@",kind:"pragmatic",kinds:new Set(["pragmatic","nominal"])},":":{name:"binding",key:"@",kind:"pragmatic",kinds:new Set(["pragmatic","nominal"])},"+":{name:"aggregation",key:"+",kind:"pragmatic",kinds:new Set(["pragmatic","nominal"])},"-":{name:"reduction",key:"-",kind:"pragmatic",kinds:new Set(["pragmatic","nominal"])},"=":{nodes:{">":{name:"transformation",key:"=>",kind:"pragmatic",kinds:new Set(["pragmatic","nominal"])}}}};function*takeOperator(e,u=pragmaticOperators){let s=e.curr(),f=u[s];const C=[];for(;u[s];){if(C.push(s),f=u[s],!f.nodes){e.advance();break}u=f.nodes,yield*e.take(),s=e.curr()}return[f,C.join("")]}function*takeLabel(e){let u=!1,s;return e.curr()==="_"&&(s=yield*e.take(),u=yield*e.scan([nominal,numeric,container])),[s,u]}function _operator(e){return function*(u){const s=u.spawn();s.token({kind:"operator"}),yield*s.log({message:"checking operator"});const[f,C]=yield*takeOperator(s,e);if(f&&(s.token({proto:f}),s.token({kind:f.kind}),s.token({kind:f.name})),!f)return yield*s.log({message:"not an operator",miss:"no prototype",cursors:{start:u},info:{operators:e,curr:u.curr()}}),!1;const[b,$]=yield*takeLabel(s);return s.token({body:[{key:C}],operators:b?[b]:void 0,tail:$?$.getToken():void 0}),s}}const phrasalPartOptions=[nominal,numeric,container];function*phrasal(e,u){const s=e.spawn(u);if(s.token({kind:"phrasal"}),yield*s.log({message:"checking phrasal"}),!u)return yield*s.log({message:"not phrasal",miss:"no head",cursors:{start:e,prev:u}}),!1;const{head:f,body:C,tail:b,operators:$}=yield*bodyLoop$1(s,u);return b?(yield*s.log({message:"resolving phrasal"}),s.token({head:f,body:C,tail:b,operators:$}),s):(yield*s.log({message:"not phrasal",miss:"no tail",cursors:{start:e,prev:u,cursor:s},info:{head:f,body:C,tail:b,operators:$}}),u??!1)}function*bodyLoop$1(e,u){const s=u&&u.getToken(),f=[],C=[];{let $=!1;for(;isPhrasalDelimiter(e);){!$&&($=!0)&&(yield*e.log({message:"beginning ordinal"}));const w=yield*takeSpaces(e);C.push(w),yield*takeSpaces(e);const h=yield*e.scan(phrasalPartOptions),d=h?h.getToken():null;if(!d)break;f.push(d)}}const b=f.pop();return{head:s,body:f,tail:b,operators:C}}function isCommonDelimiter(e){return e.curr()===","}const commonPartOptions=[nominal,numeric,container,phrasal],commonDelimitingOperators={",":{name:"common",key:",",kind:"delimiter"}},ordinalDelimitingOperators={";":{name:"ordinal",key:";",kind:"delimiter"},"\n":{name:"ordinal",key:";",kind:"delimiter"}};function*common(e,u){const s=e.spawn(u);s.token({kind:"common"}),yield*s.log({message:"checking common"});const{head:f,body:C,tail:b,operators:$}=yield*bodyLoop(s,u);return $.length?(yield*s.log({message:"resolving common"}),s.token({head:f,body:C,tail:b,operators:$}),s):(yield*s.log({message:"not common",miss:"no operators"}),u??!1)}function*bodyLoop(e,u){yield*takeSpaces(e);const s=u&&u.getToken(),f=[],C=[];let b=!1;for(;isCommonDelimiter(e);){!b&&(b=!0)&&(yield*e.log({message:"beginning common"})),yield*takeSpaces(e);const w=yield*e.scan([_operator(commonDelimitingOperators)]),h=w==null?void 0:w.getToken();if(!h)break;C.push(h),yield*takeSpaces(e);const d=yield*e.scan(commonPartOptions);let i=d?d.getToken():null;i||(i=null),f.push(i),yield*takeSpaces(e)}const $=f.pop();return{head:s,body:f,tail:$,operators:C}}function isOrdinalDelimiter(e){return e.curr()===";"||e.curr()===`
`}const operationalPartOptions=[nominal,numeric,container,phrasal,operational$1];function*operational$1(e,u,s=pragmaticOperators){var f;const C=e.spawn(u);C.token({kind:"operational"}),yield*C.log({message:"checking operational"});let{head:b,body:$,tail:w,operators:h,initialProto:d}=yield*loop$5(C,u,s);return h.length?(((f=d==null?void 0:d.kinds)===null||f===void 0?void 0:f.has("nominal"))&&!w&&(w=null),C.token({operators:h}),(d==null?void 0:d.kind)==="delimiter"?C:(h.length===1&&(C.token({kind:d.kind}),C.token({kind:d.name})),typeof w>"u"?(yield*C.log({message:"not operational",miss:"missing a tail component",cursor:C,info:{head:b,body:$,tail:w,tok:C.getToken()}}),C.token(!1),!1):(yield*C.log({message:"resolving operational",cursor:C}),!b&&!w&&C.token({kind:"conceptual"}),C.token({head:b,body:$,tail:w}),C))):(yield*C.log({message:"not operational",miss:"no operators"}),!1)}function*loop$5(e,u,s){const f=u&&u.getToken(),C=[],b=[];s[" "]||(yield*takeSpaces(e));let $,w;for(;$=yield*e.scan([_operator(s)]);){if(!$)continue;if(!($!=null&&$.getToken()))break;yield*e.log({message:"beginning operational"}),b.push($.getToken());const d=$.getToken().proto;if(w=w||d,d.open){const n=yield*takeSpaces($);n.length&&C.push(n[0])}d.close||(yield*takeSpaces(e));const i=yield*e.scan(operationalPartOptions,d.close?$:void 0),r=i?i.getToken():null;if(!r)break;C.push(r),yield*takeSpaces(e)}const h=C.pop();return{head:f,body:C,tail:h,operators:b,initialProto:w}}const ordinalPartOptions=[nominal,numeric,container,phrasal,common,operational$1];function*ordinal(e,u){const s=e.spawn(u);s.token({kind:"ordinal"}),yield*s.log({message:"checking ordinal"});const{head:f,body:C,tail:b,operators:$}=yield*loop$4(s,u);return $.length?(yield*s.log({message:"resolving ordinal"}),s.token({head:f,body:C,tail:b,operators:$}),s):(yield*s.log({message:"not ordinal",miss:"no operators"}),u??!1)}const operational=_operator(ordinalDelimitingOperators);function*loop$4(e,u){yield*takeSpaces(e);const s=u&&u.getToken(),f=[],C=[];let b;{let w=!1;for(;isOrdinalDelimiter(e);){!w&&(w=!0)&&(yield*e.log({message:"beginning ordinal"})),yield*takeSpaces(e);const h=yield*e.scan([operational]),d=h==null?void 0:h.getToken();if(!d)break;!b&&C.push(b=[]),b.push(d),yield*takeSpaces(e);const i=yield*e.scan(ordinalPartOptions);let r=i?i.getToken():null;r?b=null:r=null,f.push(r),yield*takeSpaces(e)}}const $=f.pop();return{head:s,body:f,tail:$,operators:C}}const openConcept={name:"open-conceptual",key:'"',opposite:'"',kind:"delimiter",open:!0},openLocation={name:"open-locational",key:"`",opposite:"`",kind:"delimiter",open:!0},closeConcept={name:"close-conceptual",key:'"',opposite:'"',kind:"delimiter",close:!0},closeLocation={name:"close-locational",key:"`",opposite:"`",kind:"delimiter",close:!0},openLiteralDelimitingOperators={'"':openConcept,"`":openLocation,_inverse:{'"':openConcept,"'":openLocation}},closeLiteralDelimitingOperators={'"':closeConcept,"`":closeLocation,_inverse:{'"':closeConcept,"`":closeLocation}},literalDelimitingOperators={open:openLiteralDelimitingOperators,close:closeLiteralDelimitingOperators};function beginsLiteral(e){const u=e.curr();return u?!!literalDelimitingOperators.open[u]:!1}function beginsAnything(e){return e?e!=='"'&&e!=="`":!1}function continuesAnything(e){return e?beginsAnything(e)||e==="_":!1}function*anything(e,u){const s=e.spawn(u);if(s.token({kind:"anything"}),yield*s.log({message:"checking anything"}),u)return yield*s.log({message:"not anything",miss:"cannot follow prev"}),u;const f=yield*loop$3(s);if(!f.length)return yield*s.log({message:"not anything",miss:"no key"}),!1;yield*s.log({message:"resolving anything"});const C={key:f};return s.token({head:C}),s}function*loop$3(e){const u=[];{let s,f=beginsAnything;for(;e.curr()&&f(e.curr());)!s&&(s=!0)&&(yield*e.log({message:"beginning anything"})),u.push(e.curr()),yield*e.take(),f=continuesAnything}return u}const literalPartOptions=[anything];function*literal(e,u){const s=e.spawn(u);if(s.token({kind:"literal"}),yield*s.log({message:"checking literal"}),u)return yield*s.log({message:"not literal",miss:"prev"}),u;if(!beginsLiteral(e))return yield*s.log({message:"not literal",miss:"cursor cannot start literal"}),!1;const{head:f,body:C,tail:b}=yield*loop$2(s);return yield*s.log({message:"resolving literal"}),s.token({head:f,body:C,tail:b}),s}function*loop$2(e){var u,s;const f=literalDelimitingOperators.open,C=yield*e.scan([_operator(f)]),b=C==null?void 0:C.getToken(),$=(u=b==null?void 0:b.label)===null||u===void 0?void 0:u.key,w=literalDelimitingOperators.close._inverse[b.proto.key];if(!w)throw new Error("could not resolve type");yield*takeSpaces(e);let h,d;const i=[];for(;e.curr();){!h&&(h=!0)&&(yield*e.log({message:"beginning literal"})),yield*takeSpaces(e);const r=yield*e.scan([_operator({[w.key]:w})]),n=r==null?void 0:r.getToken(),t=(s=n==null?void 0:n.label)===null||s===void 0?void 0:s.key;if(n){if(t===$||!(t&&$)){d=n;break}i.push(n),yield*takeSpaces(e)}const o=yield*e.scan(literalPartOptions);if(!o)break;i.push(o==null?void 0:o.getToken()),yield*takeSpaces(e)}return{head:b,body:i,tail:d}}const containerPartOptions=[nominal,numeric,container,literal,phrasal,common,ordinal,operational$1];function*container(e,u){const s=e.spawn(u);if(s.token({kind:"container"}),yield*s.log({message:"checking container"}),u)return yield*s.log({message:"not container",miss:"prev"}),u;if(!beginsContainer(e))return yield*s.log({message:"not container",miss:"cursor cannot start container"}),!1;const{head:f,body:C,tail:b}=yield*loop$1(s);return s.token({kind:f.proto.name.split(".")[0]}),yield*s.log({message:"resolving container"}),s.token({head:f,body:C,tail:b}),s}function*loop$1(e){var u,s;const f=containerDelimitingOperators.open,C=yield*e.scan([_operator(f)]),b=C==null?void 0:C.getToken(),$=(u=b==null?void 0:b.label)===null||u===void 0?void 0:u.key,w=containerDelimitingOperators.close._inverse[b.proto.key];if(!w)throw new Error("could not resolve type");yield*takeSpaces(e);let h,d;const i=[];for(;e.curr();){!h&&(h=!0)&&(yield*e.log({message:"beginning container"})),yield*takeSpaces(e);const r=yield*e.scan([_operator({[w.key]:w})]),n=r==null?void 0:r.getToken(),t=(s=n==null?void 0:n.label)===null||s===void 0?void 0:s.key;if(n){if(t===$||!(t&&$)){d=n;break}i.push(n),yield*takeSpaces(e)}const o=yield*e.scan(containerPartOptions);if(!o)break;i.push(o==null?void 0:o.getToken()),yield*takeSpaces(e)}return{head:b,body:i,tail:d}}function*definition(e){var u;const s=new Map;let f;for(;(f=yield*e.scan([container]))&&(f=f.getToken());){const C=(u=s.get(f.head.proto))!==null&&u!==void 0?u:[];C.push(f),s.set(f.head.proto.name,C)}return s}function*takeDefinition(e){const u=yield*definition(e);e.token({definition:u}),u.size&&e.token({body:[...u.values()]})}function*nominal(e,u){const s=e.spawn(u);if(s.token({kind:"nominal"}),yield*s.log({message:"checking nominal"}),u)return yield*s.log({message:"not nominal",miss:"cannot follow prev"}),u;const f=yield*loop(s);if(!f.length)return yield*s.log({message:"not nominal",miss:"no key"}),!1;yield*s.log({message:"resolving nominal"});const C={key:f};return s.token({head:C}),yield*takeDefinition(s),s}function*loop(e){const u=[];{let s,f=beginsNominal;for(;e.curr()&&f(e.curr());)!s&&(s=!0)&&(yield*e.log({message:"beginning nominal"})),u.push(e.curr()),yield*e.take(),f=continuesNominal}return u.join("")}const nodalConstructs={literal,container,nominal,numeric},pragmaticConstructs={operational:operational$1},semanticConstructs={phrasal,common,ordinal},allConstructs=Object.assign(Object.assign(Object.assign({},nodalConstructs),pragmaticConstructs),semanticConstructs);class ParserLens extends Lens{constructor(){super(...arguments),this.generators=Object.values(allConstructs),this.Cursor=CharacterCursor}}function parse(e,{asGenerator:u=!1}={}){if(u)return f();let s;for(const C of f())s=C;return s;function*f(){const C=new ParserLens;yield*new Scanner(C).scan(e)}}const MAIN_MENU_OPTION="main-menu",HOTKEY_OPTION="hotkey-menu",STANDARD_OPTION="standard",MINIMALISM_OPTION="minimalism";function toggleHotkeyMenu(){toggleInterfaceDepthOptions([HOTKEY_OPTION,window.spwashi.minimalism?MINIMALISM_OPTION:STANDARD_OPTION])}function toggleInterfaceDepthOptions(e){let u;if(e){const s=e.indexOf(document.body.dataset.interfaceDepth),f=e.filter((C,b)=>b!==s);u=f[s+1]||f[0]}else window.spwashi.minimalism?u=MINIMALISM_OPTION:u=STANDARD_OPTION;document.body.dataset.interfaceDepth=u}function initKeystrokes(){const e=document.querySelector("#mainmenu-toggle");e&&(e.onclick=()=>toggleInterfaceDepthOptions([MAIN_MENU_OPTION,window.spwashi.minimalism?MINIMALISM_OPTION:STANDARD_OPTION])),window.spwashi.keystrokeRevealOrder=window.spwashi.keystrokeRevealOrder||0,window.spwashi.keystrokeOptions=window.spwashi.keystrokeOptions||initialKeyStrokeOptions,initHotkeyButtons()}function moreNodes(){generateNodes()}function bonkVelocityDecay(){window.spwashi.parameters.forces.velocityDecay=window.spwashi.parameters.forces.velocityDecay===.1?.9:.1,reinitializeSimulation()}function lessNodes(){window.spwashi.nodes.length=Math.max(0,window.spwashi.nodes.length-window.spwashi.parameters.nodes.count),reinitializeSimulation()}function saveActiveNodes(){const e=window.spwashi.nodes;e.map(NODE_MANAGER.cacheNode),window.spwashi.setItem("parameters.nodes-input",e),window.spwashi.setItem("parameters.nodes-input-map-fn-string","data => data"),window.spwashi.refreshNodeInputs()}function clearActiveNodes(){window.spwashi.nodes.length=0,window.spwashi.links.length=0,window.spwashi.perspectiveMap.delete(getDocumentDataIndex()),reinitializeSimulation()}function fixPositions(){window.spwashi.nodes.forEach(e=>{e.fx=e.x,e.fy=e.y})}function clearCachedNodes(){window.spwashi.clearCachedNodes()}function clearFixedPositions(){window.spwashi.nodes.forEach(e=>{e.fx=void 0,e.fy=void 0})}function getNextUrlSearchParams(){const e=window.location.href.split("?")[1]||"",u=new URLSearchParams(e),s=new URLSearchParams;return u.has("title ")&&s.set("title",u.get("title")),u.has("size")&&s.set("size",u.get("size")),u.has("superpower")&&s.set("superpower",u.get("superpower")),s}function getNextHref(e){return`${window.location.href.split("?")[0]}?${e.toString()}`}function resetInterface(){window.localStorage.clear();const e=getNextUrlSearchParams();window.location.href=getNextHref(e)}function plainKeyHandler(e,u){const s=window.spwashi.modeOrder.map((C,b)=>[b+1,()=>setDocumentMode(C,!0,!0)]),f=Object.fromEntries(s);if(!["INPUT","TEXTAREA"].includes(document.activeElement.tagName)){if(e==="/"){u.preventDefault(),document.querySelector("h1").click();return}if(f[e]){u&&u.preventDefault(),f[e]();return}switch(e){case"ArrowRight":window.spwashi.callbacks.arrowRight();break;case"ArrowLeft":window.spwashi.callbacks.arrowLeft();break;case"ArrowUp":window.spwashi.callbacks.arrowUp();break;case"ArrowDown":window.spwashi.callbacks.arrowDown();break}}}document.addEventListener("keydown",e=>{const u=e.key;if(u==="Escape"&&(document.querySelector("#mode-container :is(:focus)"),setDocumentMode("")),!e.shiftKey){if(e.metaKey||e.ctrlKey){for(let s of window.spwashi.keystrokeOptions)u===s.shortcut&&(e.preventDefault(),s.callback());return}plainKeyHandler(u,e)}});function initHotkeyButtons(){const e=document.querySelector("#keystroke-options");e.innerHTML="";const u=document.querySelector("#hotkey-menu-toggle");u.onclick=f=>{toggleHotkeyMenu()};const s=e.appendChild(document.createElement("UL"));window.spwashi.keystrokeOptions.filter(f=>f.revealOrder<=window.spwashi.keystrokeRevealOrder).forEach(({shortcut:f,categories:C=[],title:b,callback:$,shortcutName:w})=>{const h=()=>{$()},d=s.appendChild(document.createElement("LI"));if(!b)return;const i=d.appendChild(document.createElement("SPAN"));i.className="ctg",i.innerHTML=C.map(t=>`<span>[${t}]</span>`).join("");const r=d.appendChild(document.createElement("BUTTON"));r.onclick=h,r.innerHTML=b;const n=d.appendChild(document.createElement("KBD"));n.innerHTML=`ctrl + <strong>${w||f}</strong>`})}const toggleFocalPoint=()=>{const e=document.querySelector("#focal-square"),s=e.dataset.focalStatus!=="active"?"active":"inactive";e.disabled=s==="inactive",e.dataset.focalStatus=s};function toggleMainMenu(){toggleInterfaceDepthOptions([MAIN_MENU_OPTION,window.spwashi.minimalism?MINIMALISM_OPTION:STANDARD_OPTION])}const initialKeyStrokeOptions=[{revealOrder:0,shortcut:"ArrowUp",categories:["nodes"],shortcutName:"↑",title:"more",callback:moreNodes},{revealOrder:0,shortcut:"[",categories:["this"],title:"toggle main menu",callback:()=>{toggleMainMenu()}},{revealOrder:0,shortcut:"]",categories:["this"],title:"toggle focal point",callback:toggleFocalPoint},{revealOrder:0,shortcut:"/",categories:["this"],title:"toggle hotkey menu",callback:()=>toggleHotkeyMenu()},{revealOrder:0,shortcut:"y",categories:["this"],title:"yoink",callback:()=>{const e=window.spwashi.nodes,u=window.spwashi.links;e.forEach(s=>{s.fx=void 0,s.fy=void 0}),window.spwashi.simulation.force("center",null),window.spwashi.simulation.force("charge",null),window.spwashi.simulation.force("link",null),window.spwashi.simulation.force("collide",null),window.spwashi.simulation.force("center",s=>{const f=window.spwashi.nodes,C=f.length;let b=0,$=0;for(let w=0;w<C;++w)b+=f[w].x,$+=f[w].y;b/=C,$/=C;for(let w=0;w<C;++w){const h=f[w];h.x-=b,h.y-=$,(h.x<10||h.y<10)&&(h.r=10)}}),window.navigator.clipboard.writeText(JSON.stringify({nodes:e,links:u},null,3)),setTimeout(()=>{window.spwashi.nodes.length=0,window.spwashi.links.length=0,window.spwashi.reinit()},300)}},{revealOrder:1,shortcut:"<space>"},{revealOrder:1,shortcut:";",categories:["forces","velocity decay"],shortcutName:";",title:"bonk",callback:bonkVelocityDecay},{revealOrder:1,shortcut:"<space>"},{revealOrder:1,shortcut:".",categories:["nodes"],title:"fix position",callback:fixPositions},{revealOrder:1,shortcut:",",categories:["nodes"],title:"unfix position",callback:clearFixedPositions},{revealOrder:1,shortcut:"<space>"},{revealOrder:1,shortcut:"k",categories:["data"],title:"clear nodes",callback:clearActiveNodes},{revealOrder:1,shortcut:"-",categories:["data","cache"],title:"clear node cache",callback:clearCachedNodes},{revealOrder:1,shortcut:"s",categories:["nodes"],title:"save",callback:saveActiveNodes},{revealOrder:1,shortcut:"<space>"},{revealOrder:1,shortcut:"ArrowDown",categories:["nodes"],shortcutName:"↓",title:"fewer",callback:lessNodes},{revealOrder:1,shortcut:"<space>"},{revealOrder:1,shortcut:"\\",categories:["data","cache"],title:"reset interface",callback:resetInterface}];let focalPointElement;const focalPointMeta={ready:!0},focalPoint={x:0,y:0,queuedAction:()=>{const e=window.spwashi.getItem("mode","focal.root");setDocumentMode(e)},onFocus:()=>{}};function initiateInterest(e,u=500){e.classList.add("consent-to-engage");const s={interested:null,revoke:C},f=setTimeout(()=>{e.classList.remove("consent-to-engage"),e.classList.add("consented-to-engage"),s.interested=!0},u);function C(){clearTimeout(f),e.classList.remove("consented-to-engage"),e.classList.remove("consent-to-engage"),s.interested=!1}return s}function initFocalSquare(){if(!focalPointElement){focalPointElement=document.querySelector("#focal-square");const e=window.spwashi.getItem("focalPoint","focal.root");e&&(Object.assign(focalPoint,e),setFocalPoint(focalPoint,!0)),focalPointElement.onmousedown=u=>{u.preventDefault();const s=initiateInterest(focalPointElement,100);document.documentElement.onmousemove=f=>{s.interested&&(f.preventDefault(),focalPointMeta.ready=!1,setFocalPoint({x:f.x,y:f.y},!0))},document.documentElement.onmouseup=f=>{f.preventDefault(),s.revoke(),focalPointMeta.ready||setTimeout(()=>focalPointMeta.ready=!0,100),document.documentElement.onmousemove=null,document.documentElement.onmouseup=null}},focalPointElement.ontouchstart=u=>{u.preventDefault();const s=initiateInterest(focalPointElement,300);document.documentElement.ontouchmove=f=>{f.preventDefault(),s.interested&&(focalPointMeta.ready=!1,setFocalPoint({x:f.touches[0].clientX,y:f.touches[0].clientY},!0))},document.documentElement.ontouchend=f=>{f.preventDefault(),s.interested||(focalPointMeta.ready=!0,focalPointElement.onclick(f)),s.revoke(),focalPointMeta.ready||setTimeout(()=>focalPointMeta.ready=!0,100),document.documentElement.ontouchmove=null,document.documentElement.ontouchend=null}}}return focalPointElement.onclick=e=>{focalPointMeta.ready&&focalPoint.queuedAction()},focalPointElement.onfocus=e=>{focalPoint.onFocus()},focalPointElement}function setFocalPoint({x:e,y:u},s=!1){focalPoint.x=e,focalPoint.y=u,s&&(focalPoint.fx=e,focalPoint.fy=u),document.documentElement.style.setProperty("--focal-x",e+"px"),document.documentElement.style.setProperty("--focal-y",u+"px"),window.spwashi.setItem("focalPoint",{x:e,y:u,fx:e,fy:u},"focal.root")}document.documentElement.style.setProperty("--focal-y-basis",document.documentElement.getBoundingClientRect().height+"px");function attachFocalPointToElementPosition(e){const u=e.getBoundingClientRect().x,s=e.getBoundingClientRect().y,f=e.getBoundingClientRect().width,C=e.getBoundingClientRect().height,b=u+f,$=s+C;(focalPoint.fx===void 0||focalPoint.fy===void 0)&&setFocalPoint({x:b,y:$})}const parseSpw=e=>{const u=[],s=parse(e,{asGenerator:!0});for(let $ of s)CharacterCursor.isCharacterCursor($)&&u.push($.getToken());const f=getDocumentDataIndex(),C={};return u.forEach($=>C[$.identity]=C[$.identity]||$),appendIdentities(f,Object.keys(C),C).map($=>C[$])};function appendIdentities(e,u,s){window.spwashi.perspectiveMap.has(e)||window.spwashi.perspectiveMap.set(e,{identities:new Set,tokenObj:{}});const f=window.spwashi.perspectiveMap.get(e),C=u.filter(b=>!f.identities.has(b));return C.forEach(b=>{f.identities.add(b)}),Object.assign(f.tokenObj,s),C}function getTokenObj(e){return Object.fromEntries(e.map(u=>[u,{identity:u}]))}function setPageImage(e){const u=new Image;return u.src=e,window.spwashi.setItem("parameters.page-image.url",e),u}function initPageImage(e){const u=document.querySelector("#main-image-container");u.innerHTML="";const s=window.spwashi.getItem("parameters.page-image.url");if(s){const f=new Image;f.src=s,u.appendChild(f)}}function initInputField(){const e=window.spwashi.getItem("parameters.spw-parse-field")||"",u=document.querySelector("#spw-parse-field");return u.value=e,u.addEventListener("paste",s=>{const f=(s.clipboardData||s.originalEvent.clipboardData).items;for(const b of f)if(b.type.indexOf("image")===0){const $=b.getAsFile();var C=new FileReader;C.onload=function(w){const h=w.target.result;setPageImage(h)},C.readAsDataURL($),initPageImage()}}),u}function filterNodeIdLines(e){return window.spwashi.nodes.forEach(u=>{e=e.replace(new RegExp(u.id+`
`,"g"))}),console.log(e),e}function initializeSpwParseField(){initPageImage(),window.spwashi.perspectiveMap=new Map;const e=getDocumentDataIndex(),u=window.spwashi.nodes.map(C=>C.identity);appendIdentities(e,u,getTokenObj(u));const s=initInputField();window.spwashi.spwEditor=s;const f=document.querySelector("#parse-spw");f.onclick=()=>{let C=s.value,b=!1,$="",w=[],h=[],d={};window.spwashi.nodes.forEach(l=>{d[l.id]=l});const i=[],r=[];C.split(`
`).map(l=>{var A,F,N,O,H,R;if(d[l]){h.push(d[l]);return}const p=(A=/@=(.+)/.exec(l))==null?void 0:A[1];if(p){p.split(",").map(L=>{const S=window.spwashi.nodes.find(E=>E.id===L||E.identity===L);S&&w.push(S)}),reinitializeSimulation();return}const v=(F=/add=(-?\d+)/.exec(l))==null?void 0:F[1];if(v){b=!0,generateNodes(parseInt(v));return}const k=(N=/boundingBox=(-?\d+)/.exec(l))==null?void 0:N[1];if(k){b=!0,window.spwashi.parameters.forces.boundingBox=!!parseInt(k);return}const D=(O=/charge=(-?\d+)/.exec(l))==null?void 0:O[1];if(D){b=!0,window.spwashi.parameters.forces.charge=parseInt(D);return}const _=(H=/velocityDecay=(-?\d*\.?\d+)/.exec(l))==null?void 0:H[1];if(_){b=!0,window.spwashi.parameters.forces.velocityDecay=parseFloat(_);return}const M=(R=/nodeCount=(\d+)/.exec(l))==null?void 0:R[1];if(M){b=!0,window.spwashi.parameters.nodes.count=parseInt(M);return}switch(l){case"home":window.location.href="/";return;case"demo":r.push("add=10"),r.push("bonk"),r.push("boundingBox=1"),r.push("charge=-100"),r.push("velocityDecay=0.9"),r.push("nodeCount=1"),r.push("boon"),r.push("bonk"),r.push("nodeCount=3"),r.push("boon"),r.push("bonk"),r.push("minimalism"),$="spw";return;case"clicked":const I=window.spwashi.nodes.clicked.map(T=>T.id).join(`
`);r.push(I),$="spw";return;case"save":saveActiveNodes();return;case"cluster":const L=window.spwashi.nodes.reduce((T,B)=>{const P=B.colorindex;return T[P]=T[P]||[],T[P].push(B),T},{});window.spwashi.nodes=window.spwashi.nodes.filter(T=>T.kind!=="__cluster"),window.spwashi.links=window.spwashi.links.filter(T=>T.source.kind!=="__cluster"&&T.target.kind!=="__cluster"),Object.entries(L).forEach(([T,B])=>{const P={id:T,kind:"__cluster",r:100};window.spwashi.nodes.push(P),B.forEach(W=>{window.spwashi.links.push({source:P,target:W,strength:1})})}),reinitializeSimulation();return;case"minimalism":window.spwashi.minimalism=!0,toggleInterfaceDepthOptions(),document.body.dataset.displaymode="nodes";return;case"scatter":window.spwashi.nodes.forEach(T=>{T.x=Math.random()*1e3,T.y=Math.random()*1e3}),reinitializeSimulation();return;case"link":const S=window.spwashi.nodes;S.forEach((T,B)=>{const P=S[B],W=S[(B+1)%S.length];window.spwashi.links.push({source:P,target:W,strength:.1})}),reinitializeSimulation();return;case"bone":window.spwashi.bone();return;case"boon":window.spwashi.boon();return;case"honk":window.spwashi.honk();return;case"bonk":window.spwashi.bonk();return;case"display=nodes":const E=new URLSearchParams;E.set("display","nodes"),window.spwashi.readParameters(E);return;case"clear page image":window.spwashi.setItem("parameters.page-image",""),initPageImage();return;case"clear":window.spwashi.nodes=[],window.spwashi.links=[],reinitializeSimulation(),initFocalSquare().focus();return;case moreMenuOptionsSpell:window.spwashi.keystrokeRevealOrder=1,initKeystrokes();break;default:r.push(l)}i.push(l)}),h.forEach(l=>{l.r=10}),w.forEach(l=>{l.r=100}),b&&reinitializeSimulation(),window.spwashi.setItem("parameters.spw-parse-field",C),setDocumentMode($,!1),C=i.filter(l=>typeof l=="string").join(`
`),C=filterNodeIdLines(C),s.value=r.join(`
`);const t=parseSpw(C),o=JSON.parse(JSON.stringify(t));o.forEach(NODE_MANAGER.processNode),window.spwashi.nodes.push(...o),reinitializeSimulation(),initFocalSquare().focus()}}function pushLink(e,u){e.push(u)}function initLinks(e,u){const s=window.spwashi.parameters.links.strength;window.spwashi.parameters.links.linkPrev;const f=e;let C=!1;for(let b of u){const{head:$,body:w,tail:h}=b.parts;[$,w,h].flat().map(i=>i==null?void 0:i.identity).filter(Boolean).forEach(i=>{const r=typeof i=="string"?i:i.identity,n=!!window.spwashi.parameters.perspective,t=window.spwashi.getNode(r,n?b.colorindex:void 0);if(!t){C=!0;return}let o=1;switch(t.kind.trim()){case"operator + delimiter + essential.open":case"operator + delimiter + essential.close":o=5;break;case"operator + delimiter + locational.open":case"operator + delimiter + locational.close":o=5;break;case"operator + delimiter + conceptual.open":case"operator + delimiter + conceptual.close":o=5;break}switch(b.kind.trim()){case"phrasal":o=7;break}const l=s*o,p={source:t.id,target:b.id,strength:l};pushLink(f,p)})}return C&&console.error(u),f}function updateLinks(e,u){e.select(".links").selectAll("line").data(u).join(s=>s.append("line").attr("stroke-width",f=>(f.strength||1)*13).attr("x1",f=>f.source.x).attr("y1",f=>f.source.y).attr("x2",f=>f.target.x).attr("y2",f=>f.target.y),s=>s.attr("x1",f=>f.source.x).attr("data-colorindex",f=>"spwashi-stroke-"+f.colorindex).attr("y1",f=>f.source.y).attr("x2",f=>f.target.x).attr("y2",f=>f.target.y),s=>s.remove())}const EDGE_MANAGER={initLinks,updateLinks},dataindexPrefix$1="spwashi-action-";function getActionIndexForNumber(e){return dataindexPrefix$1+e}function initializeReflexMode(){window.spwashi.boon=()=>{async function*h(i=100,r=window.spwashi.parameters.nodes.count){for(let n=0;n<r;n++)yield n,await new Promise(t=>setTimeout(t,i))}async function d(){let i=[];for await(const r of h()){const n={name:"#",r:30,color:"wheat",colorindex:getDocumentDataIndex()};window.spwashi.nodes.push(n),window.spwashi.reinit(),i.push(n)}return i}return d()},window.spwashi.bane=h=>{async function*d(r,n){let t=h||window.spwashi.nodes;for(let o=100;o--;o>0)for(let l of t)yield l,await new Promise(p=>setTimeout(p,r))}async function i(){let r=[];for await(const n of d(10))n.r=Math.min(n.r*Math.random(),100),n.r=Math.max(n.r*Math.random(),10);return r}return i()},window.spwashi.bone=()=>{window.spwashi.links=window.spwashi.links||[];const h=new Map;for(let d of window.spwashi.nodes){const i=h.get(d.colorindex)||[];i.push(d),h.set(d.colorindex,i)}[...h.values()].forEach(d=>{let i,r;for(let n of d){r=r||n;let t=window.spwashi.getNode(i==null?void 0:i.id),o=window.spwashi.getNode(n.id);const l={source:o,target:t,colorindex:o.colorindex,strength:window.spwashi.parameters.links.strength*.3};o&&pushLink(window.spwashi.links,l),i=n}pushLink(window.spwashi.links,{source:i==null?void 0:i.id,target:r==null?void 0:r.id,strength:window.spwashi.parameters.links.strength*.3})}),window.spwashi.reinit()},window.spwashi.bonk=h=>{(h||window.spwashi.nodes).forEach(d=>(d.color=void 0,d.colorindex+=1)),window.spwashi.reinit()},window.spwashi.honk=()=>{window.spwashi.links.forEach(h=>h.strength*=1.5),window.spwashi.reinit()};const b=[{title:"Lore",reflexes:[["boon",()=>{window.spwashi.boon()}],["bone",()=>{window.spwashi.bone()}],["honk",()=>{window.spwashi.honk()}],["bane",()=>{window.spwashi.bane(),window.spwashi.reinit()}],["bonk",()=>{window.spwashi.bonk()}]]},{title:"Set Charge",reflexes:[["-100",()=>{window.spwashi.parameters.forces.charge=-100,window.spwashi.reinit()}],["0",()=>{window.spwashi.parameters.forces.charge=0,window.spwashi.reinit()}],["100",()=>{window.spwashi.parameters.forces.charge=100,window.spwashi.reinit()}],["-1k",()=>{window.spwashi.parameters.forces.charge=-1e3,window.spwashi.reinit()}],["-10k",()=>{window.spwashi.parameters.forces.charge=-1e4,window.spwashi.reinit()}]]},{title:"Adjust Radius",reflexes:[["*=3.2",()=>{window.spwashi.nodes.forEach(h=>h.r*=3.2),window.spwashi.reinit()}],["/=2.3",()=>{window.spwashi.nodes.forEach(h=>h.r/=2.3),window.spwashi.reinit()}],["=10",()=>{window.spwashi.nodes.forEach(h=>h.r=10),window.spwashi.reinit()}]]},{title:"Adjust Charge",reflexes:[["-100",()=>{window.spwashi.parameters.forces.charge-=100,window.spwashi.reinit()}],["-10",()=>{window.spwashi.parameters.forces.charge-=10,window.spwashi.reinit()}],["*-1",()=>{window.spwashi.parameters.forces.charge*=-1,window.spwashi.reinit()}],["+10",()=>{window.spwashi.parameters.forces.charge+=10,window.spwashi.reinit()}],["*13",()=>{window.spwashi.parameters.forces.charge*=10,window.spwashi.reinit()}]]},{title:"force",reflexes:[["v.d.",()=>{const h=["0.1","0.2","0.3","0.4","0.5"],d=window.spwashi.__session.i++;window.spwashi.parameters.forces.velocityDecay=h[d%h.length],window.spwashi.reinit()}],["box",()=>{window.spwashi.parameters.forces.boundingBox=!window.spwashi.parameters.forces.boundingBox,window.spwashi.reinit()}]]}],$=document.querySelector("#reflexes");let w=0;b.forEach(({title:h,reflexes:d})=>{const i=$.appendChild(document.createElement("section"));i.classList.add("card");const r=i.appendChild(document.createElement("header"));r.classList.add("card-header");const n=i.appendChild(document.createElement("div"));n.classList.add("card-body");const t=n.appendChild(document.createElement("div"));t.classList.add("button-container"),r.innerText=h,d.forEach(o=>{const l=t.appendChild(document.createElement("button"));l.innerText=o[0],l.onclick=()=>{o[1](),setDocumentMode(null),document.querySelector("#mode-selector--reflex").focus()},l.dataset.actionindex=getActionIndexForNumber(w++)})})}function onReflexModeStart(){document.querySelector("#reflexes button").focus();const e=document.querySelectorAll("#reflexes button"),u={},s={};e.forEach(f=>{const C=f.getBoundingClientRect(),b=Math.round(C.x),$=Math.round(C.y);u[b]||(u[b]=[]),s[$]||(s[$]=[]),u[b].push(f),s[$].push(f)}),window.spwashi.callbacks.arrowLeft=()=>{const f=document.activeElement,C=Math.round(f.getBoundingClientRect().y),b=s[C],$=b.indexOf(f),w=b[$-1]||b[b.length-1];w&&w.focus()},window.spwashi.callbacks.arrowRight=()=>{const f=document.activeElement,C=Math.round(f.getBoundingClientRect().y),b=s[C],$=b.indexOf(f),w=b[$+1]||b[0];w&&w.focus()},window.spwashi.callbacks.arrowUp=()=>{const f=document.activeElement,C=Math.round(f.getBoundingClientRect().x),b=u[C],$=b.indexOf(f),w=b[$+1]||b[0];w&&w.focus()},window.spwashi.callbacks.arrowDown=()=>{const f=document.activeElement,C=Math.round(f.getBoundingClientRect().x),b=u[C],$=b.indexOf(f),w=b[$-1]||b[b.length-1];w&&w.focus()}}function initParameters(){window.spwashi.parameters=window.spwashi.parameters||{},window.spwashi.parameters.debug=!1,window.spwashi.parameters.perspective=window.spwashi.parameters.perspective||void 0,window.spwashi.parameters.dataIndex=window.spwashi.parameters.dataIndex||null,window.spwashi.parameters.width=window.spwashi.parameters.width||window.innerWidth*.9,window.spwashi.parameters.height=window.spwashi.parameters.height||window.innerHeight*.9,window.spwashi.parameters.startPos=window.spwashi.parameters.startPos||{},window.spwashi.parameters.startPos.x=window.spwashi.parameters.startPos.x||window.spwashi.parameters.width/2,window.spwashi.parameters.startPos.y=window.spwashi.parameters.startPos.y||window.spwashi.parameters.height/2,window.spwashi.parameters.links=window.spwashi.parameters.links||{},window.spwashi.parameters.links.strength=window.spwashi.parameters.links.strength||.1,window.spwashi.parameters.nodes=window.spwashi.parameters.nodes||{},window.spwashi.parameters.nodes.count=window.spwashi.parameters.nodes.count||13,window.spwashi.parameters.nodes.radiusMultiplier=window.spwashi.parameters.nodes.radiusMultiplier||30,window.spwashi.parameters.forces=window.spwashi.parameters.forces||{},window.spwashi.parameters.forces.alpha=window.spwashi.parameters.forces.alpha||1,window.spwashi.parameters.forces.alphaTarget=window.spwashi.parameters.forces.alphaTarget||.3,window.spwashi.parameters.forces.alphaDecay=window.spwashi.parameters.forces.alphaDecay||.03,window.spwashi.parameters.forces.velocityDecay=window.spwashi.parameters.forces.velocityDecay||.91,window.spwashi.parameters.forces.charge=window.spwashi.parameters.forces.charge||10,window.spwashi.parameters.forces.centerStrength=window.spwashi.parameters.forces.centerStrength||1,window.spwashi.parameters.forces.boundingBox=typeof window.spwashi.parameters.forces.boundingBox<"u"?window.spwashi.parameters.forces.boundingBox:!0,window.spwashi.parameters.forces.centerPos=window.spwashi.parameters.forces.centerPos||{},window.spwashi.parameters.forces.centerPos.x=window.spwashi.parameters.forces.centerPos.x||window.spwashi.parameters.startPos.x,window.spwashi.parameters.forces.centerPos.y=window.spwashi.parameters.forces.centerPos.y||window.spwashi.parameters.startPos.y}function readParameters(e){var f;[...e.entries()].forEach(([C,b])=>(document.querySelector(`[name=${C}]`)||{}).value=b),window.spwashi.parameters=window.spwashi.parameters||{},window.spwashi.values=window.spwashi.values||{},window.spwashi.values.fy=[],window.spwashi.values.r=[],window.spwashi.values.text=window.spwashi.values.text||{},window.spwashi.values.text.fontSize=window.spwashi.values.text.fontSize||[],window.spwashi.superpower=window.spwashi.superpower||{name:"hyperlink",intent:1},window.spwashi.parameters.links=window.spwashi.parameters.links||{},window.spwashi.parameters.forces=window.spwashi.parameters.forces||{},window.spwashi.featuredIdentity=((f=/\/identity\/([a-zA-Z\d]+)/.exec(window.location.href))==null?void 0:f[1])||e.get("identity");const u=`spwashi.parameters#${window.spwashi.featuredIdentity}`;window.spwashi.parameterKey=u,console.log({parameterKey:u});let s;if(e.get("title")&&(document.title=e.get("title"),document.querySelector("h1").innerText=e.get("title")),e.has("perspective")&&(window.spwashi.parameters.perspective=e.get("perspective")!=="0"),e.has("display")&&(document.body.dataset.displaymode=e.get("display")),e.has("reset")&&window.localStorage.clear(),e.has("nodeCount")&&(window.spwashi.parameters.nodes=window.spwashi.parameters.nodes||{},window.spwashi.parameters.nodes.count=+e.get("nodeCount")),e.has("linkStrength")&&(window.spwashi.parameters.links.strength=+e.get("linkStrength")),e.has("charge")&&(window.spwashi.parameters.forces.charge=+e.get("charge")),e.has("linkStyle")?window.spwashi.parameters.links.linkPrev=e.get("linkStyle")==="prev":window.spwashi.parameters.links.linkPrev=0,e.has("width")&&(window.spwashi.parameters.width=+e.get("width")),e.has("size")&&(window.spwashi.parameters.width=+e.get("size").split(",")[0],window.spwashi.parameters.height=+e.get("size").split(",")[0]),e.has("height")&&(window.spwashi.parameters.height=+e.get("height")),e.has("centerStrength"),e.has("center")){let[C,b]=e.get("center").split(",").map($=>+$);b=b||C,window.spwashi.parameters.startPos={x:C,y:b},window.spwashi.parameters.forces.centerPos={x:C,y:b}}else{let[C,b]=[window.spwashi.parameters.width,window.spwashi.parameters.height].map($=>$/2);window.spwashi.parameters.startPos={x:C,y:b},window.spwashi.parameters.forces.centerPos={x:C,y:b}}e.has("alpha")&&(window.spwashi.parameters.forces.alpha=+e.get("alpha")),e.has("alphaTarget")&&(window.spwashi.parameters.forces.alphaTarget=+e.get("alphaTarget")),e.has("alphaDecay")&&(window.spwashi.parameters.forces.alphaDecay=+e.get("alphaDecay")),e.has("velocityDecay")&&(window.spwashi.parameters.forces.velocityDecay=+e.get("velocityDecay")),e.has("zoom")?window.spwashi.parameters.canzoom=!!+e.get("zoom"):window.spwashi.parameters.canzoom=!0,e.has("superpower")&&(window.spwashi.superpower.name=e.get("superpower")),e.has("intent")&&(window.spwashi.superpower.intent=parseInt(e.get("intent")||1)),e.has("mode")&&(s=e.get("mode"),setTimeout(()=>setDocumentMode(s,!1),500)),e.has("fx")&&(window.spwashi.values.fx=e.get("fx").split(",").map(C=>+C)),e.has("fy")&&(window.spwashi.values.fy=e.get("fy").split(",").map(C=>+C)),e.has("r")&&(window.spwashi.values.r=e.get("r").split(",").map(C=>+C)),e.has("defaultRadius")&&(window.spwashi.parameters.nodes.radiusMultiplier=+e.get("defaultRadius")),e.has("fontSize")&&(window.spwashi.values.text.fontSize=e.get("fontSize").split(",").map(C=>+C)),e.has("doFetch")&&(window.spwashi.doFetchNodes=e.get("dofetch")==="1"),e.has("boundingBox")&&(window.spwashi.parameters.forces.boundingBox=e.get("boundingBox")==="1"),e.has("dataindex")&&(window.spwashi.parameters.dataIndex=+e.get("dataindex"),setDocumentDataIndex(getDataIndexForNumber(window.spwashi.parameters.dataIndex))),e.has("debug")&&(window.spwashi.parameters.debug=!0,document.body.dataset.debug="debug"),initializeDirectMode(),initializeQuerystringMode(),initializeMapFilterMode(),initializeSpwParseField(),initializeReflexMode(),initializeStoryMode(),initializeModeSelection(s),initializeDataindexMode(),initKeystrokes()}const fixX=(e,u)=>e.fy=75*(u+1),fixY=(e,u)=>e.fx=75,moreMenuOptionsSpell="extended menu".trim();async function*loopOverTimeEntries(e){for(let{delay:u,payload:s}of e)await new Promise(f=>setTimeout(f,u)),yield s}async function executeEvents(e){for await(const u of loopOverTimeEntries(e)){if(u.effect&&u.effect(),u.params&&readParameters(new URLSearchParams(u.params)),u.nodes){const s=u.nodes.map(processNode).map(NODE_MANAGER.normalize);window.spwashi.nodes.push(...s)}window.window.spwashi.reinit()}}function setParseField(e){const u=document.querySelector("#spw-parse-field");u.value=e,u.focus();const s=u.value.indexOf("&");u.setSelectionRange(s,s+1)}function deleteAllStories(){for(let e in stories)stories.hasOwnProperty(e)&&delete stories[e]}function getPhrases(){return["< & >","( & )","{ & }","[ & ]"]}function getNames(){return["context","topic","structure","status"]}const phrases=getPhrases(),names=getNames();function initializeStorySequence(e=!1){deleteAllStories();const u=names.shift();if(!u||e){phrases.length=0,names.length=0,phrases.push(...getPhrases()),names.push(...getNames()),initializeStorySequence();return}stories[u]={params:{superpower:"hyperlink"},events:[{delay:300,payload:{params:{mode:"spw"}}},{delay:300,payload:{effect:()=>setParseField(phrases.shift())}},{delay:300,payload:{effect:initializeStorySequence}}]},initializeStoryMode()}const stories={};initializeStorySequence();stories.demo={params:{width:300,height:500,superpower:"hyperlink",velocityDecay:.9,center:"150,250"},runStory:()=>{executeEvents([{delay:50,payload:{nodes:[{r:10,x:30,y:50,text:{fx:75,fontSize:30},name:"hello"}]}},{delay:50,payload:{nodes:[{r:10,x:30,y:100,text:{fx:75,fontSize:30},name:"how"}]}},{delay:50,payload:{nodes:[{r:10,x:30,y:150,text:{fx:75,fontSize:30},name:"are"}]}},{delay:50,payload:{nodes:[{r:10,x:30,y:200,text:{fx:75,fontSize:30},name:"you"}]}},{delay:50,payload:{nodes:[{r:10,x:30,y:250,text:{fx:75,fontSize:30},name:"doing"}]}},{delay:50,payload:{nodes:[{r:10,x:30,y:300,text:{fx:75,fontSize:30},name:"today"}]}},{delay:300,payload:{params:{charge:500}}},{delay:50,payload:{params:{charge:0}}},{delay:50,payload:{effect:()=>window.spwashi.nodes.forEach((f,C)=>(fixY(f),fixX(f,C)))}},{delay:300,payload:{effect:()=>clearActiveNodes()}},{delay:100,payload:{params:{mode:"spw"}}},{delay:300,payload:{effect:()=>setParseField("i am doing & today")}}]).then(console.log)}};stories.options={events:[{delay:300,payload:{params:{mode:"spw"}}},{delay:100,payload:{effect:()=>setParseField(moreMenuOptionsSpell)}},{delay:1e3,payload:{effect:()=>{window.spwashi.keystrokeRevealOrder=1}}}]};function initializeStoryMode(){const e=document.querySelector("#story-mode-container");e.innerHTML="";const u=document.createElement("div");u.classList.add("button-container"),e.appendChild(u),Object.entries(stories).forEach(([s,f])=>{const C=document.createElement("button");C.innerText=s,C.onclick=()=>{readParameters(new URLSearchParams(f.params)),f.runStory&&f.runStory(),f.events&&executeEvents(f.events)},u.appendChild(C)})}function setDocumentDataIndex(e){document.body.dataset.dataindex=e,window.spwashi.onDataIndexChange(e)}function getDocumentDataIndex(){return parseInt((document.body.dataset.dataindex||"0").split("-").reverse()[0])}function initializeDataindexMode(){const e=document.querySelector("#colors");e.onclick=function(u){const f=u.target.dataset.dataindex;setDocumentDataIndex(f),setDocumentMode(null)}}const dataindexPrefix="spwashi-datum-";function getDataIndexForNumber(e){return dataindexPrefix+e%13}function onColorModeStart(){initializeStorySequence(!0),document.querySelector(`#colors button[data-dataindex=${getDataIndexForNumber(getDocumentDataIndex())}]`).focus();const e=document.querySelectorAll("#colors button"),u={},s={};e.forEach(b=>{const $=b.getBoundingClientRect(),w=Math.round($.x),h=Math.round($.y);u[w]||(u[w]=[]),s[h]||(s[h]=[]),u[w].push(b),s[h].push(b)});const f=Object.keys(u).sort((b,$)=>b-$).map((b,$)=>{const w=u[b];return w.forEach(h=>h.dataset.x=$),w}),C=Object.keys(s).sort((b,$)=>b-$).map((b,$)=>{const w=s[b];return w.forEach(h=>h.dataset.y=$),w});window.spwashi.callbacks.arrowUp=()=>{const b=parseInt(document.activeElement.dataset.x),$=f[b],w=$.indexOf(document.activeElement),h=w?w-1:$.length-1;$[h].focus()},window.spwashi.callbacks.arrowDown=()=>{const b=parseInt(document.activeElement.dataset.x),$=f[b],w=$.indexOf(document.activeElement),h=w===$.length-1?0:w+1;$[h].focus()},window.spwashi.callbacks.arrowRight=()=>{const b=parseInt(document.activeElement.dataset.y),$=C[b],w=$.indexOf(document.activeElement),h=w===$.length-1?0:w+1;$[h].focus()},window.spwashi.callbacks.arrowLeft=()=>{const b=parseInt(document.activeElement.dataset.y),$=C[b],w=$.indexOf(document.activeElement),h=w?w-1:$.length-1;$[h].focus()}}function getLastKind(e){var u;return(u=e.kind)==null?void 0:u.trim().split(" + ").reverse()[0]}function getFirstKind(e){var u;return(u=e.kind)==null?void 0:u.split(" + ")[0]}function isOperator(e){return e.kind.split(" + ").includes("operator")}function getIdentityPath(e,u,s=void 0){return u.set("title",s),`/identity/${e}?${u.toString()}`}function processNode(e,u){var F,N,O,H,R,I;if(e.getUrl=()=>{const L=getNextUrlSearchParams();L.set("superpower","hyperlink");const S=e.md5,E=getIdentityPath(S,L,e.identity);return e.url=E,E},e.processed||(e.processed=Date.now(),!e.identity))return e;const s=e.head,f=e.body,C=e.tail;delete e.head,delete e.body,delete e.tail,e.parts={head:s,body:f,tail:C};const b=((F=window.spwashi.values.fx)==null?void 0:F[u])||e.fx||void 0,$=((N=window.spwashi.values.fy)==null?void 0:N[u])||e.fy||void 0,w=((O=window.spwashi.values.r)==null?void 0:O[u])||e.r||window.spwashi.parameters.nodes.radiusMultiplier||void 0,h=((R=(H=window.spwashi.values.text)==null?void 0:H.fontSize)==null?void 0:R[u])||((I=e.text)==null?void 0:I.fontSize)||void 0;e.colorindex=getDocumentDataIndex(),e.fx=b,e.fy=$,e.r=w,e.cr=w*2,e.text=e.text||{},e.text.fontSize=h,e.image=e.image||{},e.image.r=100,e.image.offsetX=0,e.image.offsetY=0,e.md5=e.identity&&md5(e.identity);const d=getNextUrlSearchParams();e.url=getIdentityPath(e.md5,d,e.identity);const i=50,r=window.spwashi.parameters.width-50,n=window.spwashi.parameters.height-50,t=[50,50+n/4,50+n/2,50+3*n/4,n],o="conceptual.close",l="conceptual.open",p="essential.close",v="essential.open",k="structural.open",D="structural.close",_="locational.open",M="locational.close";return[[L=>getFirstKind(L)==="container",{text:{fontSize:10},fx:window.spwashi.parameters.width/2,y:0}],[L=>getLastKind(L)==="nominal",{fx:void 0,r:30}],[L=>getLastKind(L)==="phrasal",{fx:void 0}],[L=>getLastKind(L)==="binding",{fx:100,r:5}],[L=>getLastKind(L)==="ordinal",{r:5}],[L=>getLastKind(L)===o&&isOperator(L),{r:10,fx:r,fy:t[0]}],[L=>getLastKind(L)===p&&isOperator(L),{r:10,fx:r,fy:t[1]}],[L=>getLastKind(L)===D&&isOperator(L),{r:10,fx:r,fy:t[2]}],[L=>getLastKind(L)===M&&isOperator(L),{r:10,fx:r,fy:t[3]}],[L=>getLastKind(L)===l&&isOperator(L),{r:10,fx:i,fy:t[0]}],[L=>getLastKind(L)===v&&isOperator(L),{r:10,fx:i,fy:t[1]}],[L=>getLastKind(L)===k&&isOperator(L),{r:10,fx:i,fy:t[2]}],[L=>getLastKind(L)===_&&isOperator(L),{r:10,fx:i,fy:t[3]}]].forEach(([L,S])=>{L(e)&&Object.entries(S).forEach(([E,T])=>{e[E]=T})}),e}const colors=["var(--node-color-0)","var(--node-color-1)","var(--node-color-2)","var(--node-color-3)","var(--node-color-4)","var(--node-color-5)","var(--node-color-6)","var(--node-color-7)","var(--node-color-8)","var(--node-color-9)","var(--node-color-10)","var(--node-color-11)","var(--node-color-12)"],getNodeColor=e=>colors[(e.colorindex||0)%colors.length],getNodeText=e=>e.name,getNodeStrokeColor=e=>colors[((e.colorindex||0)+5)%colors.length];function extent(e,u){let s,f;if(u===void 0)for(const C of e)C!=null&&(s===void 0?C>=C&&(s=f=C):(s>C&&(s=C),f<C&&(f=C)));else{let C=-1;for(let b of e)(b=u(b,++C,e))!=null&&(s===void 0?b>=b&&(s=f=b):(s>b&&(s=b),f<b&&(f=b)))}return[s,f]}var noop={value:()=>{}};function dispatch(){for(var e=0,u=arguments.length,s={},f;e<u;++e){if(!(f=arguments[e]+"")||f in s||/[\s.]/.test(f))throw new Error("illegal type: "+f);s[f]=[]}return new Dispatch(s)}function Dispatch(e){this._=e}function parseTypenames$1(e,u){return e.trim().split(/^|\s+/).map(function(s){var f="",C=s.indexOf(".");if(C>=0&&(f=s.slice(C+1),s=s.slice(0,C)),s&&!u.hasOwnProperty(s))throw new Error("unknown type: "+s);return{type:s,name:f}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(e,u){var s=this._,f=parseTypenames$1(e+"",s),C,b=-1,$=f.length;if(arguments.length<2){for(;++b<$;)if((C=(e=f[b]).type)&&(C=get$1(s[C],e.name)))return C;return}if(u!=null&&typeof u!="function")throw new Error("invalid callback: "+u);for(;++b<$;)if(C=(e=f[b]).type)s[C]=set$1(s[C],e.name,u);else if(u==null)for(C in s)s[C]=set$1(s[C],e.name,null);return this},copy:function(){var e={},u=this._;for(var s in u)e[s]=u[s].slice();return new Dispatch(e)},call:function(e,u){if((C=arguments.length-2)>0)for(var s=new Array(C),f=0,C,b;f<C;++f)s[f]=arguments[f+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(b=this._[e],f=0,C=b.length;f<C;++f)b[f].value.apply(u,s)},apply:function(e,u,s){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var f=this._[e],C=0,b=f.length;C<b;++C)f[C].value.apply(u,s)}};function get$1(e,u){for(var s=0,f=e.length,C;s<f;++s)if((C=e[s]).name===u)return C.value}function set$1(e,u,s){for(var f=0,C=e.length;f<C;++f)if(e[f].name===u){e[f]=noop,e=e.slice(0,f).concat(e.slice(f+1));break}return s!=null&&e.push({name:u,value:s}),e}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(e){var u=e+="",s=u.indexOf(":");return s>=0&&(u=e.slice(0,s))!=="xmlns"&&(e=e.slice(s+1)),namespaces.hasOwnProperty(u)?{space:namespaces[u],local:e}:e}function creatorInherit(e){return function(){var u=this.ownerDocument,s=this.namespaceURI;return s===xhtml&&u.documentElement.namespaceURI===xhtml?u.createElement(e):u.createElementNS(s,e)}}function creatorFixed(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function creator(e){var u=namespace(e);return(u.local?creatorFixed:creatorInherit)(u)}function none(){}function selector(e){return e==null?none:function(){return this.querySelector(e)}}function selection_select(e){typeof e!="function"&&(e=selector(e));for(var u=this._groups,s=u.length,f=new Array(s),C=0;C<s;++C)for(var b=u[C],$=b.length,w=f[C]=new Array($),h,d,i=0;i<$;++i)(h=b[i])&&(d=e.call(h,h.__data__,i,b))&&("__data__"in h&&(d.__data__=h.__data__),w[i]=d);return new Selection$1(f,this._parents)}function array(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function empty(){return[]}function selectorAll(e){return e==null?empty:function(){return this.querySelectorAll(e)}}function arrayAll(e){return function(){return array(e.apply(this,arguments))}}function selection_selectAll(e){typeof e=="function"?e=arrayAll(e):e=selectorAll(e);for(var u=this._groups,s=u.length,f=[],C=[],b=0;b<s;++b)for(var $=u[b],w=$.length,h,d=0;d<w;++d)(h=$[d])&&(f.push(e.call(h,h.__data__,d,$)),C.push(h));return new Selection$1(f,C)}function matcher(e){return function(){return this.matches(e)}}function childMatcher(e){return function(u){return u.matches(e)}}var find$1=Array.prototype.find;function childFind(e){return function(){return find$1.call(this.children,e)}}function childFirst(){return this.firstElementChild}function selection_selectChild(e){return this.select(e==null?childFirst:childFind(typeof e=="function"?e:childMatcher(e)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(e){return function(){return filter.call(this.children,e)}}function selection_selectChildren(e){return this.selectAll(e==null?children:childrenFilter(typeof e=="function"?e:childMatcher(e)))}function selection_filter(e){typeof e!="function"&&(e=matcher(e));for(var u=this._groups,s=u.length,f=new Array(s),C=0;C<s;++C)for(var b=u[C],$=b.length,w=f[C]=[],h,d=0;d<$;++d)(h=b[d])&&e.call(h,h.__data__,d,b)&&w.push(h);return new Selection$1(f,this._parents)}function sparse(e){return new Array(e.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(e,u){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=u}EnterNode.prototype={constructor:EnterNode,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,u){return this._parent.insertBefore(e,u)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function constant$4(e){return function(){return e}}function bindIndex(e,u,s,f,C,b){for(var $=0,w,h=u.length,d=b.length;$<d;++$)(w=u[$])?(w.__data__=b[$],f[$]=w):s[$]=new EnterNode(e,b[$]);for(;$<h;++$)(w=u[$])&&(C[$]=w)}function bindKey(e,u,s,f,C,b,$){var w,h,d=new Map,i=u.length,r=b.length,n=new Array(i),t;for(w=0;w<i;++w)(h=u[w])&&(n[w]=t=$.call(h,h.__data__,w,u)+"",d.has(t)?C[w]=h:d.set(t,h));for(w=0;w<r;++w)t=$.call(e,b[w],w,b)+"",(h=d.get(t))?(f[w]=h,h.__data__=b[w],d.delete(t)):s[w]=new EnterNode(e,b[w]);for(w=0;w<i;++w)(h=u[w])&&d.get(n[w])===h&&(C[w]=h)}function datum(e){return e.__data__}function selection_data(e,u){if(!arguments.length)return Array.from(this,datum);var s=u?bindKey:bindIndex,f=this._parents,C=this._groups;typeof e!="function"&&(e=constant$4(e));for(var b=C.length,$=new Array(b),w=new Array(b),h=new Array(b),d=0;d<b;++d){var i=f[d],r=C[d],n=r.length,t=arraylike(e.call(i,i&&i.__data__,d,f)),o=t.length,l=w[d]=new Array(o),p=$[d]=new Array(o),v=h[d]=new Array(n);s(i,r,l,p,v,t,u);for(var k=0,D=0,_,M;k<o;++k)if(_=l[k]){for(k>=D&&(D=k+1);!(M=p[D])&&++D<o;);_._next=M||null}}return $=new Selection$1($,f),$._enter=w,$._exit=h,$}function arraylike(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(e,u,s){var f=this.enter(),C=this,b=this.exit();return typeof e=="function"?(f=e(f),f&&(f=f.selection())):f=f.append(e+""),u!=null&&(C=u(C),C&&(C=C.selection())),s==null?b.remove():s(b),f&&C?f.merge(C).order():C}function selection_merge(e){for(var u=e.selection?e.selection():e,s=this._groups,f=u._groups,C=s.length,b=f.length,$=Math.min(C,b),w=new Array(C),h=0;h<$;++h)for(var d=s[h],i=f[h],r=d.length,n=w[h]=new Array(r),t,o=0;o<r;++o)(t=d[o]||i[o])&&(n[o]=t);for(;h<C;++h)w[h]=s[h];return new Selection$1(w,this._parents)}function selection_order(){for(var e=this._groups,u=-1,s=e.length;++u<s;)for(var f=e[u],C=f.length-1,b=f[C],$;--C>=0;)($=f[C])&&(b&&$.compareDocumentPosition(b)^4&&b.parentNode.insertBefore($,b),b=$);return this}function selection_sort(e){e||(e=ascending);function u(r,n){return r&&n?e(r.__data__,n.__data__):!r-!n}for(var s=this._groups,f=s.length,C=new Array(f),b=0;b<f;++b){for(var $=s[b],w=$.length,h=C[b]=new Array(w),d,i=0;i<w;++i)(d=$[i])&&(h[i]=d);h.sort(u)}return new Selection$1(C,this._parents).order()}function ascending(e,u){return e<u?-1:e>u?1:e>=u?0:NaN}function selection_call(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var e=this._groups,u=0,s=e.length;u<s;++u)for(var f=e[u],C=0,b=f.length;C<b;++C){var $=f[C];if($)return $}return null}function selection_size(){let e=0;for(const u of this)++e;return e}function selection_empty(){return!this.node()}function selection_each(e){for(var u=this._groups,s=0,f=u.length;s<f;++s)for(var C=u[s],b=0,$=C.length,w;b<$;++b)(w=C[b])&&e.call(w,w.__data__,b,C);return this}function attrRemove$1(e){return function(){this.removeAttribute(e)}}function attrRemoveNS$1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function attrConstant$1(e,u){return function(){this.setAttribute(e,u)}}function attrConstantNS$1(e,u){return function(){this.setAttributeNS(e.space,e.local,u)}}function attrFunction$1(e,u){return function(){var s=u.apply(this,arguments);s==null?this.removeAttribute(e):this.setAttribute(e,s)}}function attrFunctionNS$1(e,u){return function(){var s=u.apply(this,arguments);s==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,s)}}function selection_attr(e,u){var s=namespace(e);if(arguments.length<2){var f=this.node();return s.local?f.getAttributeNS(s.space,s.local):f.getAttribute(s)}return this.each((u==null?s.local?attrRemoveNS$1:attrRemove$1:typeof u=="function"?s.local?attrFunctionNS$1:attrFunction$1:s.local?attrConstantNS$1:attrConstant$1)(s,u))}function defaultView(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function styleRemove$1(e){return function(){this.style.removeProperty(e)}}function styleConstant$1(e,u,s){return function(){this.style.setProperty(e,u,s)}}function styleFunction$1(e,u,s){return function(){var f=u.apply(this,arguments);f==null?this.style.removeProperty(e):this.style.setProperty(e,f,s)}}function selection_style(e,u,s){return arguments.length>1?this.each((u==null?styleRemove$1:typeof u=="function"?styleFunction$1:styleConstant$1)(e,u,s??"")):styleValue(this.node(),e)}function styleValue(e,u){return e.style.getPropertyValue(u)||defaultView(e).getComputedStyle(e,null).getPropertyValue(u)}function propertyRemove(e){return function(){delete this[e]}}function propertyConstant(e,u){return function(){this[e]=u}}function propertyFunction(e,u){return function(){var s=u.apply(this,arguments);s==null?delete this[e]:this[e]=s}}function selection_property(e,u){return arguments.length>1?this.each((u==null?propertyRemove:typeof u=="function"?propertyFunction:propertyConstant)(e,u)):this.node()[e]}function classArray(e){return e.trim().split(/^|\s+/)}function classList(e){return e.classList||new ClassList(e)}function ClassList(e){this._node=e,this._names=classArray(e.getAttribute("class")||"")}ClassList.prototype={add:function(e){var u=this._names.indexOf(e);u<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var u=this._names.indexOf(e);u>=0&&(this._names.splice(u,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function classedAdd(e,u){for(var s=classList(e),f=-1,C=u.length;++f<C;)s.add(u[f])}function classedRemove(e,u){for(var s=classList(e),f=-1,C=u.length;++f<C;)s.remove(u[f])}function classedTrue(e){return function(){classedAdd(this,e)}}function classedFalse(e){return function(){classedRemove(this,e)}}function classedFunction(e,u){return function(){(u.apply(this,arguments)?classedAdd:classedRemove)(this,e)}}function selection_classed(e,u){var s=classArray(e+"");if(arguments.length<2){for(var f=classList(this.node()),C=-1,b=s.length;++C<b;)if(!f.contains(s[C]))return!1;return!0}return this.each((typeof u=="function"?classedFunction:u?classedTrue:classedFalse)(s,u))}function textRemove(){this.textContent=""}function textConstant$1(e){return function(){this.textContent=e}}function textFunction$1(e){return function(){var u=e.apply(this,arguments);this.textContent=u??""}}function selection_text(e){return arguments.length?this.each(e==null?textRemove:(typeof e=="function"?textFunction$1:textConstant$1)(e)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(e){return function(){this.innerHTML=e}}function htmlFunction(e){return function(){var u=e.apply(this,arguments);this.innerHTML=u??""}}function selection_html(e){return arguments.length?this.each(e==null?htmlRemove:(typeof e=="function"?htmlFunction:htmlConstant)(e)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(e){var u=typeof e=="function"?e:creator(e);return this.select(function(){return this.appendChild(u.apply(this,arguments))})}function constantNull(){return null}function selection_insert(e,u){var s=typeof e=="function"?e:creator(e),f=u==null?constantNull:typeof u=="function"?u:selector(u);return this.select(function(){return this.insertBefore(s.apply(this,arguments),f.apply(this,arguments)||null)})}function remove(){var e=this.parentNode;e&&e.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var e=this.cloneNode(!1),u=this.parentNode;return u?u.insertBefore(e,this.nextSibling):e}function selection_cloneDeep(){var e=this.cloneNode(!0),u=this.parentNode;return u?u.insertBefore(e,this.nextSibling):e}function selection_clone(e){return this.select(e?selection_cloneDeep:selection_cloneShallow)}function selection_datum(e){return arguments.length?this.property("__data__",e):this.node().__data__}function contextListener(e){return function(u){e.call(this,u,this.__data__)}}function parseTypenames(e){return e.trim().split(/^|\s+/).map(function(u){var s="",f=u.indexOf(".");return f>=0&&(s=u.slice(f+1),u=u.slice(0,f)),{type:u,name:s}})}function onRemove(e){return function(){var u=this.__on;if(u){for(var s=0,f=-1,C=u.length,b;s<C;++s)b=u[s],(!e.type||b.type===e.type)&&b.name===e.name?this.removeEventListener(b.type,b.listener,b.options):u[++f]=b;++f?u.length=f:delete this.__on}}}function onAdd(e,u,s){return function(){var f=this.__on,C,b=contextListener(u);if(f){for(var $=0,w=f.length;$<w;++$)if((C=f[$]).type===e.type&&C.name===e.name){this.removeEventListener(C.type,C.listener,C.options),this.addEventListener(C.type,C.listener=b,C.options=s),C.value=u;return}}this.addEventListener(e.type,b,s),C={type:e.type,name:e.name,value:u,listener:b,options:s},f?f.push(C):this.__on=[C]}}function selection_on(e,u,s){var f=parseTypenames(e+""),C,b=f.length,$;if(arguments.length<2){var w=this.node().__on;if(w){for(var h=0,d=w.length,i;h<d;++h)for(C=0,i=w[h];C<b;++C)if(($=f[C]).type===i.type&&$.name===i.name)return i.value}return}for(w=u?onAdd:onRemove,C=0;C<b;++C)this.each(w(f[C],u,s));return this}function dispatchEvent(e,u,s){var f=defaultView(e),C=f.CustomEvent;typeof C=="function"?C=new C(u,s):(C=f.document.createEvent("Event"),s?(C.initEvent(u,s.bubbles,s.cancelable),C.detail=s.detail):C.initEvent(u,!1,!1)),e.dispatchEvent(C)}function dispatchConstant(e,u){return function(){return dispatchEvent(this,e,u)}}function dispatchFunction(e,u){return function(){return dispatchEvent(this,e,u.apply(this,arguments))}}function selection_dispatch(e,u){return this.each((typeof u=="function"?dispatchFunction:dispatchConstant)(e,u))}function*selection_iterator(){for(var e=this._groups,u=0,s=e.length;u<s;++u)for(var f=e[u],C=0,b=f.length,$;C<b;++C)($=f[C])&&(yield $)}var root=[null];function Selection$1(e,u){this._groups=e,this._parents=u}function selection(){return new Selection$1([[document.documentElement]],root)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(e){return typeof e=="string"?new Selection$1([[document.querySelector(e)]],[document.documentElement]):new Selection$1([[e]],root)}function sourceEvent(e){let u;for(;u=e.sourceEvent;)e=u;return e}function pointer(e,u){if(e=sourceEvent(e),u===void 0&&(u=e.currentTarget),u){var s=u.ownerSVGElement||u;if(s.createSVGPoint){var f=s.createSVGPoint();return f.x=e.clientX,f.y=e.clientY,f=f.matrixTransform(u.getScreenCTM().inverse()),[f.x,f.y]}if(u.getBoundingClientRect){var C=u.getBoundingClientRect();return[e.clientX-C.left-u.clientLeft,e.clientY-C.top-u.clientTop]}}return[e.pageX,e.pageY]}const nonpassive={passive:!1},nonpassivecapture={capture:!0,passive:!1};function nopropagation$1(e){e.stopImmediatePropagation()}function noevent$1(e){e.preventDefault(),e.stopImmediatePropagation()}function dragDisable(e){var u=e.document.documentElement,s=select(e).on("dragstart.drag",noevent$1,nonpassivecapture);"onselectstart"in u?s.on("selectstart.drag",noevent$1,nonpassivecapture):(u.__noselect=u.style.MozUserSelect,u.style.MozUserSelect="none")}function yesdrag(e,u){var s=e.document.documentElement,f=select(e).on("dragstart.drag",null);u&&(f.on("click.drag",noevent$1,nonpassivecapture),setTimeout(function(){f.on("click.drag",null)},0)),"onselectstart"in s?f.on("selectstart.drag",null):(s.style.MozUserSelect=s.__noselect,delete s.__noselect)}const constant$3=e=>()=>e;function DragEvent(e,{sourceEvent:u,subject:s,target:f,identifier:C,active:b,x:$,y:w,dx:h,dy:d,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:u,enumerable:!0,configurable:!0},subject:{value:s,enumerable:!0,configurable:!0},target:{value:f,enumerable:!0,configurable:!0},identifier:{value:C,enumerable:!0,configurable:!0},active:{value:b,enumerable:!0,configurable:!0},x:{value:$,enumerable:!0,configurable:!0},y:{value:w,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:i}})}DragEvent.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function defaultFilter$1(e){return!e.ctrlKey&&!e.button}function defaultContainer(){return this.parentNode}function defaultSubject(e,u){return u??{x:e.x,y:e.y}}function defaultTouchable$1(){return navigator.maxTouchPoints||"ontouchstart"in this}function drag(){var e=defaultFilter$1,u=defaultContainer,s=defaultSubject,f=defaultTouchable$1,C={},b=dispatch("start","drag","end"),$=0,w,h,d,i,r=0;function n(_){_.on("mousedown.drag",t).filter(f).on("touchstart.drag",p).on("touchmove.drag",v,nonpassive).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function t(_,M){if(!(i||!e.call(this,_,M))){var A=D(this,u.call(this,_,M),_,M,"mouse");A&&(select(_.view).on("mousemove.drag",o,nonpassivecapture).on("mouseup.drag",l,nonpassivecapture),dragDisable(_.view),nopropagation$1(_),d=!1,w=_.clientX,h=_.clientY,A("start",_))}}function o(_){if(noevent$1(_),!d){var M=_.clientX-w,A=_.clientY-h;d=M*M+A*A>r}C.mouse("drag",_)}function l(_){select(_.view).on("mousemove.drag mouseup.drag",null),yesdrag(_.view,d),noevent$1(_),C.mouse("end",_)}function p(_,M){if(e.call(this,_,M)){var A=_.changedTouches,F=u.call(this,_,M),N=A.length,O,H;for(O=0;O<N;++O)(H=D(this,F,_,M,A[O].identifier,A[O]))&&(nopropagation$1(_),H("start",_,A[O]))}}function v(_){var M=_.changedTouches,A=M.length,F,N;for(F=0;F<A;++F)(N=C[M[F].identifier])&&(noevent$1(_),N("drag",_,M[F]))}function k(_){var M=_.changedTouches,A=M.length,F,N;for(i&&clearTimeout(i),i=setTimeout(function(){i=null},500),F=0;F<A;++F)(N=C[M[F].identifier])&&(nopropagation$1(_),N("end",_,M[F]))}function D(_,M,A,F,N,O){var H=b.copy(),R=pointer(O||A,M),I,L,S;if((S=s.call(_,new DragEvent("beforestart",{sourceEvent:A,target:n,identifier:N,active:$,x:R[0],y:R[1],dx:0,dy:0,dispatch:H}),F))!=null)return I=S.x-R[0]||0,L=S.y-R[1]||0,function E(T,B,P){var W=R,z;switch(T){case"start":C[N]=E,z=$++;break;case"end":delete C[N],--$;case"drag":R=pointer(P||B,M),z=$;break}H.call(T,_,new DragEvent(T,{sourceEvent:B,subject:S,target:n,identifier:N,active:z,x:R[0]+I,y:R[1]+L,dx:R[0]-W[0],dy:R[1]-W[1],dispatch:H}),F)}}return n.filter=function(_){return arguments.length?(e=typeof _=="function"?_:constant$3(!!_),n):e},n.container=function(_){return arguments.length?(u=typeof _=="function"?_:constant$3(_),n):u},n.subject=function(_){return arguments.length?(s=typeof _=="function"?_:constant$3(_),n):s},n.touchable=function(_){return arguments.length?(f=typeof _=="function"?_:constant$3(!!_),n):f},n.on=function(){var _=b.on.apply(b,arguments);return _===b?n:_},n.clickDistance=function(_){return arguments.length?(r=(_=+_)*_,n):Math.sqrt(r)},n}function define(e,u,s){e.prototype=u.prototype=s,s.constructor=e}function extend(e,u){var s=Object.create(e.prototype);for(var f in u)s[f]=u[f];return s}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(e){var u,s;return e=(e+"").trim().toLowerCase(),(u=reHex.exec(e))?(s=u[1].length,u=parseInt(u[1],16),s===6?rgbn(u):s===3?new Rgb(u>>8&15|u>>4&240,u>>4&15|u&240,(u&15)<<4|u&15,1):s===8?rgba(u>>24&255,u>>16&255,u>>8&255,(u&255)/255):s===4?rgba(u>>12&15|u>>8&240,u>>8&15|u>>4&240,u>>4&15|u&240,((u&15)<<4|u&15)/255):null):(u=reRgbInteger.exec(e))?new Rgb(u[1],u[2],u[3],1):(u=reRgbPercent.exec(e))?new Rgb(u[1]*255/100,u[2]*255/100,u[3]*255/100,1):(u=reRgbaInteger.exec(e))?rgba(u[1],u[2],u[3],u[4]):(u=reRgbaPercent.exec(e))?rgba(u[1]*255/100,u[2]*255/100,u[3]*255/100,u[4]):(u=reHslPercent.exec(e))?hsla(u[1],u[2]/100,u[3]/100,1):(u=reHslaPercent.exec(e))?hsla(u[1],u[2]/100,u[3]/100,u[4]):named.hasOwnProperty(e)?rgbn(named[e]):e==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(e){return new Rgb(e>>16&255,e>>8&255,e&255,1)}function rgba(e,u,s,f){return f<=0&&(e=u=s=NaN),new Rgb(e,u,s,f)}function rgbConvert(e){return e instanceof Color||(e=color(e)),e?(e=e.rgb(),new Rgb(e.r,e.g,e.b,e.opacity)):new Rgb}function rgb(e,u,s,f){return arguments.length===1?rgbConvert(e):new Rgb(e,u,s,f??1)}function Rgb(e,u,s,f){this.r=+e,this.g=+u,this.b=+s,this.opacity=+f}define(Rgb,rgb,extend(Color,{brighter(e){return e=e==null?brighter:Math.pow(brighter,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?darker:Math.pow(darker,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const e=clampa(this.opacity);return`${e===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${e===1?")":`, ${e})`}`}function clampa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function clampi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hex(e){return e=clampi(e),(e<16?"0":"")+e.toString(16)}function hsla(e,u,s,f){return f<=0?e=u=s=NaN:s<=0||s>=1?e=u=NaN:u<=0&&(e=NaN),new Hsl(e,u,s,f)}function hslConvert(e){if(e instanceof Hsl)return new Hsl(e.h,e.s,e.l,e.opacity);if(e instanceof Color||(e=color(e)),!e)return new Hsl;if(e instanceof Hsl)return e;e=e.rgb();var u=e.r/255,s=e.g/255,f=e.b/255,C=Math.min(u,s,f),b=Math.max(u,s,f),$=NaN,w=b-C,h=(b+C)/2;return w?(u===b?$=(s-f)/w+(s<f)*6:s===b?$=(f-u)/w+2:$=(u-s)/w+4,w/=h<.5?b+C:2-b-C,$*=60):w=h>0&&h<1?0:$,new Hsl($,w,h,e.opacity)}function hsl(e,u,s,f){return arguments.length===1?hslConvert(e):new Hsl(e,u,s,f??1)}function Hsl(e,u,s,f){this.h=+e,this.s=+u,this.l=+s,this.opacity=+f}define(Hsl,hsl,extend(Color,{brighter(e){return e=e==null?brighter:Math.pow(brighter,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?darker:Math.pow(darker,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,u=isNaN(e)||isNaN(this.s)?0:this.s,s=this.l,f=s+(s<.5?s:1-s)*u,C=2*s-f;return new Rgb(hsl2rgb(e>=240?e-240:e+120,C,f),hsl2rgb(e,C,f),hsl2rgb(e<120?e+240:e-120,C,f),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=clampa(this.opacity);return`${e===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function clamph(e){return e=(e||0)%360,e<0?e+360:e}function clampt(e){return Math.max(0,Math.min(1,e||0))}function hsl2rgb(e,u,s){return(e<60?u+(s-u)*e/60:e<180?s:e<240?u+(s-u)*(240-e)/60:u)*255}const constant$2=e=>()=>e;function linear(e,u){return function(s){return e+s*u}}function exponential(e,u,s){return e=Math.pow(e,s),u=Math.pow(u,s)-e,s=1/s,function(f){return Math.pow(e+f*u,s)}}function gamma(e){return(e=+e)==1?nogamma:function(u,s){return s-u?exponential(u,s,e):constant$2(isNaN(u)?s:u)}}function nogamma(e,u){var s=u-e;return s?linear(e,s):constant$2(isNaN(e)?u:e)}const interpolateRgb=function e(u){var s=gamma(u);function f(C,b){var $=s((C=rgb(C)).r,(b=rgb(b)).r),w=s(C.g,b.g),h=s(C.b,b.b),d=nogamma(C.opacity,b.opacity);return function(i){return C.r=$(i),C.g=w(i),C.b=h(i),C.opacity=d(i),C+""}}return f.gamma=e,f}(1);function interpolateNumber(e,u){return e=+e,u=+u,function(s){return e*(1-s)+u*s}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(e){return function(){return e}}function one(e){return function(u){return e(u)+""}}function interpolateString(e,u){var s=reA.lastIndex=reB.lastIndex=0,f,C,b,$=-1,w=[],h=[];for(e=e+"",u=u+"";(f=reA.exec(e))&&(C=reB.exec(u));)(b=C.index)>s&&(b=u.slice(s,b),w[$]?w[$]+=b:w[++$]=b),(f=f[0])===(C=C[0])?w[$]?w[$]+=C:w[++$]=C:(w[++$]=null,h.push({i:$,x:interpolateNumber(f,C)})),s=reB.lastIndex;return s<u.length&&(b=u.slice(s),w[$]?w[$]+=b:w[++$]=b),w.length<2?h[0]?one(h[0].x):zero(u):(u=h.length,function(d){for(var i=0,r;i<u;++i)w[(r=h[i]).i]=r.x(d);return w.join("")})}var degrees=180/Math.PI,identity$1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(e,u,s,f,C,b){var $,w,h;return($=Math.sqrt(e*e+u*u))&&(e/=$,u/=$),(h=e*s+u*f)&&(s-=e*h,f-=u*h),(w=Math.sqrt(s*s+f*f))&&(s/=w,f/=w,h/=w),e*f<u*s&&(e=-e,u=-u,h=-h,$=-$),{translateX:C,translateY:b,rotate:Math.atan2(u,e)*degrees,skewX:Math.atan(h)*degrees,scaleX:$,scaleY:w}}var svgNode;function parseCss(e){const u=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return u.isIdentity?identity$1:decompose(u.a,u.b,u.c,u.d,u.e,u.f)}function parseSvg(e){return e==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",e),!(e=svgNode.transform.baseVal.consolidate()))?identity$1:(e=e.matrix,decompose(e.a,e.b,e.c,e.d,e.e,e.f))}function interpolateTransform(e,u,s,f){function C(d){return d.length?d.pop()+" ":""}function b(d,i,r,n,t,o){if(d!==r||i!==n){var l=t.push("translate(",null,u,null,s);o.push({i:l-4,x:interpolateNumber(d,r)},{i:l-2,x:interpolateNumber(i,n)})}else(r||n)&&t.push("translate("+r+u+n+s)}function $(d,i,r,n){d!==i?(d-i>180?i+=360:i-d>180&&(d+=360),n.push({i:r.push(C(r)+"rotate(",null,f)-2,x:interpolateNumber(d,i)})):i&&r.push(C(r)+"rotate("+i+f)}function w(d,i,r,n){d!==i?n.push({i:r.push(C(r)+"skewX(",null,f)-2,x:interpolateNumber(d,i)}):i&&r.push(C(r)+"skewX("+i+f)}function h(d,i,r,n,t,o){if(d!==r||i!==n){var l=t.push(C(t)+"scale(",null,",",null,")");o.push({i:l-4,x:interpolateNumber(d,r)},{i:l-2,x:interpolateNumber(i,n)})}else(r!==1||n!==1)&&t.push(C(t)+"scale("+r+","+n+")")}return function(d,i){var r=[],n=[];return d=e(d),i=e(i),b(d.translateX,d.translateY,i.translateX,i.translateY,r,n),$(d.rotate,i.rotate,r,n),w(d.skewX,i.skewX,r,n),h(d.scaleX,d.scaleY,i.scaleX,i.scaleY,r,n),d=i=null,function(t){for(var o=-1,l=n.length,p;++o<l;)r[(p=n[o]).i]=p.x(t);return r.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),epsilon2=1e-12;function cosh(e){return((e=Math.exp(e))+1/e)/2}function sinh(e){return((e=Math.exp(e))-1/e)/2}function tanh(e){return((e=Math.exp(2*e))-1)/(e+1)}const interpolateZoom=function e(u,s,f){function C(b,$){var w=b[0],h=b[1],d=b[2],i=$[0],r=$[1],n=$[2],t=i-w,o=r-h,l=t*t+o*o,p,v;if(l<epsilon2)v=Math.log(n/d)/u,p=function(F){return[w+F*t,h+F*o,d*Math.exp(u*F*v)]};else{var k=Math.sqrt(l),D=(n*n-d*d+f*l)/(2*d*s*k),_=(n*n-d*d-f*l)/(2*n*s*k),M=Math.log(Math.sqrt(D*D+1)-D),A=Math.log(Math.sqrt(_*_+1)-_);v=(A-M)/u,p=function(F){var N=F*v,O=cosh(M),H=d/(s*k)*(O*tanh(u*N+M)-sinh(M));return[w+H*t,h+H*o,d*O/cosh(u*N+M)]}}return p.duration=v*1e3*u/Math.SQRT2,p}return C.rho=function(b){var $=Math.max(.001,+b),w=$*$,h=w*w;return e($,w,h)},C}(Math.SQRT2,2,4);var frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(e,u,s){if(typeof e!="function")throw new TypeError("callback is not a function");s=(s==null?now():+s)+(u==null?0:+u),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=e,this._time=s,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(e,u,s){var f=new Timer;return f.restart(e,u,s),f}function timerFlush(){now(),++frame;for(var e=taskHead,u;e;)(u=clockNow-e._time)>=0&&e._call.call(void 0,u),e=e._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var e=clock.now(),u=e-clockLast;u>pokeDelay&&(clockSkew-=u,clockLast=e)}function nap(){for(var e,u=taskHead,s,f=1/0;u;)u._call?(f>u._time&&(f=u._time),e=u,u=u._next):(s=u._next,u._next=null,u=e?e._next=s:taskHead=s);taskTail=e,sleep(f)}function sleep(e){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var u=e-clockNow;u>24?(e<1/0&&(timeout$1=setTimeout(wake,e-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(e,u,s){var f=new Timer;return u=u==null?0:+u,f.restart(C=>{f.stop(),e(C+u)},u,s),f}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(e,u,s,f,C,b){var $=e.__transition;if(!$)e.__transition={};else if(s in $)return;create(e,s,{name:u,index:f,group:C,on:emptyOn,tween:emptyTween,time:b.time,delay:b.delay,duration:b.duration,ease:b.ease,timer:null,state:CREATED})}function init$1(e,u){var s=get(e,u);if(s.state>CREATED)throw new Error("too late; already scheduled");return s}function set(e,u){var s=get(e,u);if(s.state>STARTED)throw new Error("too late; already running");return s}function get(e,u){var s=e.__transition;if(!s||!(s=s[u]))throw new Error("transition not found");return s}function create(e,u,s){var f=e.__transition,C;f[u]=s,s.timer=timer(b,0,s.time);function b(d){s.state=SCHEDULED,s.timer.restart($,s.delay,s.time),s.delay<=d&&$(d-s.delay)}function $(d){var i,r,n,t;if(s.state!==SCHEDULED)return h();for(i in f)if(t=f[i],t.name===s.name){if(t.state===STARTED)return timeout($);t.state===RUNNING?(t.state=ENDED,t.timer.stop(),t.on.call("interrupt",e,e.__data__,t.index,t.group),delete f[i]):+i<u&&(t.state=ENDED,t.timer.stop(),t.on.call("cancel",e,e.__data__,t.index,t.group),delete f[i])}if(timeout(function(){s.state===STARTED&&(s.state=RUNNING,s.timer.restart(w,s.delay,s.time),w(d))}),s.state=STARTING,s.on.call("start",e,e.__data__,s.index,s.group),s.state===STARTING){for(s.state=STARTED,C=new Array(n=s.tween.length),i=0,r=-1;i<n;++i)(t=s.tween[i].value.call(e,e.__data__,s.index,s.group))&&(C[++r]=t);C.length=r+1}}function w(d){for(var i=d<s.duration?s.ease.call(null,d/s.duration):(s.timer.restart(h),s.state=ENDING,1),r=-1,n=C.length;++r<n;)C[r].call(e,i);s.state===ENDING&&(s.on.call("end",e,e.__data__,s.index,s.group),h())}function h(){s.state=ENDED,s.timer.stop(),delete f[u];for(var d in f)return;delete e.__transition}}function interrupt(e,u){var s=e.__transition,f,C,b=!0,$;if(s){u=u==null?null:u+"";for($ in s){if((f=s[$]).name!==u){b=!1;continue}C=f.state>STARTING&&f.state<ENDING,f.state=ENDED,f.timer.stop(),f.on.call(C?"interrupt":"cancel",e,e.__data__,f.index,f.group),delete s[$]}b&&delete e.__transition}}function selection_interrupt(e){return this.each(function(){interrupt(this,e)})}function tweenRemove(e,u){var s,f;return function(){var C=set(this,e),b=C.tween;if(b!==s){f=s=b;for(var $=0,w=f.length;$<w;++$)if(f[$].name===u){f=f.slice(),f.splice($,1);break}}C.tween=f}}function tweenFunction(e,u,s){var f,C;if(typeof s!="function")throw new Error;return function(){var b=set(this,e),$=b.tween;if($!==f){C=(f=$).slice();for(var w={name:u,value:s},h=0,d=C.length;h<d;++h)if(C[h].name===u){C[h]=w;break}h===d&&C.push(w)}b.tween=C}}function transition_tween(e,u){var s=this._id;if(e+="",arguments.length<2){for(var f=get(this.node(),s).tween,C=0,b=f.length,$;C<b;++C)if(($=f[C]).name===e)return $.value;return null}return this.each((u==null?tweenRemove:tweenFunction)(s,e,u))}function tweenValue(e,u,s){var f=e._id;return e.each(function(){var C=set(this,f);(C.value||(C.value={}))[u]=s.apply(this,arguments)}),function(C){return get(C,f).value[u]}}function interpolate(e,u){var s;return(typeof u=="number"?interpolateNumber:u instanceof color?interpolateRgb:(s=color(u))?(u=s,interpolateRgb):interpolateString)(e,u)}function attrRemove(e){return function(){this.removeAttribute(e)}}function attrRemoveNS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function attrConstant(e,u,s){var f,C=s+"",b;return function(){var $=this.getAttribute(e);return $===C?null:$===f?b:b=u(f=$,s)}}function attrConstantNS(e,u,s){var f,C=s+"",b;return function(){var $=this.getAttributeNS(e.space,e.local);return $===C?null:$===f?b:b=u(f=$,s)}}function attrFunction(e,u,s){var f,C,b;return function(){var $,w=s(this),h;return w==null?void this.removeAttribute(e):($=this.getAttribute(e),h=w+"",$===h?null:$===f&&h===C?b:(C=h,b=u(f=$,w)))}}function attrFunctionNS(e,u,s){var f,C,b;return function(){var $,w=s(this),h;return w==null?void this.removeAttributeNS(e.space,e.local):($=this.getAttributeNS(e.space,e.local),h=w+"",$===h?null:$===f&&h===C?b:(C=h,b=u(f=$,w)))}}function transition_attr(e,u){var s=namespace(e),f=s==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(e,typeof u=="function"?(s.local?attrFunctionNS:attrFunction)(s,f,tweenValue(this,"attr."+e,u)):u==null?(s.local?attrRemoveNS:attrRemove)(s):(s.local?attrConstantNS:attrConstant)(s,f,u))}function attrInterpolate(e,u){return function(s){this.setAttribute(e,u.call(this,s))}}function attrInterpolateNS(e,u){return function(s){this.setAttributeNS(e.space,e.local,u.call(this,s))}}function attrTweenNS(e,u){var s,f;function C(){var b=u.apply(this,arguments);return b!==f&&(s=(f=b)&&attrInterpolateNS(e,b)),s}return C._value=u,C}function attrTween(e,u){var s,f;function C(){var b=u.apply(this,arguments);return b!==f&&(s=(f=b)&&attrInterpolate(e,b)),s}return C._value=u,C}function transition_attrTween(e,u){var s="attr."+e;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(u==null)return this.tween(s,null);if(typeof u!="function")throw new Error;var f=namespace(e);return this.tween(s,(f.local?attrTweenNS:attrTween)(f,u))}function delayFunction(e,u){return function(){init$1(this,e).delay=+u.apply(this,arguments)}}function delayConstant(e,u){return u=+u,function(){init$1(this,e).delay=u}}function transition_delay(e){var u=this._id;return arguments.length?this.each((typeof e=="function"?delayFunction:delayConstant)(u,e)):get(this.node(),u).delay}function durationFunction(e,u){return function(){set(this,e).duration=+u.apply(this,arguments)}}function durationConstant(e,u){return u=+u,function(){set(this,e).duration=u}}function transition_duration(e){var u=this._id;return arguments.length?this.each((typeof e=="function"?durationFunction:durationConstant)(u,e)):get(this.node(),u).duration}function easeConstant(e,u){if(typeof u!="function")throw new Error;return function(){set(this,e).ease=u}}function transition_ease(e){var u=this._id;return arguments.length?this.each(easeConstant(u,e)):get(this.node(),u).ease}function easeVarying(e,u){return function(){var s=u.apply(this,arguments);if(typeof s!="function")throw new Error;set(this,e).ease=s}}function transition_easeVarying(e){if(typeof e!="function")throw new Error;return this.each(easeVarying(this._id,e))}function transition_filter(e){typeof e!="function"&&(e=matcher(e));for(var u=this._groups,s=u.length,f=new Array(s),C=0;C<s;++C)for(var b=u[C],$=b.length,w=f[C]=[],h,d=0;d<$;++d)(h=b[d])&&e.call(h,h.__data__,d,b)&&w.push(h);return new Transition(f,this._parents,this._name,this._id)}function transition_merge(e){if(e._id!==this._id)throw new Error;for(var u=this._groups,s=e._groups,f=u.length,C=s.length,b=Math.min(f,C),$=new Array(f),w=0;w<b;++w)for(var h=u[w],d=s[w],i=h.length,r=$[w]=new Array(i),n,t=0;t<i;++t)(n=h[t]||d[t])&&(r[t]=n);for(;w<f;++w)$[w]=u[w];return new Transition($,this._parents,this._name,this._id)}function start(e){return(e+"").trim().split(/^|\s+/).every(function(u){var s=u.indexOf(".");return s>=0&&(u=u.slice(0,s)),!u||u==="start"})}function onFunction(e,u,s){var f,C,b=start(u)?init$1:set;return function(){var $=b(this,e),w=$.on;w!==f&&(C=(f=w).copy()).on(u,s),$.on=C}}function transition_on(e,u){var s=this._id;return arguments.length<2?get(this.node(),s).on.on(e):this.each(onFunction(s,e,u))}function removeFunction(e){return function(){var u=this.parentNode;for(var s in this.__transition)if(+s!==e)return;u&&u.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(e){var u=this._name,s=this._id;typeof e!="function"&&(e=selector(e));for(var f=this._groups,C=f.length,b=new Array(C),$=0;$<C;++$)for(var w=f[$],h=w.length,d=b[$]=new Array(h),i,r,n=0;n<h;++n)(i=w[n])&&(r=e.call(i,i.__data__,n,w))&&("__data__"in i&&(r.__data__=i.__data__),d[n]=r,schedule(d[n],u,s,n,d,get(i,s)));return new Transition(b,this._parents,u,s)}function transition_selectAll(e){var u=this._name,s=this._id;typeof e!="function"&&(e=selectorAll(e));for(var f=this._groups,C=f.length,b=[],$=[],w=0;w<C;++w)for(var h=f[w],d=h.length,i,r=0;r<d;++r)if(i=h[r]){for(var n=e.call(i,i.__data__,r,h),t,o=get(i,s),l=0,p=n.length;l<p;++l)(t=n[l])&&schedule(t,u,s,l,n,o);b.push(n),$.push(i)}return new Transition(b,$,u,s)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(e,u){var s,f,C;return function(){var b=styleValue(this,e),$=(this.style.removeProperty(e),styleValue(this,e));return b===$?null:b===s&&$===f?C:C=u(s=b,f=$)}}function styleRemove(e){return function(){this.style.removeProperty(e)}}function styleConstant(e,u,s){var f,C=s+"",b;return function(){var $=styleValue(this,e);return $===C?null:$===f?b:b=u(f=$,s)}}function styleFunction(e,u,s){var f,C,b;return function(){var $=styleValue(this,e),w=s(this),h=w+"";return w==null&&(h=w=(this.style.removeProperty(e),styleValue(this,e))),$===h?null:$===f&&h===C?b:(C=h,b=u(f=$,w))}}function styleMaybeRemove(e,u){var s,f,C,b="style."+u,$="end."+b,w;return function(){var h=set(this,e),d=h.on,i=h.value[b]==null?w||(w=styleRemove(u)):void 0;(d!==s||C!==i)&&(f=(s=d).copy()).on($,C=i),h.on=f}}function transition_style(e,u,s){var f=(e+="")=="transform"?interpolateTransformCss:interpolate;return u==null?this.styleTween(e,styleNull(e,f)).on("end.style."+e,styleRemove(e)):typeof u=="function"?this.styleTween(e,styleFunction(e,f,tweenValue(this,"style."+e,u))).each(styleMaybeRemove(this._id,e)):this.styleTween(e,styleConstant(e,f,u),s).on("end.style."+e,null)}function styleInterpolate(e,u,s){return function(f){this.style.setProperty(e,u.call(this,f),s)}}function styleTween(e,u,s){var f,C;function b(){var $=u.apply(this,arguments);return $!==C&&(f=(C=$)&&styleInterpolate(e,$,s)),f}return b._value=u,b}function transition_styleTween(e,u,s){var f="style."+(e+="");if(arguments.length<2)return(f=this.tween(f))&&f._value;if(u==null)return this.tween(f,null);if(typeof u!="function")throw new Error;return this.tween(f,styleTween(e,u,s??""))}function textConstant(e){return function(){this.textContent=e}}function textFunction(e){return function(){var u=e(this);this.textContent=u??""}}function transition_text(e){return this.tween("text",typeof e=="function"?textFunction(tweenValue(this,"text",e)):textConstant(e==null?"":e+""))}function textInterpolate(e){return function(u){this.textContent=e.call(this,u)}}function textTween(e){var u,s;function f(){var C=e.apply(this,arguments);return C!==s&&(u=(s=C)&&textInterpolate(C)),u}return f._value=e,f}function transition_textTween(e){var u="text";if(arguments.length<1)return(u=this.tween(u))&&u._value;if(e==null)return this.tween(u,null);if(typeof e!="function")throw new Error;return this.tween(u,textTween(e))}function transition_transition(){for(var e=this._name,u=this._id,s=newId(),f=this._groups,C=f.length,b=0;b<C;++b)for(var $=f[b],w=$.length,h,d=0;d<w;++d)if(h=$[d]){var i=get(h,u);schedule(h,e,s,d,$,{time:i.time+i.delay+i.duration,delay:0,duration:i.duration,ease:i.ease})}return new Transition(f,this._parents,e,s)}function transition_end(){var e,u,s=this,f=s._id,C=s.size();return new Promise(function(b,$){var w={value:$},h={value:function(){--C===0&&b()}};s.each(function(){var d=set(this,f),i=d.on;i!==e&&(u=(e=i).copy(),u._.cancel.push(w),u._.interrupt.push(w),u._.end.push(h)),d.on=u}),C===0&&b()})}var id=0;function Transition(e,u,s,f){this._groups=e,this._parents=u,this._name=s,this._id=f}function newId(){return++id}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(e,u){for(var s;!(s=e.__transition)||!(s=s[u]);)if(!(e=e.parentNode))throw new Error(`transition ${u} not found`);return s}function selection_transition(e){var u,s;e instanceof Transition?(u=e._id,e=e._name):(u=newId(),(s=defaultTiming).time=now(),e=e==null?null:e+"");for(var f=this._groups,C=f.length,b=0;b<C;++b)for(var $=f[b],w=$.length,h,d=0;d<w;++d)(h=$[d])&&schedule(h,e,u,d,$,s||inherit(h,u));return new Transition(f,this._parents,e,u)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;function forceCenter(e,u){var s,f=1;e==null&&(e=0),u==null&&(u=0);function C(){var b,$=s.length,w,h=0,d=0;for(b=0;b<$;++b)w=s[b],h+=w.x,d+=w.y;for(h=(h/$-e)*f,d=(d/$-u)*f,b=0;b<$;++b)w=s[b],w.x-=h,w.y-=d}return C.initialize=function(b){s=b},C.x=function(b){return arguments.length?(e=+b,C):e},C.y=function(b){return arguments.length?(u=+b,C):u},C.strength=function(b){return arguments.length?(f=+b,C):f},C}function tree_add(e){const u=+this._x.call(null,e),s=+this._y.call(null,e);return add(this.cover(u,s),u,s,e)}function add(e,u,s,f){if(isNaN(u)||isNaN(s))return e;var C,b=e._root,$={data:f},w=e._x0,h=e._y0,d=e._x1,i=e._y1,r,n,t,o,l,p,v,k;if(!b)return e._root=$,e;for(;b.length;)if((l=u>=(r=(w+d)/2))?w=r:d=r,(p=s>=(n=(h+i)/2))?h=n:i=n,C=b,!(b=b[v=p<<1|l]))return C[v]=$,e;if(t=+e._x.call(null,b.data),o=+e._y.call(null,b.data),u===t&&s===o)return $.next=b,C?C[v]=$:e._root=$,e;do C=C?C[v]=new Array(4):e._root=new Array(4),(l=u>=(r=(w+d)/2))?w=r:d=r,(p=s>=(n=(h+i)/2))?h=n:i=n;while((v=p<<1|l)===(k=(o>=n)<<1|t>=r));return C[k]=b,C[v]=$,e}function addAll(e){var u,s,f=e.length,C,b,$=new Array(f),w=new Array(f),h=1/0,d=1/0,i=-1/0,r=-1/0;for(s=0;s<f;++s)isNaN(C=+this._x.call(null,u=e[s]))||isNaN(b=+this._y.call(null,u))||($[s]=C,w[s]=b,C<h&&(h=C),C>i&&(i=C),b<d&&(d=b),b>r&&(r=b));if(h>i||d>r)return this;for(this.cover(h,d).cover(i,r),s=0;s<f;++s)add(this,$[s],w[s],e[s]);return this}function tree_cover(e,u){if(isNaN(e=+e)||isNaN(u=+u))return this;var s=this._x0,f=this._y0,C=this._x1,b=this._y1;if(isNaN(s))C=(s=Math.floor(e))+1,b=(f=Math.floor(u))+1;else{for(var $=C-s||1,w=this._root,h,d;s>e||e>=C||f>u||u>=b;)switch(d=(u<f)<<1|e<s,h=new Array(4),h[d]=w,w=h,$*=2,d){case 0:C=s+$,b=f+$;break;case 1:s=C-$,b=f+$;break;case 2:C=s+$,f=b-$;break;case 3:s=C-$,f=b-$;break}this._root&&this._root.length&&(this._root=w)}return this._x0=s,this._y0=f,this._x1=C,this._y1=b,this}function tree_data(){var e=[];return this.visit(function(u){if(!u.length)do e.push(u.data);while(u=u.next)}),e}function tree_extent(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Quad(e,u,s,f,C){this.node=e,this.x0=u,this.y0=s,this.x1=f,this.y1=C}function tree_find(e,u,s){var f,C=this._x0,b=this._y0,$,w,h,d,i=this._x1,r=this._y1,n=[],t=this._root,o,l;for(t&&n.push(new Quad(t,C,b,i,r)),s==null?s=1/0:(C=e-s,b=u-s,i=e+s,r=u+s,s*=s);o=n.pop();)if(!(!(t=o.node)||($=o.x0)>i||(w=o.y0)>r||(h=o.x1)<C||(d=o.y1)<b))if(t.length){var p=($+h)/2,v=(w+d)/2;n.push(new Quad(t[3],p,v,h,d),new Quad(t[2],$,v,p,d),new Quad(t[1],p,w,h,v),new Quad(t[0],$,w,p,v)),(l=(u>=v)<<1|e>=p)&&(o=n[n.length-1],n[n.length-1]=n[n.length-1-l],n[n.length-1-l]=o)}else{var k=e-+this._x.call(null,t.data),D=u-+this._y.call(null,t.data),_=k*k+D*D;if(_<s){var M=Math.sqrt(s=_);C=e-M,b=u-M,i=e+M,r=u+M,f=t.data}}return f}function tree_remove(e){if(isNaN(i=+this._x.call(null,e))||isNaN(r=+this._y.call(null,e)))return this;var u,s=this._root,f,C,b,$=this._x0,w=this._y0,h=this._x1,d=this._y1,i,r,n,t,o,l,p,v;if(!s)return this;if(s.length)for(;;){if((o=i>=(n=($+h)/2))?$=n:h=n,(l=r>=(t=(w+d)/2))?w=t:d=t,u=s,!(s=s[p=l<<1|o]))return this;if(!s.length)break;(u[p+1&3]||u[p+2&3]||u[p+3&3])&&(f=u,v=p)}for(;s.data!==e;)if(C=s,!(s=s.next))return this;return(b=s.next)&&delete s.next,C?(b?C.next=b:delete C.next,this):u?(b?u[p]=b:delete u[p],(s=u[0]||u[1]||u[2]||u[3])&&s===(u[3]||u[2]||u[1]||u[0])&&!s.length&&(f?f[v]=s:this._root=s),this):(this._root=b,this)}function removeAll(e){for(var u=0,s=e.length;u<s;++u)this.remove(e[u]);return this}function tree_root(){return this._root}function tree_size(){var e=0;return this.visit(function(u){if(!u.length)do++e;while(u=u.next)}),e}function tree_visit(e){var u=[],s,f=this._root,C,b,$,w,h;for(f&&u.push(new Quad(f,this._x0,this._y0,this._x1,this._y1));s=u.pop();)if(!e(f=s.node,b=s.x0,$=s.y0,w=s.x1,h=s.y1)&&f.length){var d=(b+w)/2,i=($+h)/2;(C=f[3])&&u.push(new Quad(C,d,i,w,h)),(C=f[2])&&u.push(new Quad(C,b,i,d,h)),(C=f[1])&&u.push(new Quad(C,d,$,w,i)),(C=f[0])&&u.push(new Quad(C,b,$,d,i))}return this}function tree_visitAfter(e){var u=[],s=[],f;for(this._root&&u.push(new Quad(this._root,this._x0,this._y0,this._x1,this._y1));f=u.pop();){var C=f.node;if(C.length){var b,$=f.x0,w=f.y0,h=f.x1,d=f.y1,i=($+h)/2,r=(w+d)/2;(b=C[0])&&u.push(new Quad(b,$,w,i,r)),(b=C[1])&&u.push(new Quad(b,i,w,h,r)),(b=C[2])&&u.push(new Quad(b,$,r,i,d)),(b=C[3])&&u.push(new Quad(b,i,r,h,d))}s.push(f)}for(;f=s.pop();)e(f.node,f.x0,f.y0,f.x1,f.y1);return this}function defaultX(e){return e[0]}function tree_x(e){return arguments.length?(this._x=e,this):this._x}function defaultY(e){return e[1]}function tree_y(e){return arguments.length?(this._y=e,this):this._y}function quadtree(e,u,s){var f=new Quadtree(u??defaultX,s??defaultY,NaN,NaN,NaN,NaN);return e==null?f:f.addAll(e)}function Quadtree(e,u,s,f,C,b){this._x=e,this._y=u,this._x0=s,this._y0=f,this._x1=C,this._y1=b,this._root=void 0}function leaf_copy(e){for(var u={data:e.data},s=u;e=e.next;)s=s.next={data:e.data};return u}var treeProto=quadtree.prototype=Quadtree.prototype;treeProto.copy=function(){var e=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),u=this._root,s,f;if(!u)return e;if(!u.length)return e._root=leaf_copy(u),e;for(s=[{source:u,target:e._root=new Array(4)}];u=s.pop();)for(var C=0;C<4;++C)(f=u.source[C])&&(f.length?s.push({source:f,target:u.target[C]=new Array(4)}):u.target[C]=leaf_copy(f));return e};treeProto.add=tree_add;treeProto.addAll=addAll;treeProto.cover=tree_cover;treeProto.data=tree_data;treeProto.extent=tree_extent;treeProto.find=tree_find;treeProto.remove=tree_remove;treeProto.removeAll=removeAll;treeProto.root=tree_root;treeProto.size=tree_size;treeProto.visit=tree_visit;treeProto.visitAfter=tree_visitAfter;treeProto.x=tree_x;treeProto.y=tree_y;function constant$1(e){return function(){return e}}function jiggle(e){return(e()-.5)*1e-6}function x$1(e){return e.x+e.vx}function y$1(e){return e.y+e.vy}function forceCollide(e){var u,s,f,C=1,b=1;typeof e!="function"&&(e=constant$1(e==null?1:+e));function $(){for(var d,i=u.length,r,n,t,o,l,p,v=0;v<b;++v)for(r=quadtree(u,x$1,y$1).visitAfter(w),d=0;d<i;++d)n=u[d],l=s[n.index],p=l*l,t=n.x+n.vx,o=n.y+n.vy,r.visit(k);function k(D,_,M,A,F){var N=D.data,O=D.r,H=l+O;if(N){if(N.index>n.index){var R=t-N.x-N.vx,I=o-N.y-N.vy,L=R*R+I*I;L<H*H&&(R===0&&(R=jiggle(f),L+=R*R),I===0&&(I=jiggle(f),L+=I*I),L=(H-(L=Math.sqrt(L)))/L*C,n.vx+=(R*=L)*(H=(O*=O)/(p+O)),n.vy+=(I*=L)*H,N.vx-=R*(H=1-H),N.vy-=I*H)}return}return _>t+H||A<t-H||M>o+H||F<o-H}}function w(d){if(d.data)return d.r=s[d.data.index];for(var i=d.r=0;i<4;++i)d[i]&&d[i].r>d.r&&(d.r=d[i].r)}function h(){if(u){var d,i=u.length,r;for(s=new Array(i),d=0;d<i;++d)r=u[d],s[r.index]=+e(r,d,u)}}return $.initialize=function(d,i){u=d,f=i,h()},$.iterations=function(d){return arguments.length?(b=+d,$):b},$.strength=function(d){return arguments.length?(C=+d,$):C},$.radius=function(d){return arguments.length?(e=typeof d=="function"?d:constant$1(+d),h(),$):e},$}function index(e){return e.index}function find(e,u){var s=e.get(u);if(!s)throw new Error("node not found: "+u);return s}function forceLink(e){var u=index,s=r,f,C=constant$1(30),b,$,w,h,d,i=1;e==null&&(e=[]);function r(p){return 1/Math.min(w[p.source.index],w[p.target.index])}function n(p){for(var v=0,k=e.length;v<i;++v)for(var D=0,_,M,A,F,N,O,H;D<k;++D)_=e[D],M=_.source,A=_.target,F=A.x+A.vx-M.x-M.vx||jiggle(d),N=A.y+A.vy-M.y-M.vy||jiggle(d),O=Math.sqrt(F*F+N*N),O=(O-b[D])/O*p*f[D],F*=O,N*=O,A.vx-=F*(H=h[D]),A.vy-=N*H,M.vx+=F*(H=1-H),M.vy+=N*H}function t(){if($){var p,v=$.length,k=e.length,D=new Map($.map((M,A)=>[u(M,A,$),M])),_;for(p=0,w=new Array(v);p<k;++p)_=e[p],_.index=p,typeof _.source!="object"&&(_.source=find(D,_.source)),typeof _.target!="object"&&(_.target=find(D,_.target)),w[_.source.index]=(w[_.source.index]||0)+1,w[_.target.index]=(w[_.target.index]||0)+1;for(p=0,h=new Array(k);p<k;++p)_=e[p],h[p]=w[_.source.index]/(w[_.source.index]+w[_.target.index]);f=new Array(k),o(),b=new Array(k),l()}}function o(){if($)for(var p=0,v=e.length;p<v;++p)f[p]=+s(e[p],p,e)}function l(){if($)for(var p=0,v=e.length;p<v;++p)b[p]=+C(e[p],p,e)}return n.initialize=function(p,v){$=p,d=v,t()},n.links=function(p){return arguments.length?(e=p,t(),n):e},n.id=function(p){return arguments.length?(u=p,n):u},n.iterations=function(p){return arguments.length?(i=+p,n):i},n.strength=function(p){return arguments.length?(s=typeof p=="function"?p:constant$1(+p),o(),n):s},n.distance=function(p){return arguments.length?(C=typeof p=="function"?p:constant$1(+p),l(),n):C},n}const a=1664525,c=1013904223,m=4294967296;function lcg(){let e=1;return()=>(e=(a*e+c)%m)/m}function x(e){return e.x}function y(e){return e.y}var initialRadius=10,initialAngle=Math.PI*(3-Math.sqrt(5));function forceSimulation(e){var u,s=1,f=.001,C=1-Math.pow(f,1/300),b=0,$=.6,w=new Map,h=timer(r),d=dispatch("tick","end"),i=lcg();e==null&&(e=[]);function r(){n(),d.call("tick",u),s<f&&(h.stop(),d.call("end",u))}function n(l){var p,v=e.length,k;l===void 0&&(l=1);for(var D=0;D<l;++D)for(s+=(b-s)*C,w.forEach(function(_){_(s)}),p=0;p<v;++p)k=e[p],k.fx==null?k.x+=k.vx*=$:(k.x=k.fx,k.vx=0),k.fy==null?k.y+=k.vy*=$:(k.y=k.fy,k.vy=0);return u}function t(){for(var l=0,p=e.length,v;l<p;++l){if(v=e[l],v.index=l,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),isNaN(v.x)||isNaN(v.y)){var k=initialRadius*Math.sqrt(.5+l),D=l*initialAngle;v.x=k*Math.cos(D),v.y=k*Math.sin(D)}(isNaN(v.vx)||isNaN(v.vy))&&(v.vx=v.vy=0)}}function o(l){return l.initialize&&l.initialize(e,i),l}return t(),u={tick:n,restart:function(){return h.restart(r),u},stop:function(){return h.stop(),u},nodes:function(l){return arguments.length?(e=l,t(),w.forEach(o),u):e},alpha:function(l){return arguments.length?(s=+l,u):s},alphaMin:function(l){return arguments.length?(f=+l,u):f},alphaDecay:function(l){return arguments.length?(C=+l,u):+C},alphaTarget:function(l){return arguments.length?(b=+l,u):b},velocityDecay:function(l){return arguments.length?($=1-l,u):1-$},randomSource:function(l){return arguments.length?(i=l,w.forEach(o),u):i},force:function(l,p){return arguments.length>1?(p==null?w.delete(l):w.set(l,o(p)),u):w.get(l)},find:function(l,p,v){var k=0,D=e.length,_,M,A,F,N;for(v==null?v=1/0:v*=v,k=0;k<D;++k)F=e[k],_=l-F.x,M=p-F.y,A=_*_+M*M,A<v&&(N=F,v=A);return N},on:function(l,p){return arguments.length>1?(d.on(l,p),u):d.on(l)}}}function forceManyBody(){var e,u,s,f,C=constant$1(-30),b,$=1,w=1/0,h=.81;function d(t){var o,l=e.length,p=quadtree(e,x,y).visitAfter(r);for(f=t,o=0;o<l;++o)u=e[o],p.visit(n)}function i(){if(e){var t,o=e.length,l;for(b=new Array(o),t=0;t<o;++t)l=e[t],b[l.index]=+C(l,t,e)}}function r(t){var o=0,l,p,v=0,k,D,_;if(t.length){for(k=D=_=0;_<4;++_)(l=t[_])&&(p=Math.abs(l.value))&&(o+=l.value,v+=p,k+=p*l.x,D+=p*l.y);t.x=k/v,t.y=D/v}else{l=t,l.x=l.data.x,l.y=l.data.y;do o+=b[l.data.index];while(l=l.next)}t.value=o}function n(t,o,l,p){if(!t.value)return!0;var v=t.x-u.x,k=t.y-u.y,D=p-o,_=v*v+k*k;if(D*D/h<_)return _<w&&(v===0&&(v=jiggle(s),_+=v*v),k===0&&(k=jiggle(s),_+=k*k),_<$&&(_=Math.sqrt($*_)),u.vx+=v*t.value*f/_,u.vy+=k*t.value*f/_),!0;if(t.length||_>=w)return;(t.data!==u||t.next)&&(v===0&&(v=jiggle(s),_+=v*v),k===0&&(k=jiggle(s),_+=k*k),_<$&&(_=Math.sqrt($*_)));do t.data!==u&&(D=b[t.data.index]*f/_,u.vx+=v*D,u.vy+=k*D);while(t=t.next)}return d.initialize=function(t,o){e=t,s=o,i()},d.strength=function(t){return arguments.length?(C=typeof t=="function"?t:constant$1(+t),i(),d):C},d.distanceMin=function(t){return arguments.length?($=t*t,d):Math.sqrt($)},d.distanceMax=function(t){return arguments.length?(w=t*t,d):Math.sqrt(w)},d.theta=function(t){return arguments.length?(h=t*t,d):Math.sqrt(h)},d}const constant=e=>()=>e;function ZoomEvent(e,{sourceEvent:u,target:s,transform:f,dispatch:C}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:u,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},transform:{value:f,enumerable:!0,configurable:!0},_:{value:C}})}function Transform(e,u,s){this.k=e,this.x=u,this.y=s}Transform.prototype={constructor:Transform,scale:function(e){return e===1?this:new Transform(this.k*e,this.x,this.y)},translate:function(e,u){return e===0&u===0?this:new Transform(this.k,this.x+this.k*e,this.y+this.k*u)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var identity=new Transform(1,0,0);Transform.prototype;function nopropagation(e){e.stopImmediatePropagation()}function noevent(e){e.preventDefault(),e.stopImmediatePropagation()}function defaultFilter(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function defaultExtent(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function defaultTransform(){return this.__zoom||identity}function defaultWheelDelta(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(e,u,s){var f=e.invertX(u[0][0])-s[0][0],C=e.invertX(u[1][0])-s[1][0],b=e.invertY(u[0][1])-s[0][1],$=e.invertY(u[1][1])-s[1][1];return e.translate(C>f?(f+C)/2:Math.min(0,f)||Math.max(0,C),$>b?(b+$)/2:Math.min(0,b)||Math.max(0,$))}function zoom(){var e=defaultFilter,u=defaultExtent,s=defaultConstrain,f=defaultWheelDelta,C=defaultTouchable,b=[0,1/0],$=[[-1/0,-1/0],[1/0,1/0]],w=250,h=interpolateZoom,d=dispatch("start","zoom","end"),i,r,n,t=500,o=150,l=0,p=10;function v(S){S.property("__zoom",defaultTransform).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",H).filter(C).on("touchstart.zoom",R).on("touchmove.zoom",I).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(S,E,T,B){var P=S.selection?S.selection():S;P.property("__zoom",defaultTransform),S!==P?M(S,E,T,B):P.interrupt().each(function(){A(this,arguments).event(B).start().zoom(null,typeof E=="function"?E.apply(this,arguments):E).end()})},v.scaleBy=function(S,E,T,B){v.scaleTo(S,function(){var P=this.__zoom.k,W=typeof E=="function"?E.apply(this,arguments):E;return P*W},T,B)},v.scaleTo=function(S,E,T,B){v.transform(S,function(){var P=u.apply(this,arguments),W=this.__zoom,z=T==null?_(P):typeof T=="function"?T.apply(this,arguments):T,U=W.invert(z),j=typeof E=="function"?E.apply(this,arguments):E;return s(D(k(W,j),z,U),P,$)},T,B)},v.translateBy=function(S,E,T,B){v.transform(S,function(){return s(this.__zoom.translate(typeof E=="function"?E.apply(this,arguments):E,typeof T=="function"?T.apply(this,arguments):T),u.apply(this,arguments),$)},null,B)},v.translateTo=function(S,E,T,B,P){v.transform(S,function(){var W=u.apply(this,arguments),z=this.__zoom,U=B==null?_(W):typeof B=="function"?B.apply(this,arguments):B;return s(identity.translate(U[0],U[1]).scale(z.k).translate(typeof E=="function"?-E.apply(this,arguments):-E,typeof T=="function"?-T.apply(this,arguments):-T),W,$)},B,P)};function k(S,E){return E=Math.max(b[0],Math.min(b[1],E)),E===S.k?S:new Transform(E,S.x,S.y)}function D(S,E,T){var B=E[0]-T[0]*S.k,P=E[1]-T[1]*S.k;return B===S.x&&P===S.y?S:new Transform(S.k,B,P)}function _(S){return[(+S[0][0]+ +S[1][0])/2,(+S[0][1]+ +S[1][1])/2]}function M(S,E,T,B){S.on("start.zoom",function(){A(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(B).end()}).tween("zoom",function(){var P=this,W=arguments,z=A(P,W).event(B),U=u.apply(P,W),j=T==null?_(U):typeof T=="function"?T.apply(P,W):T,V=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),G=P.__zoom,K=typeof E=="function"?E.apply(P,W):E,Y=h(G.invert(j).concat(V/G.k),K.invert(j).concat(V/K.k));return function(Q){if(Q===1)Q=K;else{var Z=Y(Q),J=V/Z[2];Q=new Transform(J,j[0]-Z[0]*J,j[1]-Z[1]*J)}z.zoom(null,Q)}})}function A(S,E,T){return!T&&S.__zooming||new F(S,E)}function F(S,E){this.that=S,this.args=E,this.active=0,this.sourceEvent=null,this.extent=u.apply(S,E),this.taps=0}F.prototype={event:function(S){return S&&(this.sourceEvent=S),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(S,E){return this.mouse&&S!=="mouse"&&(this.mouse[1]=E.invert(this.mouse[0])),this.touch0&&S!=="touch"&&(this.touch0[1]=E.invert(this.touch0[0])),this.touch1&&S!=="touch"&&(this.touch1[1]=E.invert(this.touch1[0])),this.that.__zoom=E,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(S){var E=select(this.that).datum();d.call(S,this.that,new ZoomEvent(S,{sourceEvent:this.sourceEvent,target:v,type:S,transform:this.that.__zoom,dispatch:d}),E)}};function N(S,...E){if(!e.apply(this,arguments))return;var T=A(this,E).event(S),B=this.__zoom,P=Math.max(b[0],Math.min(b[1],B.k*Math.pow(2,f.apply(this,arguments)))),W=pointer(S);if(T.wheel)(T.mouse[0][0]!==W[0]||T.mouse[0][1]!==W[1])&&(T.mouse[1]=B.invert(T.mouse[0]=W)),clearTimeout(T.wheel);else{if(B.k===P)return;T.mouse=[W,B.invert(W)],interrupt(this),T.start()}noevent(S),T.wheel=setTimeout(z,o),T.zoom("mouse",s(D(k(B,P),T.mouse[0],T.mouse[1]),T.extent,$));function z(){T.wheel=null,T.end()}}function O(S,...E){if(n||!e.apply(this,arguments))return;var T=S.currentTarget,B=A(this,E,!0).event(S),P=select(S.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",V,!0),W=pointer(S,T),z=S.clientX,U=S.clientY;dragDisable(S.view),nopropagation(S),B.mouse=[W,this.__zoom.invert(W)],interrupt(this),B.start();function j(G){if(noevent(G),!B.moved){var K=G.clientX-z,Y=G.clientY-U;B.moved=K*K+Y*Y>l}B.event(G).zoom("mouse",s(D(B.that.__zoom,B.mouse[0]=pointer(G,T),B.mouse[1]),B.extent,$))}function V(G){P.on("mousemove.zoom mouseup.zoom",null),yesdrag(G.view,B.moved),noevent(G),B.event(G).end()}}function H(S,...E){if(e.apply(this,arguments)){var T=this.__zoom,B=pointer(S.changedTouches?S.changedTouches[0]:S,this),P=T.invert(B),W=T.k*(S.shiftKey?.5:2),z=s(D(k(T,W),B,P),u.apply(this,E),$);noevent(S),w>0?select(this).transition().duration(w).call(M,z,B,S):select(this).call(v.transform,z,B,S)}}function R(S,...E){if(e.apply(this,arguments)){var T=S.touches,B=T.length,P=A(this,E,S.changedTouches.length===B).event(S),W,z,U,j;for(nopropagation(S),z=0;z<B;++z)U=T[z],j=pointer(U,this),j=[j,this.__zoom.invert(j),U.identifier],P.touch0?!P.touch1&&P.touch0[2]!==j[2]&&(P.touch1=j,P.taps=0):(P.touch0=j,W=!0,P.taps=1+!!i);i&&(i=clearTimeout(i)),W&&(P.taps<2&&(r=j[0],i=setTimeout(function(){i=null},t)),interrupt(this),P.start())}}function I(S,...E){if(this.__zooming){var T=A(this,E).event(S),B=S.changedTouches,P=B.length,W,z,U,j;for(noevent(S),W=0;W<P;++W)z=B[W],U=pointer(z,this),T.touch0&&T.touch0[2]===z.identifier?T.touch0[0]=U:T.touch1&&T.touch1[2]===z.identifier&&(T.touch1[0]=U);if(z=T.that.__zoom,T.touch1){var V=T.touch0[0],G=T.touch0[1],K=T.touch1[0],Y=T.touch1[1],Q=(Q=K[0]-V[0])*Q+(Q=K[1]-V[1])*Q,Z=(Z=Y[0]-G[0])*Z+(Z=Y[1]-G[1])*Z;z=k(z,Math.sqrt(Q/Z)),U=[(V[0]+K[0])/2,(V[1]+K[1])/2],j=[(G[0]+Y[0])/2,(G[1]+Y[1])/2]}else if(T.touch0)U=T.touch0[0],j=T.touch0[1];else return;T.zoom("touch",s(D(z,U,j),T.extent,$))}}function L(S,...E){if(this.__zooming){var T=A(this,E).event(S),B=S.changedTouches,P=B.length,W,z;for(nopropagation(S),n&&clearTimeout(n),n=setTimeout(function(){n=null},t),W=0;W<P;++W)z=B[W],T.touch0&&T.touch0[2]===z.identifier?delete T.touch0:T.touch1&&T.touch1[2]===z.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(z=pointer(z,this),Math.hypot(r[0]-z[0],r[1]-z[1])<p)){var U=select(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return v.wheelDelta=function(S){return arguments.length?(f=typeof S=="function"?S:constant(+S),v):f},v.filter=function(S){return arguments.length?(e=typeof S=="function"?S:constant(!!S),v):e},v.touchable=function(S){return arguments.length?(C=typeof S=="function"?S:constant(!!S),v):C},v.extent=function(S){return arguments.length?(u=typeof S=="function"?S:constant([[+S[0][0],+S[0][1]],[+S[1][0],+S[1][1]]]),v):u},v.scaleExtent=function(S){return arguments.length?(b[0]=+S[0],b[1]=+S[1],v):[b[0],b[1]]},v.translateExtent=function(S){return arguments.length?($[0][0]=+S[0][0],$[1][0]=+S[1][0],$[0][1]=+S[0][1],$[1][1]=+S[1][1],v):[[$[0][0],$[0][1]],[$[1][0],$[1][1]]]},v.constrain=function(S){return arguments.length?(s=S,v):s},v.duration=function(S){return arguments.length?(w=+S,v):w},v.interpolate=function(S){return arguments.length?(h=S,v):h},v.on=function(){var S=d.on.apply(d,arguments);return S===d?v:S},v.clickDistance=function(S){return arguments.length?(l=(S=+S)*S,v):Math.sqrt(l)},v.tapDistance=function(S){return arguments.length?(p=+S,v):p},v}function makeText(e){const u=e.append("a");u.attr("href",f=>f.url||void 0);const s=u.append("text");return s.attr("x",f=>f.x).attr("font-size",f=>f.text.fontSize||f.r).call(drag().on("start",(f,C)=>{C.text.fx=C.text.fx||0,C.text.fy=C.text.fy||0,logMainEvent("clicked: "+C.id,JSON.stringify(C,null,3))}).on("drag",(f,C)=>{C.fx=f.x,C.fy=f.y}).on("end",(f,C)=>{})),s.selectAll("tspan").data(f=>getNodeText(f).split(`
`).map((C,b)=>({node:f,i:b,text:C}))).join(f=>f.append("tspan").attr("text-anchor","middle").attr("dy",C=>C.node.r*2).attr("dx",0),f=>f.selectAll("tspan").text(C=>C.text),f=>f.selectAll("tspan").remove()),e}function updateNodeTextSvg(e){const u=e.select("a");return u.attr("href",f=>f.url||void 0),u.select("text").attr("x",f=>(f.x||0)+(f.text.fx||0)).attr("y",f=>(f.y||0)+(f.text.fy||0)-getNodeText(f).split(`
`).length*f.r/2).attr("font-size",f=>f.text.fontSize||f.r).selectAll("tspan").data(f=>getNodeText(f).split(`
`).map((C,b)=>({node:f,i:b,text:C}))).text(f=>f.text).attr("x",f=>(f.node.x||0)+(f.node.text.fx||0)),e}function makeRect(e){return e.append("rect")}function makeImage(e){return e.append("rect").attr("width",u=>window.spwashi.getNodeImageHref(u)?u.image.r||u.r:0).attr("height",u=>window.spwashi.getNodeImageHref(u)?u.image.r||u.r:0).attr("x",u=>u.x+u.image.offsetX-u.image.r/2).attr("y",u=>u.y+u.image.offsetY-u.image.r/2),e.append("image").attr("href",window.spwashi.getNodeImageHref).attr("width",u=>u.image.r||u.r).attr("height",u=>u.image.r||u.r).attr("preserveAspectRatio",u=>"xMidYMin slice").attr("x",u=>u.x+u.image.offsetX).attr("y",u=>u.y+u.image.offsetY).attr("stroke",getNodeStrokeColor).attr("stroke-width",2).call(drag().on("start",(u,s)=>{}).on("drag",(u,s)=>{s.image.offsetX+=u.dx,s.image.offsetY+=u.dy}).on("end",(u,s)=>{cacheNode()})).on("error",(u,s)=>{s.image.href=null,s.image.r=0}).on("click",(u,s)=>{if(event.defaultPrevented)return;let f=window.spwashi.superpower.intent;switch(u.shiftKey&&(f*=-1),window.spwashi.superpower.name){case"grow":{s.image.r=s.image.r||s.r,s.image.r+=f;break}case"shrink":{s.image.r=s.image.r||s.r,s.image.r-=f;break}case"changecolor":{isNaN(s.colorindex)&&(s.colorindex=1),s.colorindex+=f;break}}cacheNode()}),e}function updateNodeImage(e){e.select("rect").attr("stroke","black").attr("x",u=>u.x+u.image.offsetX-u.image.r/2).attr("y",u=>u.y+u.image.offsetY-u.image.r/2).attr("width",u=>window.spwashi.getNodeImageHref(u)?u.image.r:0).attr("height",u=>window.spwashi.getNodeImageHref(u)?u.image.r:0),e.select("image").attr("href",window.spwashi.getNodeImageHref).attr("width",u=>u.image.r).attr("height",u=>u.image.r).attr("x",u=>u.x+u.image.offsetX-u.image.r/2).attr("y",u=>u.y+u.image.offsetY-u.image.r/2)}const NODE_MANAGER={getNode,initNodes,normalize,updateNodes,filterNode,processNode,cacheNode},idMap=new Map;function getNodeImageHref(e){return null}function sortNodes(e){return e.sort((u,s)=>u.z-s.z)}function getNodeId(e,u){const s=getNodeRootId(e,u),f=idMap.get(s)||new Set;return f.has(e)||(e.id=s+(f.size?"["+f.size+"]":""),f.add(e)),e.id=e.id||s,idMap.set(e.id,f),e.id}function getNodeRootId(e={},u=0){return e.identity?e.identity:`node:[${u}]`}function normalize(e,u,s){const f={image:{},charge:0,parts:{},text:{fontSize:20},r:1*window.spwashi.parameters.nodes.radiusMultiplier,z:0,x:window.spwashi.parameters.startPos.x+s*2,y:window.spwashi.parameters.startPos.y,colorindex:getDocumentDataIndex()};return Object.assign(e,f,u,{name:e.identity||"node:"+s,idx:s},{...e}),e.r=Math.max(e.r,1),e.private={},e.image.r=isNaN(e.image.r)?e.r:Math.max(10,e.image.r),e.image.offsetX=isNaN(e.image.offsetX)?0:e.image.offsetX,e.image.offsetY=isNaN(e.image.offsetY)?e.r:e.image.offsetY,e}function initNodes(e){const u=e.length;for(let f=0;f<u;f++){const C={id:getNodeId(e[f],f)},b=readNodePosition(C);NODE_MANAGER.normalize(e[f],{...C,...b},f)}const s=sortNodes(e);return window.spwashi.nodes=s}function updateNodes(e,u){const s=e.select(".nodes").selectAll("g.wrapper").data(u,$=>$.id),f=$=>{const w=$.append("g").classed("wrapper",!0),h=w.append("g").classed("image",!0),d=w.append("g").classed("node",!0),i=w.append("g").classed("text",!0);return makeImage(h),makeCircle(d),makeRect(d),makeText(i),w},C=$=>{const w=$.select("g.node"),h=$.select("g.image"),d=$.select("g.text");return updateCircle(w),updateNodeTextSvg(d),updateNodeImage(h),w.select("rect").attr("stroke-width","1px").attr("fill",getNodeColor).attr("stroke",getNodeStrokeColor).attr("fill","none").attr("x",i=>i.x-i.r).attr("y",i=>i.y-i.r),$},b=$=>{$.select("g.node").remove(),$.select("g.text").remove(),$.select("g.image").remove()};s.join(f,C,b)}function filterNode(e){return!0}function getNode(e,u){let s;return window.spwashi.nodes.find(f=>{if(f.identity===e)return s=f,u===void 0?!0:f.colorindex===u;f.id===e&&(s=f)})||s}function logMainEvent(e,u){const f=document.querySelector("#main-log").querySelector(".events-log");if(!f)return;const C=document.createElement("li");f.appendChild(C);const b=document.createElement("details");C.appendChild(b);const $=document.createElement("summary");if(b.appendChild($),$.innerText=e,u){const w=document.createElement("pre");w.innerText=u,b.appendChild(w)}}function makeCircle(e){window.spwashi.nodes.clicked=window.spwashi.nodes.clicked||[];const u=(s,f)=>{var b;if(window.spwashi.nodes.clicked.push(f),console.log(f),logMainEvent("clicked: "+f.id,JSON.stringify(f,null,3)),s.defaultPrevented)return;let C=window.spwashi.superpower.intent;if(s.key==="x"){f.fx=isNaN(f.fx)?f.x:f.fx;return}if(s.key==="y"){f.fy=isNaN(f.fy)?f.y:f.fy;return}if(s.shiftKey){f.fx=f.fy=void 0;return}if(!(s.key&&s.key!==" ")){switch(s.shiftKey&&(C*=-1),window.spwashi.superpower.name){case"hyperlink":const $=(b=f.getUrl)==null?void 0:b.call(f);if(f.url=$,console.log($),!$)break;logMainEvent("hyperlink: "+$);break;case"prune":window.spwashi.nodes.splice(window.spwashi.nodes.indexOf(f),1),window.spwashi.links=window.spwashi.links.filter(w=>w.source!==f&&w.target!==f),window.spwashi.reinit();break;case"alert":if(!f.md5)return;navigator.clipboard.writeText(f.md5).then(w=>{alert(f.md5)});break;case"grow":{f.r+=C;break}case"shrink":{f.r-=C;break}case"changecolor":{isNaN(f.colorindex)&&(f.colorindex=1),f.colorindex+=C;break}case"z":{f.z=f.z||0,f.z+=C,sortNodes(ACTIVE_NODES);break}}cacheNode()}};return e.append("circle").attr("data-colorindex",s=>"spwashi-datum-"+s.colorindex).attr("r",s=>s.r||1).attr("fill",s=>s.color||void 0).attr("cx",s=>s.x||0).attr("cy",s=>s.y||0).call(drag().on("start",(s,f)=>{f.x=s.x,f.y=s.y}).on("drag",(s,f)=>{f.fx=s.x,f.fy=s.y}).on("end",(s,f)=>{window.spwashi.tick(),cacheNode()})).on("click",u).on("keydown",(s,f)=>{u(s,f)})}function updateCircle(e){e.select("circle").attr("fill",u=>u.color||void 0).attr("data-colorindex",u=>u.color?void 0:"spwashi-datum-"+u.colorindex%13).attr("cx",u=>u.x||0).attr("r",u=>u.r||1).attr("cy",u=>u.y||0)}function updateRects(e,u){e.select(".rects").selectAll("g.rect").data(u,s=>s.title).join(s=>{const f=s.append("g").classed("rect",!0);f.append("rect").attr("width",C=>Math.abs(C.width)).attr("height",C=>C.height||5).attr("x",C=>C.x).attr("y",C=>C.y).attr("fill",C=>C.fill||"teal").attr("stroke","yellow").attr("stroke-width",1).attr("pointer-events","all").on("click",()=>{}),f.append("text").attr("text-anchor","start").attr("x",C=>30).attr("y",C=>C.y+15).text(C=>C.title)},s=>{s.selectAll("rect").attr("fill",f=>f.fill||"teal").attr("width",f=>Math.abs(f.width||0)).attr("height",f=>Math.abs(f.height||0)).attr("y",f=>f.y).attr("x",f=>f.x),s.selectAll("text").text(f=>f.title)})}const RECT_MANAGER={initRects:e=>e,updateRects},simulationSVG=select("svg#simulation"),g=simulationSVG.append("g").attr("id","simulation-content");g.append("g").classed("rects",!0);const linksG=g.append("g").classed("links",!0),circlesG=g.append("g").classed("nodes",!0),nodeG_offset={x:0,y:0},nodeG_transform={x:0,y:0};function reinitializeSimulation(){if(window.spwashi.counter=0,simulationSVG.attr("width",window.spwashi.parameters.width).attr("height",window.spwashi.parameters.height).attr("preserveAspectRatio","xMinYMin meet"),window.spwashi.parameters.canzoom)simulationSVG.call(zoom().on("zoom",(C,b)=>{const $=(C.transform.k-1)*10;window.spwashi.zoomTransform={k:$},C.sourceEvent.shiftKey?(window.spwashi.parameters.forces._charge=window.spwashi.parameters.forces._charge||window.spwashi.parameters.forces.charge,window.spwashi.parameters.forces.charge=window.spwashi.parameters.forces._charge*$,reinitializeSimulation()):window.spwashi.nodes.forEach(w=>{w.private._r=w.private._r||w.r,w.r=w.private._r*C.transform.k})}));else if(window.spwashi.parameters.canpan)simulationSVG.call(drag().on("start",C=>{simulationSVG.attr("cursor","grabbing"),nodeG_offset.x=C.x,nodeG_offset.y=C.y}).on("drag",C=>{const b=nodeG_offset.x-C.x,$=nodeG_offset.y-C.y;nodeG_transform.x+=b/10,nodeG_transform.y+=$/10,circlesG.attr("transform",`translate(${nodeG_transform.x}, ${nodeG_transform.y})`),linksG.attr("transform",`translate(${nodeG_transform.x}, ${nodeG_transform.y})`)}).on("end",C=>{simulationSVG.attr("cursor","grab"),nodeG_offset.x=C.x,nodeG_offset.y=C.y}));else{let C=null;simulationSVG.on("mousedown",b=>{C={x:b.offsetX,y:b.offsetY,calc:$=>$,width:1,height:1},window.spwashi.rects.push(C),logMainEvent("mousedown:"+b.y+" "+b.x)}).on("mousemove",b=>{if(!C)return 0;C.width=b.offsetX-C.x,C.height=b.offsetY-C.y}).on("mouseup",b=>{const $=window.spwashi.nodes.filter(r=>r.x>C.x&&r.x<C.x+C.width&&r.y>C.y&&r.y<C.y+C.height),w=extent($,r=>r.x),h=(w[1]-w[0])/$.length,d=extent($,r=>r.y),i=(d[1]-d[0])/$.length;logMainEvent(w+" "+d),$.forEach((r,n)=>{r.fx=w[0]+h*n,r.fy=d[0]+i*n,r.charge=-1e3}),window.spwashi.rects.splice(window.spwashi.rects.indexOf(C),1),reinitializeSimulation(),C=null,logMainEvent("mouseup:"+b.y+" "+b.x)})}const e=NODE_MANAGER.initNodes(window.spwashi.nodes),u=EDGE_MANAGER.initLinks(window.spwashi.links,e),s=RECT_MANAGER.initRects(window.spwashi.rects),f=window.spwashi.simulation;f.nodes(e),initializeForces(f,u,e),window.spwashi.tick=()=>{f.tick(1),window.spwashi.internalTicker()},window.spwashi.internalTicker=()=>{window.spwashi.counter+=1,s.forEach(C=>C.calc(C)),EDGE_MANAGER.updateLinks(g,u),NODE_MANAGER.updateNodes(g,e),RECT_MANAGER.updateRects(g,s)},f.on("tick",window.spwashi.internalTicker),document.querySelector("#output").innerHTML=JSON.stringify(window.spwashi.parameters,null,2)}function initializeForces(e,u,s){e.alpha(window.spwashi.parameters.forces.alpha),e.alphaTarget(window.spwashi.parameters.forces.alphaTarget),e.alphaDecay(window.spwashi.parameters.forces.alphaDecay),e.velocityDecay(window.spwashi.parameters.forces.velocityDecay),e.force("link",forceLink().links(u).id(f=>f.id).strength(f=>f.strength||1)),e.force("collide",forceCollide(f=>f.cr||f.r)),e.force("charge",null),e.force("charge",forceManyBody().strength(f=>f.charge||window.spwashi.parameters.forces.charge)),e.force("center",forceCenter(window.spwashi.parameters.forces.centerPos.x,window.spwashi.parameters.forces.centerPos.y).strength(window.spwashi.parameters.forces.centerStrength)),e.force("boundingBox",null),window.spwashi.parameters.forces.boundingBox&&e.force("boundingBox",f=>{for(let C=0,b=s.length,$=f*.1;C<b;++C){const w=s[C];w.x>window.spwashi.parameters.width?(w.x=window.spwashi.parameters.width,w.vx*=.9):w.x<0&&(w.x=0,w.vx*=.9),w.y>window.spwashi.parameters.height?(w.y=window.spwashi.parameters.height,w.vy*=.9):w.y<0&&(w.y=0,w.vy*=.9)}})}function initSimulationNodes(){window.spwashi.clearCachedNodes=()=>{window.spwashi.setItem("nodes",[])},window.spwashi.getNodeImageHref=getNodeImageHref,window.spwashi.getNode=NODE_MANAGER.getNode,window.spwashi.nodes=window.spwashi.nodes||[]}function initSimulationEdges(){window.spwashi.links=window.spwashi.links||[]}function getDefaultRects(){return[{title:"Counter",x:0,width:0,calc:e=>e.width=window.spwashi.counter*1},{title:"Alpha",x:0,width:0,calc:e=>e.width=window.spwashi.simulation.alpha()*(window.spwashi.parameters.width||0)},{title:"Alpha Decay",x:0,width:0,calc:e=>e.width=window.spwashi.simulation.alphaDecay()*(window.spwashi.parameters.width||0)},{title:"Charge",x:0,width:0,calc:e=>{e.title="Charge: "+window.spwashi.parameters.forces.charge,e.width=window.spwashi.parameters.forces.charge}},{title:"Velocity Decay",x:0,width:0,calc:e=>e.width=window.spwashi.simulation.velocityDecay()*(window.spwashi.parameters.width||0)},{title:"Zoom",x:0,width:1,calc:e=>{var u;return e.title=`Zoom: ${((u=window.spwashi.zoomTransform)==null?void 0:u.k)||1}`}},{title:"Node Quantity",x:0,width:0,calc:e=>{let u=window.spwashi.nodes.length;return e.title="Node Count: "+u,e.width=u}},{title:"Node Queue Count",x:0,width:0,calc:e=>{const u=window.spwashi.parameters.nodes.count;e.title="Node Queue Count: "+u,e.width=u}}].map((e,u)=>(e.height=20,e.y=u*20,e))}function initSimulationRects(){window.spwashi.rects=window.spwashi.rects||getDefaultRects()}function initSimulationRoot(){window.spwashi.reinit=reinitializeSimulation,window.spwashi.simulation=forceSimulation(),initSimulationNodes(),initSimulationEdges(),initSimulationRects()}const generateNodes=e=>{const u=e||window.spwashi.parameters.nodes.count,s=[...Array(u)].map(f=>({name:"boon"}));window.spwashi.nodes.push(...s),reinitializeSimulation()};function initializeForceSimulationControls(){const e=window.spwashi.simulation;if(!e){const w="no force simulation initialized";throw alert(w),new Error(w)}const u=document.querySelector("#controls .tick");u.onclick=()=>{window.spwashi.tick()};const s=document.querySelector("#controls .start");s.onclick=()=>{e.restart()};const f=document.querySelector("#controls .stop");f.onclick=()=>{e.stop()};const C=document.querySelector("#controls .reinit");C.onclick=()=>{reinitializeSimulatirectsManageron()};const b=document.querySelector("#controls .clear-fixed-positions");b.onclick=()=>{window.spwashi.nodes.forEach(w=>{w.fx=void 0,w.fy=void 0})};const $=document.querySelector("#controls .generate-nodes");$.onclick=generateNodes}const getItemKey=(e,u=null)=>(u||(u=window.spwashi.parameterKey),u+"@"+e);function initCallbacks(){window.spwashi.callbacks=window.spwashi.callbacks||{},window.spwashi.callbacks.arrowRight=()=>{},window.spwashi.callbacks.arrowLeft=()=>{},window.spwashi.callbacks.arrowUp=()=>{},window.spwashi.callbacks.arrowDown=()=>{}}function resetArrows(){const e=()=>{};window.spwashi.callbacks.arrowUp=e,window.spwashi.callbacks.arrowDown=e,window.spwashi.callbacks.arrowLeft=e,window.spwashi.callbacks.arrowRight=e}document.body.addEventListener("mousedown",e=>{e.target.tagName!=="BUTTON"&&e.target.tagName!=="CIRCLE"&&document.body.dataset.interfaceDepth==="standard"&&(initFocalSquare(),focalPoint.fx===void 0||focalPoint.fy)},!0);function resetInterfaceDepth(){document.body.dataset.interfaceDepth="standard"}function initListeners(){window.spwashi.onModeChange=(e,u=!1)=>{var f,C,b,$,w;e&&window.spwashi.setItem("mode",e,"focal.root"),(f=document.querySelector('[data-mode-action] [aria-selected="true"]'))==null||f.setAttribute("aria-selected","false");const s=document.querySelector(`#mode-selector--${e}`);switch(s&&(s.setAttribute("aria-selected","true"),initFocalSquare(),document.body.dataset.interfaceDepth==="main-menu"?attachFocalPointToElementPosition(s):focalPoint.fx||setFocalPoint({x:window.innerWidth*.2,y:window.innerHeight*.75})),resetArrows(),e){case"spw":const h=document.querySelector("#spw-mode-container");h.tabIndex=0,u&&h.focus();break;case"reflex":onReflexModeStart();break;case"color":onColorModeStart();break;case"story":const i=document.querySelector("#story-mode-container").querySelector(".button-container button");i.focus(),i.onfocus=()=>i.tabIndex=0;break;case"node":const r=document.querySelector("#node-input-container");r.tabIndex=0,r.focus(),r.onfocus=()=>r.tabIndex=0;break;case"map":(b=(C=window.spwashi.callbacks).onMapMode)==null||b.call(C);break;case"filter":(w=($=window.spwashi.callbacks).onFilterMode)==null||w.call($);break}resetInterfaceDepth()},window.spwashi.onDataIndexChange=e=>{}}function initH1(){const e=document.querySelector("h1"),u=e.innerText,s=document.querySelector("#main-wonder-button");e.tabIndex=0,e.onclick=$=>{$.target===e&&($.stopPropagation(),b())},e.onkeydown=$=>{if($.ctrlKey||$.metaKey||$.shiftKey){($.ctrlKey||$.metaKey)&&$.key==="c"&&navigator.clipboard.writeText(u);return}$.target===e&&$.key!=="Tab"&&($.key===" "&&$.preventDefault(),!$.key.match(/\d/)&&s.click())};let f;function C(){document.removeEventListener("click",f),e.innerText=u}function b(){const $=document.createElement("form"),w=document.createElement("input");w.value=u,w.id="h1-input",$.appendChild(w);const h=document.createElement("button");h.type="submit",h.innerText="Submit",$.appendChild(h),e.innerHTML="",e.appendChild($),w.focus(),w.setSelectionRange(0,w.value.length),h.onclick=d=>{d.preventDefault();const i=w.value;console.log({value:i});const r=JSON.parse(JSON.stringify(parse(i))),n=getNextUrlSearchParams(),t=getIdentityPath(md5(r.identity),n,r.identity);window.location.href=t},f=()=>{C()},h.onblur=()=>{C()},document.addEventListener("click",f)}s.onclick=$=>{$.stopPropagation(),b()}}function initRootSession(){window.spwashi.__session=window.spwashi.__session||{i:0}}function initRoot(){initRootSession(),initCallbacks(),initListeners(),window.spwashi.counter=0,window.spwashi.modeOrder=["reflex","color","map","filter","node","query","debug","story","spw"],window.spwashi.readParameters=readParameters,window.spwashi.setItem=(e,u,s=null)=>{window.localStorage.setItem(getItemKey(e,s),JSON.stringify(u||null))},window.spwashi.getItem=(e,u=null)=>{const s=window.localStorage.getItem(getItemKey(e,u));if(s)return JSON.parse(s||"{}")},initSimulationRoot()}function init(){window.spwashi={},initRoot(),initParameters(),window.spwashi.readParameters(new URLSearchParams(window.location.search)),window.spwashi.doFetchNodes&&(async()=>{const u=await fetch("http://localhost:3000/identities").then(b=>b.json()),s=await fetch("http://localhost:3000/tokens").then(b=>b.json()),f={};return{identities:u,tokens:s.filter(b=>f[b.identity]?!1:f[b.identity]=!0)}.tokens})().then(u=>window.spwashi.nodes.push(...u)).then(u=>reinitializeSimulation()),initializeForceSimulationControls(),initFocalSquare(),initH1()}init();
//# sourceMappingURL=index-X4dMXAuC.js.map
